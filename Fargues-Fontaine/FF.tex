\documentclass[a4paper, 10pt, oneside, DIV=9, chapterprefix=true, numbers=enddot,bibliography=totoc]{scrbook}
\usepackage{StyleFF}
\usepackage{ShortcutsFF}

\usetikzlibrary{shapes.geometric,patterns}
\DeclareRobustCommand{\Attention}{\tikz[baseline, anchor=base]\node[draw, regular polygon, regular polygon sides=3, rounded corners=2, thick, inner sep=-0.25pt] at (0,0) {\textbf{!}};}


\subject{Lecture Notes for}
\title{The Fargues--Fontaine Curve}
\subtitle{Or: \enquote{The Fundamental Curve of $p$-adic Hodge Theory}}
\author{{\normalsize Lecturer}\\
	Johannes Anschütz}
\date{{\normalsize Notes typed by}\\
	Ferdinand Wagner}
\publishers{Winter Term 2019/20\\
University of Bonn}

%\includeonly{nothingtoseehere}
\begin{document}
\frontmatter
\KOMAoption{chapterprefix}{false}
\maketitle
\noindent This text consists of notes on the lecture Selected Topics in Algebra (The Fargues--Fontaine Curve), taught at the University of
Bonn by Dr.\ Johannes Anschütz in the winter term (Wintersemester) 2019/20.

Some changes and some additions have been made by the author. To distinguish them from the lecture's actual contents, they are labelled with an asterisk. So any \emph{Lemma}* or \emph{Remark}* or \emph{Proof}* that the reader might encounter are wholly the author's responsibility.\\[\thmsep]Please report errors, typos etc.\ through the \emph{Issues} feature of GitHub.


\tableofcontents
\listoftoc{lol}
\setcounter{llecture}{-1}
\include{./Chapters/FFintro}

\mainmatter\KOMAoption{chapterprefix}{true}
\renewcommand{\thedummy}{\thesection.\arabic{dummy}}

\include{./Chapters/FF11to12}
\include{./Chapters/FF13to15}



\chapter{Classification of Vector Bundles on the Fargues--Fontaine Curve}
\section{The Vector Bundles \texorpdfstring{$\Oo_{X_\FFC}(\lambda)$}{OX(lambda)}}
\lecture[HN-filtrations and HN-polygons. $\phi$-modules over $\breve{E}$. Construction of the vector bundles $\Oo_{X_\FFC}(\lambda)$.]{2020-01-08}As usual, let $E/\IQ_p$ be a finite extension with uniformizer $\pi$ and residue field $\Oo_E/\pi \Oo_E=\IF_q$, and let $F/\IF_q$ a non-archimedean algebraically closed extension. 

\subsection{The Harder--Narasimhan Formalism}\label{subsec:HNFormalism}
Henceforth, the names Harder--Narasimhan will be abbreviated as HN. Let $\Cc$ be an exact category; roughly speaking, this is an additive category together with a notion of short exact sequences (for example, the categories $\cat{Bun}_{\IP_k^1}$ and $\cat{Bun}_{X_\FFC}$ of vector bundles on $\IP_k^1$ and on the Fargues--Fontaine curve $X_\FFC$ respectively). Moreover, we assume there are:
\begin{alphanumerate}
	\item a function $\rk\colon \Ob(\Cc)\morphism \IN_{\geq 0}$ (the \defemph{rank function}). In the case where $\Cc$ is a category of vector bundles on $\IP_k^1$ or $X_\FFC$, this is just what one would expect.
	\item a function $\deg \colon \Ob(\Cc)\morphism \IZ$ (the \defemph{degree function}). For vector bundles, we would take $\deg \Ee=\deg (\bigwedge^{\rk \Ee}\Ee)$. We have seen last time in \cref{prop:PicX=Z} that for the Fargues--Fontaine curve $X_\FFC$, $\deg \colon \Pic(X_\FFC)\isomorphism\IZ$ is an isomorphism. 
\end{alphanumerate}
Both $\rk$ and $\deg $have to be additive on short exact sequences in $\Cc$. Moreover, we require that there is an exact and faithful functor $F\colon \Cc\morphism \Aa$ (the \defemph{generic fibre functor} in the case where $\Cc$ equals $\cat{Bun}_{\IP_k^1}$ or $\cat{Bun}_{X_\FFC}$) into an abelian category $\Aa$, such that for all $\Ee\in \Cc$, the functor $F$ induces a bijection
\begin{equation*}
	F\colon \left\{\text{strict subobjects of }\Ee\right\}\isomorphism \left\{\text{subobjects of }F(\Ee)\right\}\,.
\end{equation*}
Here a \defemph{strict subobjects} means a monomorphism $\Ee'\monomorphism \Ee$ that is part of a short exact sequence in $\Cc$. Finally, we assume
\begin{numerate}
	\item $\rk\colon \Ob(\Cc)\morphism \IN_{\geq 0}$ is the restriction of another function $\rk\colon \Ob(\Aa)\morphism \IN_{\geq 0}$ along $F$, which again has to be additive on short exact sequences and satisfies $\rk V=0$ iff $V=0$ for all $V\in \Aa$.
	\item If $u\colon \Ee\morphism\Ee'$ is a morphism in $\Cc$ such that $F(u)$ is an isomorphism, then $\deg \Ee\leq \deg \Ee'$ with equality iff $u$ is an isomorphism.
\end{numerate}
%Again, both requirements are easily seen for $\Cc=\cat{Bun}_{\IP_k^1}$ or $\Cc=\cat{Bun}_X$ and $F$ the generic fibre functor.
\begin{defi}
	Let $\Ee\in \Cc$ be an arbitrary object.
	\begin{numerate}
		\item The \defemph{slope of $\Ee$} is the (possibly infinite) number $\mu(\Ee)\coloneqq \deg(\Ee)/\rk(\Ee)\in \IQ\cup\{\infty\}$.
		\item $\Ee$ is called \defemph{semistable} if for all non-zero strict subobjects $\Ff\subseteq \Ee$ we have $\mu(\Ff)\leq \mu(\Ee)$.
	\end{numerate}
\end{defi}
\begin{exm}
	If $\Cc=\cat{Bun}_{X_\FFC}$, then the twisting sheaves $\Oo_{X_\FFC}(n)$ for $n\in \IZ$ are semistable line bundles. Moreover, $\Ee=\Oo_{X_\FFC}(m)\oplus \Oo_{X_\FFC}(n)$ is semistable iff $m=n$. Indeed, its slope is $\mu(\Ee)=(m+n)/2$. Thus for $n\neq m$, either $\Oo_{X_\FFC}(m)$ or $\Oo_{X_\FFC}(n)$ is a subbundle of higher slope. Conversely, for $m=n$, every non-trivial strict subobject of $\Ee$ is of the form $\Oo_{X_\FFC}(m')\monomorphism \Oo_{X_\FFC}(m)$ for $m'\leq m$, hence has slope at most $m$.
\end{exm}
\begin{lem}\label{lem:HN}
	Let $\Ee,\Ee'\in \Cc$ be semistable objects of slopes $\lambda$, $\lambda'$ respectively. If $\lambda>\lambda'$, then we have
	\begin{equation*}
		\Hom_\Cc(\Ee,\Ee')=0\,.
	\end{equation*}
\end{lem}
\begin{proof*}
	Let $\Ee\morphism \Ee'$ be a morphism in $\Cc$. Since $\Aa$ is abelian, we can splice $F(\Ee)\morphism F(\Ee')$ into short exact sequences $0\morphism K\morphism F(\Ee)\morphism K'\morphism 0$ and $0\morphism K'\morphism F(\Ee')\morphism K''\morphism 0$. By our assumption on $F$, the objects $K$ and $K'$ correspond to strict subobjects $\Kk\subseteq \Ee$ and $\Kk'\subseteq \Ee'$. Since $F$ is exact, these guys satisfy $F(\Ee/\Kk)\cong K'\cong F(\Kk')$ and $F(\Ee'/\Kk')\cong K''$. Moreover, we claim that $\Ee\morphism \Ee'$ factors over $\Ee/\Kk$. Indeed, what we need to prove is that $\Kk\morphism\Ee'$ is the zero morphism. Since $F$ is faithful, this may be checked after applying $F$, and for $K\cong F(\Kk)\morphism F(\Ee')$ this is clearly true. In the same way we show that $\Ee\morphism \Ee'$ factors over $\Kk'$.
	
	Hence we get a canonical morphism $\Ee/\Kk\morphism \Kk'$. By construction, this becomes an isomorphism after applying $F$, so $\deg(\Ee/\Kk)\leq \deg(\Kk')$ and $\rk (\Ee/\Kk)=\rk (\Kk')$ by the above properties. In particular, we have $\mu(\Ee/\Kk)\leq \mu(\Kk')$. But $\Ee'$ and $\Ee$ are semistable, hence $\mu(\Kk')\leq \lambda'$ and $\mu(\Kk)\leq \lambda$, except for $\Kk'=0$ (in which case we are done) or $\Kk=0$ (which leads to $\lambda=\mu(\Ee)=\mu(\Ee/\Kk)\leq \lambda'$, a contradiction).
	
	So if no of these two special cases occurs, we get $\mu(\Kk)\leq \lambda$ and $\mu(\Ee/\Kk)<\lambda$. This however contradicts \cref{lem*:MuOnSES} below.
\end{proof*}
\begin{lem*}\label{lem*:MuOnSES}
	For any short exact sequence $0\morphism \Ee'\morphism \Ee\morphism \Ee''\morphism 0$ in $\Cc$ we have 
	\begin{equation*}
		\min\{\mu(\Ee'),\mu(\Ee'')\}\leq \mu(\Ee)\leq \max\{\mu(\Ee'),\mu(\Ee'')\}\,.
	\end{equation*}
	For the left half, equality holds iff $\mu(\Ee')=\mu(\Ee'')$ or one of $\Ee'$, $\Ee''$ is zero. Equality on the right holds iff $\mu(\Ee')=\mu(\Ee'')$.
\end{lem*}
\begin{proof*}
	Put $d'=\deg(\Ee')$, $d''=\deg(\Ee'')$ and $r'=\rk(\Ee')$, $r''=\rk(\Ee'')$. By additivity of $\deg$ and $\rk$ on short exact sequences, we obtain
	\begin{equation*}
		\mu(\Ee)=\frac{d'+d''}{r'+r''}=\frac{r'}{r'+r''}\cdot\mu(\Ee')+\frac{r''}{r'+r''}\cdot\mu(\Ee'')\,.
	\end{equation*}
	Thus, $\mu(\Ee)$ is a convex combination of $\mu(\Ee')$ and $\mu(\Ee'')$ and the inequality as well as the discussion of equality cases follow rather easily.
\end{proof*}

\begin{thm}\label{thm:HN}
	Each $\Ee\in \Cc$ has a unique functorial filtration, called \enquote{HN-filtration}, of the form
	\begin{equation*}
		0=\Ee_0\subsetneq \Ee_1\subsetneq\dotsb\subsetneq \Ee_r=\Ee
	\end{equation*}
	such that $\Ee_i/\Ee_{i-1}$ is semistable for $i=1,\dotsc,r$ and the sequene of slopes $\mu(\Ee_i/\Ee_{i-1})$ is strictly decreasing.
\end{thm}
\begin{proof}[Sketch of a proof]
	Before we start with the proof, we remark that \cref{lem*:MuOnSES} shows $\mu(\Ee_1)> \mu(\Ee_2)> \dotsc \geq \mu(\Ee)$ for any HN-filtration of $\Ee$ as above.
	
	If $F(\Ee)$ is simple in $\Aa$, i.e., has no non-zero subobjects, then $\Ee$ has no non-zero strict subobjects by our assumption on $F$, hence $\Ee$ is semistable for trivial reasons. Then $\Ee$ is its own HN-filtration. Thus we may assume that $F(\Ee)$ is non-simple, so there exists a short exact sequence $0\morphism \Ee'\morphism \Ee\morphism \Ee''\morphism 0$ with $\rk \Ee',\rk\Ee'' <\rk \Ee$. Using induction, we may assume that $\Ee'$ and $\Ee''$ have HN-filtrations. We claim:
	\begin{alphanumerate}
		\item[\itememph{*}] The slopes of strict subobjects of $\Ee$ are bounded.
	\end{alphanumerate}
	To prove \itememph{*}, we first use the above observation to see that it suffices to bound the slopes of stric semistable subobject, because if $\Ff\subseteq \Ee$ is a strict subobject, then it has an HN-filtration by the induction hypothesis, hence $\Ff_1$ is a strict semistable subobject of $\Ee$ satisfying $\mu(\Ff_1)\geq \mu(\Ff)$.\footnote{By the way, here we use that compositions of strict subobjects are strict subobjects again. We didn't mention this in our \enquote{definition} of exact categories, but it's actually one of the axioms.} So w.l.o.g.\ $\Ff=\Ff_1$. Let $0=\Ee''_0\subsetneq\dotsb\subsetneq \Ee_r''=\Ee''$ be the HN-filtration of $\Ee''$. If $\Ff\morphism \Ee\morphism \Ee''_r/\Ee''_{r-1}$ is non-zero, then $\mu(\Ff)\leq \mu(\Ee''_r/\Ee''_{r-1})$ by \cref{lem:HN}. Otherwise, $\Ff\morphism \Ee''$ factors over $\Ee''_{r-1}$. Repeating this argument shows $\mu(\Ff)\leq \mu(\Ee''_{r-1}/\Ee''_{r-2})$ or $\Ff\morphism \Ee''$ factors over $\Ee''_{r-2}$, and so on. So all in all $\mu(\Ff)$ is bounded by the slopes of the HN-filtration of $\Ee''$ or $\Ff\morphism \Ee''$ is zero. But in that case $\Ff\morphism \Ee$ factors over $\Ee'$. Then the argument can be repeated with $\Ee'$, showing that $\mu(\Ff)$ is bounded by the slopes of the HN-filtration of $\Ee'$, or $\Ff$ itself is zero, which is of course excluded. This proves \itememph{*}.
	
	Take $\Ee_1\subseteq \Ee$ a strict subobject of maximal slope, whose rank is also maximal among all strict subobjects of maximal slope. Such an $\Ee_1$ exists since the strict subobjects of $\Ee$ can have rank at most $\rk \Ee$ by additivity of $\rk$, so the denominators are bounded above. As noted above, $\Ee_1$ is necessarily semistable. Moreover, $\Ee/\Ee_1$ has a HN-filtration $0=\Ff_0\subsetneq \dotsb \subsetneq \Ff_r=\Ee/\Ee_1$ by the induction hypothesis. For all $i\geq 2$ let $\Ee_i$ be the kernel of $\Ee\morphism \Ff_r/\Ff_{i-1}$.\footnote{This kernel exists because compositions of \emph{strict quotients}, i.e., epimorphisms $\Ee\morphism\Ee''$ that are part of a short exact sequence, are strict quotients again. This is another axiom we weren't told.} Then $\Ee_1$ and $\Ee_{i+1}/\Ee_i\cong \Ff_i/\Ff_{i-1}$ for $i\geq 1$ are semistable and the slopes of the latter are strictly decreasing, so all that's left to prove is $\mu(\Ee_1)>\mu(\Ee_2/\Ee_1)$. By \cref{lem*:MuOnSES} it suffices to show $\mu(\Ee_1)>\mu(\Ee_2)$. But $\Ee_2$ has larger rank than $\Ee_1\subsetneq \Ee_2$, hence its slope must be strictly smaller by construction of $\Ee_1$.
	
	It remains to show uniqueness and functoriality. Suppose $0=\Ee_0\subsetneq \dotsb\subsetneq \Ee_r=\Ee$ and $0=\Ee'_0\subsetneq \dotsb\subsetneq \Ee'_s=\Ee$ are different HN-filtrations. Without restriction $\mu(\Ee_1')\geq \mu(\Ee_1)$. By \cref{lem:HN}, the morphism $\Ee_1'\monomorphism \Ee\morphism \Ee_r/\Ee_{r-1}$ must be zero, hence $\Ee_1'\monomorphism \Ee$ factors over $\Ee_{r-1}$. Iterating this argument we obtain that it even factors over $\Ee_1$. Thus $\mu(\Ee_1')\leq \mu(\Ee_1)$ by \cref{lem*:MuOnSES} again. So equality must hold we can apply the same argument to $\Ee_1$, ultimately obtaining that $\Ee_1\monomorphism \Ee$ and $\Ee_1'\monomorphism \Ee$ factor over each other. Then $\Ee_1=\Ee_1'$. Now we can repeat the argument for $\Ee/\Ee_1$. I'm not so sure what \enquote{functoriality} means, but it certainly also follows from \cref{lem:HN}.
\end{proof}

\begin{defi}\label{def:HNPolygon}
	The \defemph{HN-polygon} $\HN(\Ee)$ of an object $\Ee\in \Cc$ is the unique polygon in $\IR^2$ with origin $(0,0)$ and slopes $\mu(\Ee_i/\Ee_{i-1})$ with multiplicity $\rk(\Ee_i/\Ee_{i-1})$. In particular, $\Ee$ is semistable iff the HN-polygon is a straight line.
\end{defi}
The following theorem wasn't mentioned in the lecture. I thought it would fix a later argument that went quite wrong. Turns out it doesn't, but by that time I had already typed the proof.
\begin{thm*}\label{thm*:HNPolygon}
	If $\Ff\subseteq \Ee$ is a strict subobject, then the HN-polygon $\HN(\Ff)$ lies below $\HN(\Ee)$. In particular, $\HN(\Ee)$ is the upper concave hull of the points $(\rk(\Ff),\deg(\Ff))\in \IR^2$, where $\Ff$ ranges over all strict subobjects of $\Ff$.
\end{thm*}
\begin{proof*}
	By additivity of $\deg$ and $\rk$ we see that the break points of $\HN(\Ee)$ are precisely the points $(\rk(\Ee_i),\deg(\Ee_i))$ for $i=0,\dotsc,r$. We prove the theorem by induction on the length $s$ of the HN-filtration $0=\Ff_0\subsetneq \dotsb\subsetneq \Ff_s=\Ff$. The case $s=0$ is trivial. Now assume $s\geq 1$ and let $i$ be the minimal index such that $\Ff_{s-1}\morphism \Ee$ factors over $\Ee_i$. Let $j> i$ be minimal such that $\Ff_s\morphism \Ee$ factors over $\Ee_j$. Then $\Ff_s\morphism \Ee_j/\Ee_{j-1}$ is non-zero, and since the image of $\Ff_{s-1}$ is contained in $\Ee_i\subseteq \Ee_{j-1}$, we get a non-zero morphism $\Ff_s/\Ff_{s-1}\morphism \Ee_j/\Ee_{j-1}$. Hence $\mu(\Ff_s/\Ff_{s-1})\leq \mu(\Ee_k/\Ee_{k-1})$ for all $k\leq j$ by \cref{lem:HN} and the fact that the sequence of $\mu(\Ee_k/\Ee_{k-1})$ is strictly decreasing.
	
	Now $\HN(\Ff)$ is obtained by attaching a line of slope $\mu(\Ff_s/\Ff_{s-1})$ to $\HN(\Ff_{s-1})$. Moreover, its endpoint $(\rk(\Ff),\deg(\Ff))$ has $x$-coordinate $\rk(\Ff)\leq \rk(\Ee_j)$. So $\HN(\Ff_{s-1})$ lies below $\HN(\Ee_i)$, and the single segment that is attached to it has smaller slope than all segments of $\HN(\Ee_j)$. Thus $\HN(\Ff)$ lies below $\HN(\Ee_j)$ and therefore also below $\HN(\Ee)$.
	
	In particular, we see that $(\rk(\Ff),\deg(\Ff))$ lies below $\HN(\Ee)$. But the break points of $\HN(\Ee)$ are of this form too as seen above, and $\HN(\Ee)$ is concave by construction, thus it is indeed the upper concave hull of all points of the given form. This finishes the proof.
\end{proof*}
\begin{prop}\label{prop:Clambdasst}
	Let $\lambda\in \IQ$. Then the full subcategory
	\begin{equation*}
		\Cc_\lambda^\sst=\left\{\Ee\in \Cc\st \Ee \text{ semistable, }\mu(\Ee)\in \{\lambda,\infty\}\right\}
	\end{equation*}
	is abelian and every object in it is  of finite length.
\end{prop}
\begin{proof*}
	From \cref{lem*:MuOnSES} we get that direct sums (and moreover, arbitrary extensions) of objects in $\Cc_\lambda^\sst$ are in $\Cc_\lambda^\sst$ again. Next we construct kernels and cokernels of morphisms $\Ee\morphism \Ee'$. This is trivial if $\Ee=0$ or $\Ee'=0$, so we may assume $\mu(\Ee)=\lambda=\mu(\Ee')$. Let $\Kk$ and $\Kk'$ be as in the proof of \cref{lem:HN}. As was observed there, we have $\mu(\Kk)\leq \lambda$ and $\mu(\Ee/\Kk)\leq \mu(\Kk')\leq \lambda$ (except in the special cases where one of them is zero, but these are easily handled). But then by \cref{lem*:MuOnSES} equality must hold everywhere. In particular, since $\rk(\Ee/\Kk)=\rk(\Kk')$ we must also have $\deg(\Ee/\Kk)=\deg(\Kk')$, hence $\Ee/\Kk\isomorphism \Kk'$ is an isomorphism by assumption~\itememph{2}.
	
	Therefore $\Kk$ and $\Ee/\Kk\cong \Kk'$ are strict subobjects of $\Ee$ and $\Ee'$ of the same slope, hence they are semistable too. So $\Kk,\Kk'\in \Cc_\lambda^\sst$. Another application of \cref{lem*:MuOnSES} shows that $\mu(\Ee'/\Kk')$ must be $\lambda$ or $\Ee'/\Kk'=0$. In the latter case $\Ee'/\Kk'$ is an element of $\Cc_\lambda^\sst$ for trivial reasons. So assume the former is the case and let $\Ff\subseteq \Ee'/\Kk'$ be a strict subobject. Let $\Ff'\subseteq \Ee'$ be the kernel of $\Ee\morphism (\Ee'/\Kk')/\Ff$ (this exists by the argument from the proof of \cref{thm:HN}). Then $\mu(\Ff')\leq \lambda$. But now the short exact sequence\footnote{Here we are veiling a not so trivial detail (and we already did this in the proof of \cref{thm:HN}): that $\Kk'$ is indeed a strict subobject of $\Ff'$. This follows formally from the axioms (that were never given), but that's a bit fiddly.} $0\morphism \Kk'\morphism \Ff'\morphism \Ff\morphism 0$ together with $\mu(\Kk')=\lambda\geq \mu(\Ff')$ implies that $\mu(\Ff)\leq \mu(\Ff')\leq \lambda=\mu(\Ee'/\Kk')$ by \cref{lem*:MuOnSES}. This finally shows that $\Ee'/\Kk'$ is semistable.
	
	Thus, $\Ee\morphism \Ee'$ has a kernel and a cokernel in $\Cc_\lambda^\sst$, and moreover the morphism from its coimage $\Ee/\Kk$ to its image $\Kk'$ is an isomorphism. We conclude that $\Cc_\lambda^\sst$ is abelian. It remains to show that any $\Ee\in \Cc_\lambda^\sst$ has finite length. In fact, we will show that $\Ee$ has length $\rk(\Ee)$. So suppose $\Ee_1\subsetneq \dotsb\subsetneq \Ee_r\subsetneq \Ee$ is a chain of subobjects of length $r>\rk(\Ee)$. By the pidgeonhole principle there must be an $i$ with $\rk(\Ee_i)=\rk(\Ee_{i+1})$. Then $F(\Ee_i)\isomorphism F(\Ee_{i+1})$ must be an isomorphism by assumption~\itememph{1}. Then from assumption~\itememph{2} we get $\deg(\Ee_i)=\deg(\Ee_{i+1})$. Since $\Ee_i$ and $\Ee_{i+1}$ have the same rank, hence the same slope (either $\lambda$ or $\infty$), we get equality and $\Ee_i\subseteq \Ee_{i+1}$ must be an isomorphism, contradicting $\Ee_i\subsetneq \Ee_{i+1}$.
\end{proof*}
\begin{exm}
	Suppose $\Cc$ is the category of vector bundles on $\IP_k^1$. By the Grothen-dieck--Birkhoff theorem, every vector bundle $\Ee$ can be written uniquely as
	\begin{equation*}
		\Ee\cong \bigoplus_{i=1}^r\Oo(d_i)^{\oplus n_i}\,,
	\end{equation*}
	where $d_1>d_2>\dotsb >d_j$ and all $n_i>0$. Then the $j\ordinalth$ piece $\Ee_j$ of the HN-filtration of $\Ee$ is given by $\bigoplus_{i=1}^j\Oo(d_i)^{\oplus n_i}$. Moreover, for $\lambda\in \IZ$ the category $\Cc_\lambda^\sst$ is the full subcategory of vector bundles isomorphic to a finite direct sum of copies of $\Oo(\lambda)$. In particular, $\Cc_\lambda^\sst$ is equivalent to $\cat{Vect}_k$.
\end{exm}
\subsection{\texorpdfstring{$\phi$}{Phi}-Modules and the Vector Bundles \texorpdfstring{$\Oo_{X_\FFC}(\lambda)$}{OX(lambda)}}
\begin{defi}
	Let $\breve{E}=W_{\Oo_E}(\ov{\IF}_q)\localize{\pi}$, where $\ov{\IF}_q$ is the algebraic closure of $\IF_q$ inside $F$. Note that $\breve{E}$, being a localization of a ring of Witt vectors, comes equipped with a natural Frobenius action $\phi$.
\end{defi}
\begin{rem}
	We observe that $\breve{E}$ is a field. In fact, it is the completion of the maximal unramified extension of $E$ (this follows more or less from \cref{prop:FqAlgebrasEquivalence}). Moreover, since $\ov{\IF}_q\subseteq F$, $\breve{E}$ is naturally a subring of $B$.
\end{rem}
\begin{defi}\label{def:phiModule}
	Let $A$ be a ring with an endomorphism $\phi\colon A\morphism A$. A \defemph{$\phi$-module} over $A$ is a pair $(M,\phi_M)$, where $M$ is a finite projective $A$-module and $\phi_M\colon M\isomorphism M$ is $\phi$-semilinear isomorphism. The category of $\phi$-modules is denoted $\phi\cat{\mhyph Mod}_A$.
\end{defi}
\numpar{}\label{par:phiModules}In \cref{def:phiModule}, recall that a $\phi$-semilinear isomorphism is an isomorphism of underlying abelian groups that satisfies $\phi_M(am)=\phi(a)\phi_M(m)$ for all $a\in A$, $m\in M$. If $M$ is even a free $A$-module and $e_1,\dotsc,e_n\in M$ a basis, one can write
\begin{equation*}
	\phi_M(e_i\otimes 1)=\sum_{j=1}^na_{i,j}e_j\,,
\end{equation*}
and we obtain a matrix $a=(a_{i,j})\in \GL_n(A)$. Changing $e_1,\dotsc,e_n$ according to an invertible matrix $g\in \GL_n(A)$ transforms $a$ into $ga\phi(g)^{-1}$ (this operation is called \enquote{$\phi$-conjugation}). Thus, we get a bijection
\begin{equation*}
	\left\{\text{iso.\ classes of free rank $n$ $\phi$-modules}\right\}\isomorphism\GL_n(A)/\phi\text{-conj.}\,.
\end{equation*}
From now on, we consider the category $\Cc=\phi\cat{\mhyph Mod}_{\breve{E}}$, where $\phi$ is the ordinary Frobenius (at least if $E/\IQ_p$ is unramified, this is also known as the category of \defemph{isocrystals}). Since $\breve{E}$ is a field, all $\phi$-modules over $\breve{E}$ are free. Hence the above bijection provides a map
\begin{equation*}
	\deg\colon \left\{\text{iso.\ classes of rank-$1$ $\phi$-modules}\right\}\cong \breve{E}^\times/\phi\text{-conj.}\isomorphism\IZ\,;
\end{equation*}
the isomorphism on the right-hand side is induced by the valuation on $\breve{E}$ and it is an isomorphism because for $a,b\in \breve{E}$, trying to find a $g\in \Oo_{\smash{\breve{E}}\vphantom{E}}^\times$ with $b=ga\phi(g)^{-1}$ leads to a list of polynomial equations in the Teichmüller coefficients of $g$, which always have solutions in the algebraically closed field $\ov{\IF}_q$ as long as $a$ and $b$ have the same valuation. For arbitrary $M\in \Cc$
\begin{equation*}
	\rk M=\dim_{\breve{E}}M\quad \text{and}\quad\deg M=\deg\Bigg(\bigwedge^{\rk M}M\Bigg)
\end{equation*}
Also let $F$ be simply the identity functor on $\Cc$. Then one checks that all conditions from \cref{subsec:HNFormalism} are satisfied, so the HN-formalism is available for $(\Cc,\rk,\deg,\id_{\Cc})$! Moreover, since $\phi\cat{\mhyph Mod}_{\breve{E}}$ is already abelian $F$ is the identity functor, it's easily checked that $(\Cc,\rk,-\deg,\id_{\Cc})$ satisfies the conditions too. Therefore we actually have two HN-structures on $\Cc$! This has interesting consequences. 
\begin{numerate}
	\item Every HN-filtration $0=\Ee_0\subsetneq \dotsb \subsetneq \Ee_r=\Ee$ in $\Cc$ is canonically split, so that there is a canonical isomorphism $\Ee\cong \bigoplus_{i=1}^r\Ee_i/\Ee_{i-1}$. In fact, the splitting is induced by the second filtration $0=\Ee'_0\subsetneq \dotsb \subsetneq \Ee'_r=\Ee$ associated to the second HN-structure. That is, for all $j=1,\dotsc,r$ we have $\Ee_j'=\bigoplus_{i=r-j+1}^r\Ee_i/\Ee_{i-1}$.
	\item If $\Ee$ and $\Ee'$ are semistable of different slopes, then $\Hom_{\Cc}(\Ee,\Ee')=0$. 
\end{numerate}
\begin{warn*}
	Neither \itememph{1} nor \itememph{2} are as easy as the lecture made them sound. For example, \itememph{2} seemingly follows immediately from \cref{lem:HN}, but the major obstacle here is to show that the \emph{semistable objects are the same in both HN-structures}!
	
	What saves our *sses here (and only here, we really need that we are in the particular case where $\Cc=\phi\cat{\mhyph Mod}_{\breve{E}}$!) is the \emph{Dieudonné--Manin decomposition} (see \cref{thm:DieudonneManin} below). It can be checked by hand that this decompositions induces two split filtrations which have the property from \cref{thm:HN} for the respective HN-structures. So all in all, \itememph{1} and \itememph{2} are a consequence of the Dieudonné--Manin decomposition, not the other way around.
\end{warn*}
Let $\lambda=d/r\in \IQ$, where $d$ and $r$ are coprime integers and $r>0$. Let $D(\lambda)$ be the $\phi$-module over $\breve{E}$ whose underlying module is $\breve{E}^{\oplus r}$ and with associated matrix
\begin{equation*}
	\phi_{D(\lambda)}=\begin{pmatrix}
		0 & \cdots & 0 & \pi^d\\
		1 &  & & 0\\
		\vdots & \ddots & & \vdots\\
		0 & \cdots & 1 & 0 \\
	\end{pmatrix}
\end{equation*}

\begin{thm}[Dieudonné--Manin classification]\label{thm:DieudonneManin}
	The category $\Cc=\phi\cat{\mhyph Mod}_{\breve{E}}$ is semisimple and its simple objects are precisely those which are isomorphic to $D(\lambda)$ for $\lambda\in \IQ$ (in particular, every $\phi$-module $M$ has a unique decomposition $M=\bigoplus_{i=1}^rD(\lambda_i)^{\oplus n_i}$). Moreover, the division algebra $\End_\Cc(D(\lambda))$ over $E$ is central (i.e.\  its center is $E$) of invariant $\pm[\lambda]\in \operatorname{Br}E\cong \IQ/\IZ$.
\end{thm}
\begin{proof}[Sketch of a proof]
	Some technical arguments including the HN-formalism, passage to unramified coverings of $E$ (thus replacing $\phi$ by $\phi^h$) and twisting reduces the theorem to its essential part:
	\begin{alphanumerate}
		\item[\itememph{*}] Every semistable $\phi$-module $D$ over $\breve{E}$ of slope $0$ is a direct sum of copies of $D(0)=(\breve{E},\phi)$.
	\end{alphanumerate}
	By inspection, $\Ext_\Cc^1(D(0),D(0))\cong \breve{E}/(\phi-\id)\breve{E}$. But $\Oo_{\breve{E}}/\pi \Oo_{\breve{E}}=\ov{\IF}_q$ is algebraically closed. Hence $\smash{\Oo_{\breve{E}}/(\phi-\id)\Oo_{\breve{E}}}$ vanishes after reduction modulo $\pi$, hence by Nakayama it must vanish all along. Inverting $\pi$, we thus see that $\Ext_\Cc^1(D(0),D(0))=0$, so any self extension of $D(0)$ is split.
	
	Therefore, given an arbitrary $D$ as in \itememph{*}, it suffices to construct a non-zero morphism $D(0)\morphism D$. Indeed, such a morphism is necessarily a monomorphism because $D(0)$ is simple, and using induction on the rank we may assume that its cokernel $D/D(0)$ is already a direct sum of copies of $D(0)$. Then the above extension argument shows that $D$ itself must be such a direct sum. To construct a non-zero morphism $D(0)\morphism D$, write $\phi_D=a$ for some $a\in \GL_n(\breve{E})$. After performing row operations we may assume $a$ is triangular (doing some row operations forces us to do the corresponding \enquote{$\phi$-inverse} column operations to keep the $\phi$-conjugacy property alive; however, these column operations won't stop us from making $a$ upper triangular). Moreover $a_{1,1}\in \Oo_{\smash{\breve{E}}\vphantom{E}}^\times$ because $D$ is semistable of slope $0$, so $\det(\phi_D)$ should have valuation $0$. As $\ov{\IF}_q$ is algebraically closed, we may write $a_{1,1}=\phi(x)/x$ for some $x\in\Oo_{\smash{\breve{E}}\vphantom{E}}^\times$ (as usual, $x$ has to be constructed Teichmüller coefficient-wise). Then we get $D(0)\cong (\breve{E},a_{1,1}\phi)\monomorphism D$, as desired. 
\end{proof}
\begin{defi}\label{def:MysteriousFunctor}
	Recall that $\breve{E}\subseteq B$ canonically. Let $X_\FFC$ denote the Fargues--Fontaine curve as usual. We construct a functor
	\begin{align*}
		\Ee_E(-)=\Ee(-)\colon \phi\cat{\mhyph Mod}_{\breve{E}}&\morphism \cat{QCoh}_{X_\FFC}\\
		(D,\phi_D)&\longmapsto \Bigg(\bigoplus_{d\geq 0}(B\otimes_{\breve{E}}D)^{\phi\otimes \phi_D=\pi^d}\Bigg)^\qcmod\,,
	\end{align*}
	where $(-)^\qcmod$ denotes the graded twiddleization.
\end{defi}
\numpar{Example/Warning}\label{exmwarn:SignSwap}
If $n\in \IZ$, then $D(n)=(\breve{E},\pi^n\phi)$ is sent to the twisting sheaf $\Ee_E(D(n))=\Oo_{X_\FFC}(-n)$. Indeed, its graded components are given by
\begin{equation*}
	(B\otimes_{\breve{E}}\breve{E})^{\phi\otimes \pi^n\phi=\pi^d}=B^{\phi=\pi^{d-n}}\,,
\end{equation*}
hence $\Ee_E(D(n))$ is the quasi-coherent module associated to the shift $P[-n]$, whence we catch a sign swap.
\begin{lem}\label{lem:Xh}
	For $h\geq 1$ let $E_h/E$ be the unique unramified extension of degree $h$ and $X_{\FFC,h}=\Proj\big(\bigoplus_{d\geq 0}B^{\phi^h=\pi^d}\big)$ the corresponding Fargues--Fontaine curve. Let $(D,\phi_D)$ be a $\phi$-module over $\breve{E}$.
	\begin{numerate}
		\item For all $d\geq 0$ we have $E_h\otimes_E(B\otimes_{\breve{E}}D)^{\phi\otimes\phi_D=\pi^d}\cong (B\otimes_{\breve{E}}D)^{\phi^h\otimes \phi_D^h=\pi^{hd}}$.
		\item $X_{\FFC,h}$ is isomorphic to the base change $X_\FFC\otimes_EE_h$ (this works in the ramified case too).
		\item The following diagram commutes:
		\begin{equation*}
			\begin{tikzcd}
			(D,\phi_D)\dar[|->] &[-2.4em] \phi\cat{\mhyph Mod}_{\breve{E}}\dar\rar["\Ee_E(-)"] &[1em] \cat{QCoh}_{X_\FFC}\dar["-\otimes_EE_h"] \\
			(D,\phi_D^h) &[-2.4em] \phi^h\cat{\mhyph Mod}_{\breve{E}} \rar["\Ee_{E_h}(-)"] &[1em] \cat{QCoh}_{X_{\FFC,h}}
			\end{tikzcd}\,.
		\end{equation*}
	\end{numerate}
\end{lem}
\begin{rem}
	\cref{lem:Xh} shows that $\Ee_E(-)$ takes values in vector bundles. Indeed, by \cref{thm:DieudonneManin}, every $M\in\phi\cat{\mhyph Mod}_{\breve{E}}$ is a direct sum of $D(\lambda)$'s, so it suffices to check that every $\Ee_E(D(\lambda))$ is a vector bundle. This can be verified étale-locally. Writing $\lambda=d/r$, we see that $X_{\FFC,r}\morphism X_\FFC$ is an étale covering and by \cref{lem:Xh}\itememph{3}, $\Ee_E(D(\lambda))\otimes_EE_h$ corresponds to
	\begin{equation*}
		\big(D(\lambda),\phi_{D(\lambda)}^r\big)\cong \bigoplus_{i=1}^r(\breve{E},\pi^d\phi)\,,
	\end{equation*}
	which is sent to the vector bundle $\Oo_{X_{\FFC,h}}(-d)^{\oplus r}$ under $\Ee_{E_h}(-)$ by Example/Warning~\cref{exmwarn:SignSwap}. Henceforth we will write $\Oo_{X_\FFC}(\lambda)\coloneqq \Ee_E(D(-\lambda))$. We have just seen that this is a vector bundle of rank $r$.
\end{rem}
\begin{proof}[Proof of \cref{lem:Xh}]
	For \itememph{1}, note that $\IZ/h\IZ\cong \Gal(E_h/E)$ acts $E_h$-semilinearly on $M=(B\otimes_{\breve{E}}D)^{\phi^h\otimes\phi_D^h=\pi^{hd}}$ via $\pi^{-d}\phi\otimes\phi_D$. Moreover, the invariants of this action are $M^{\Gal(E_h/E)}=(B\otimes_{\breve{E}}D)^{\phi\otimes\phi_D=\pi^d}$. Then the claim follows from Hilbert~90 (in the form of Galois descent; see e.g.\ \cite[I~(5.2)]{sga4.5}).
	
	Parts~\itememph{2} and~\itememph{3} are easy consequences of \itememph{1}; for \itememph{2} we use that $\Proj\big(\bigoplus_{d\geq 0}B^{\phi^h=\pi^d}\big)$ coincides with $\Proj \big(\bigoplus_{d\geq 0}B^{\phi^h=\pi^{hd}}\big)$ because that's just how the $\Proj$ construction works.
\end{proof}
A slightly different perspective on the vector bundles $\Oo_{X_\FFC}(\lambda)$ is given by the following lemma.
\begin{lem}\label{lem:OXlambda}
	Let $\lambda=d/r\in \IQ$ and let $f_r\colon X_{\FFC,r}=X_\FFC\otimes_EE_r\morphism X_\FFC$. Then there is a canonical isomorphism
	\begin{equation*}
		\Oo_{X_\FFC}(\lambda)\isomorphism f_{r,*}\Oo_{X_{\FFC,r}}(d)
	\end{equation*}
	In particular, $\Oo_{X_\FFC}(\lambda)$ is a semistable vector bundle of rank $r$ and slope $\lambda$, and a simple object in $\cat{Bun}_{X_\FFC,\lambda}^\sst$.
\end{lem}
\begin{proof*}
	The isomorphism follows easily by pulling back to $X_{\FFC,r}$ and comparing descent datas; details are left as an exercise. To prove the additional assertions, we claim:
	\begin{alphanumerate}
		\item[\itememph{*}] The functors $f_{r,*}$ and $f_r^*$ preserve semistable objects.
	\end{alphanumerate}
	We first observe that $f_r^*$ preserves $\rk$ and scales $\deg$ by $r$, because it is straightforward to check that $\Oo_{X_\FFC}(n)\otimes_EE_r\cong \Oo_{X_{\FFC,r}}(rn)$. Conversely, $f_{r,*}$ scales $\rk$ by $r$ (this is straightforward) and preserves $\deg$ (this follows from the fact that both $f_r^*$ and $f_r^*f_{r,*}\cong (-)^{\oplus r}$ scale $\deg$ by $r$). Now suppose $\Ee'\in \cat{Bun}_{X_{\FFC,r}}$ is semistable and $\Ee\subseteq f_{r,*}\Ee'$ is a strict subobject. Then $f^*\Ee\subseteq f_r^*f_{r,*}\Ee'\cong \Ee'^{\oplus r}$ is a strict subobject and $\Ee'^{\oplus r}$ is semistable, hence
	\begin{equation*}
		r\deg(\Ee)=\deg(f^*\Ee)\leq \deg(\Ee'^{\oplus r})=r\deg(\Ee')\,,
	\end{equation*}
	proving that $f_{r,*}\Ee'$ is semistable as well. In the same way we prove that $f_r^*$ preserves semistable objects. This proves \itememph{*}.
	
	In particular, $\Oo_{X_\FFC}(\lambda)$ is semistable of rank $r$ and slope $d/r=\lambda$. It remains to show that it is simple in $\cat{Bun}_{X_\FFC,\lambda}^\sst$. If $0\neq \Ee\subseteq \Oo_{X_\FFC}(\lambda)$, then $\rk(\Ee)\leq r$. But if $\Ee$ has slope $\lambda$, then equality must hold as $d$ and $r$ are coprime. Since $\cat{Bun}_{X_\FFC,\lambda}^\sst$ is abelian by \cref{prop:Clambdasst}, we see that $\Oo_{X_\FFC}(\lambda)/\Ee$ is a vector bundle again and of rank $0$, hence $\Ee=\Oo_{X_\FFC}(\lambda)$.
\end{proof*}
We are now ready to state our second main theorem: the classification of vector bundles on the Fargues--Fontaine curve. Its proof will occupy most of the remaining lectures.
\begin{mainthm}[Fargues--Fontaine]\label{mainthm:vectorBundles}
	The functor $\Ee(-)$ from \cref{def:MysteriousFunctor} induces a bijection
	\begin{equation*}
		\Ee(-)\colon \left\{\text{iso.\ classes in }\phi\cat{\mhyph Mod}_{\breve{E}}\right\}\isomorphism\left\{\text{iso.\ classes in }\cat{Bun}_{X_\FFC}\right\}\,.
	\end{equation*}
	In particular, every vector bundle $\Ee$ on the Fargues--Fontaine curve $X_\FFC$ has a unique decomposition $\Ee\cong \bigoplus_{i=1}^r\Oo_{X_\FFC}(\lambda_i)^{\oplus n_i}$ with $\lambda_1>\dotsb >\lambda_r$ and all $n_i>0$.
\end{mainthm}
\begin{warn}
	Don't be fooled: $\Ee_E(-)$ will \defemph{not} be an equivalence of categories. Upon closer inspection this can't possibly be true, for $\phi\cat{\mhyph Mod}_{\breve{E}}$ is an abelian category, but $\cat{Bun}_{X_\FFC}$ is not.
\end{warn}
\section{Vector Bundles on the Fargues--Fontaine Curve and \texorpdfstring{$p$}{p}-divisible Groups}
\lecture[$p$-divisible groups and Tate modules. Dieudonné modules. $p$-divisible groups and $p$-adic Hodge theory. The vector bundles $\Ee(G)$ and minuscule modifications.]{2020-01-15}
Today we start working towards \cref{mainthm:vectorBundles}. Along the way will see some nice applications of the Fargues--Fontaine curve to $p$-divisible groups and $p$-adic Hodge theory.
\subsection{A Crash Course on \texorpdfstring{$p$}{p}-divisible Groups}
Let $\cat{FL}/S$ denote the category of finite locally free\footnote{In the lecture we merely talked about \emph{finite flat} group schemes. I believe that whenever people say \enquote{finite flat} in the context of group schemes they actually mean a \enquote{finite locally free}, and this either follows from some additional assumptions such as being proper or having  constant rank (as in \cref{def:pDivGroup}), or these people don't realize that \enquote{finite flat} doesn't imply \enquote{locally free} in non-noetherian situations.} commutative group schemes over a scheme $S$. Via the Yoneda embedding $G\mapsto \Hom_{\cat{Sch}/S}(-,G)$ it becomes a full subcategory of the category $\cat{Ab}((\cat{Sch}/S)_\fppf)$ of sheaves on the big fppf site over $R$. We call a sequence in $\cat{FL}/S$ \defemph{exact} if the corresponding sequence of sheaves is exact. It can be shown that $\cat{FL}/S$, as a full subcategory of $\cat{Ab}((\cat{Sch}/S)_\fppf)$, is stable under extensions, hence an \emph{exact category} in the sense of Quillen. The \emph{strict monomorphisms}, i.e., those that are part of a short exact sequence, are precisely the closed immersions, and the \emph{strict epimorphisms} are precisely the faithfully flat morphisms.

Keeping this in mind, we can now turn to today's central definition.
\begin{defi}\label{def:pDivGroup}
	A \defemph{$p$-divisible group of height $h$} is a collection $G=(G_n,i_n)_{n\in \IN}$ of finite locally free commutative group schemes $G_n$ of rank $p^{nh}$ over $S$, together with closed immersions $i_n\colon G_n\monomorphism G_{n+1}$ for all $n\in \IN$ such that the following sequence is exact:
	\begin{equation*}
		0\morphism G_n\morphism[i_n]G_{n+1}\morphism[p^n]G_{n+1}\,.
	\end{equation*}
	A \defemph{morphism of $p$-divisible groups} $\phi\colon (G_n,i_n)_{n\in \IN}\morphism (G'_n,i'_n)_{n\in \IN}$ is a sequence of group scheme homomorphisms $\phi_n\colon G_n\morphism G_n'$ which are compatible with the respective structure morphisms $i_n$ and $i_n'$ in the sense that the diagram
	\begin{equation*}
		\begin{tikzcd}
			G_{n+1}\rar["\phi_{n+1}"] & G'_{n+1}\\
			G_n\uar[mono, "i_n"]\rar["\phi_n"] & G'_n\uar[mono, "i'_n"']
		\end{tikzcd}
	\end{equation*}
	commutes for all $n\in \IN$.
\end{defi}
\begin{rem}\label{rem:pDivExactSeq}
	We also write $G_n=G[p^n]$ and think of this as the \enquote{$p^n$-torsion of $G$}. It follows from the axioms that for any $n,m$ there exists a short exact sequence
	\begin{equation*}
		0\morphism G_n\xrightarrow{i_{n,m}}G_{n+m}\xrightarrow {j_{n,m}}G_m\morphism 0\,.
	\end{equation*}
	Here $i_{n,m}=i_{n+m-1}\circ i_{n+m-2}\circ\dotsb\circ i_n$ denotes the closed immersion $G_n\monomorphism G_{n+m}$ obtained from the given data. Moreover, $j_{n,m}$ is defined as the dashed arrow in the diagram
	\begin{equation*}
		\begin{tikzcd}
			G_{n+m}\drar["p^n"']\rar["\exists!\ j_{n,m}", dashed] &[1em] G_m\dar[mono]\\
			 &[1em] G_{n+m}
		\end{tikzcd}
	\end{equation*}
	Since the existence of $j_{n,m}$ and the above short exact sequence are not completely obvious, I decided to give it a proof (which was not in the lecture).
\end{rem}
\begin{proof*}
	To show that $p^n\colon G_{n+m}\morphism G_{n+m}$ factors over $G_m$, i.e., the $p^m$-torsion part, it suffices to show that $p^m\circ p^n=p^{n+m}$ is the zero morphism on $G_{n+m}$. But that's clear by definition of $G_{n+m}$ as the $p^{n+m}$-torsion part of $G_{n+m+1}$.
	
	Exactness on the left is now clear by definition of $j_{n,m}$, as $G_n$ is the $p^n$-torsion part of $G_{n+m}$. Moreover, since $i_{n,m}$ is a closed immersion, it has a cokernel $Q$ in $\cat{FL}/S$ as remarked above. We need to show $Q=G_m$. By fundamental results about group schemes, the morphism $G_{m+n}\morphism Q$ is finite locally free of rank $\rk (G_n)=p^{nh}$, hence the rank of $Q$ must be $p^{mh}=\rk (G_m)$. Moreover, $Q$ is the image of $p^{n+m}\colon G_{n+m}\morphism G_{n+m}$ (considered as a morphism of fppf sheaves), hence $Q\morphism G_{n+m}$ factors over $G_m$.
	
	Now $Q\morphism G_m$ is a monomorphism of sheaves, hence a monomorphism of schemes. But it is also proper as both $Q$ and $G_m$ are finite over $S$! As proper monomorphism are closed immersions and $Q$ and $G_m$ have the same rank over $S$, this shows that $Q\morphism G_m$ must be an isomorphism, as claimed.
\end{proof*}
\begin{exm}
	The following are $p$-divisible groups over $S$.
	\begin{numerate}
		\item Let $G_n=(p^{-n}\IZ/\IZ)\times S$ be the constant group scheme with $i_n$ the natural inclusions. This defines a $p$-divisible group called $\IQ_p/\IZ_p$, of height $1$.
		\item Let $S=\Spec R$ and $G_n=\mu_{p^n}=\Spec R[x]/(x^{p^n}-1)$ be the group scheme of $(p^n)\ordinalth$ roots of unity. This defines a $p$-divisible group scheme of height $1$, called $\mu_{p^\infty}$.
		\item Let $A$ be an abelian scheme of dimension $d$ over $S$. Then the $p^n$-torsion $G_n=A[p^n]$ defines a $p$-divisible group $A[p^\infty]$ of height $2d$. Indeed, by a classical result on abelian schemes, the multiplication-by-$N$ morphism $N\colon A\morphism A$ is finite locally free of rank $N^{2d}$ for all $N\neq 0$. Its kernel is the $N$-torsion part $A[N]$ and fits into a pullback diagram
		\begin{equation*}
			\begin{tikzcd}
				A[N]\rar\dar\drar[pullback] & S\dar["1_A"]\\
				A\rar["N"]& A
			\end{tikzcd}\,.
		\end{equation*}
		Taking $N=p^n$, we deduce that $A[p^n]$ is finite locally free of rank $p^{2dn}$, which fits perfectly with \cref{def:pDivGroup}.
	\end{numerate}
\end{exm}
\begin{defi}\label{def:CartierDual}
	For any $p$-divisible group $G$, we obtain a \defemph{dual $p$-divisible group $G^\vee$} as follows: put 
	\begin{equation*}
		(G^\vee)_n\coloneqq (G_n)^\vee=\underline{\Hom}(G_n,\IG_{m,S})\,,
	\end{equation*}
	and for all $n$ the structural morphism $i_n^\vee\colon (G^\vee)_n\monomorphism (G^\vee)_{n+1}$ is induced by $j_{1,n}\colon G_{n+1}\morphism G_n$ from \cref{rem:pDivExactSeq}.
\end{defi}
\begin{rem}\label{rem:CartierDual}
	Perhaps \cref{def:CartierDual} needs some clarifications.
	\begin{numerate}
		\item The scheme $\IG_{m,S}$ is a representing object of the sheaf $T\mapsto \Global(T,\Oo_T^\times)$ on $(\cat{Sch}/S)_\fppf$ (see \cite[\stackstag{022U}]{stacks-project}). It can be shown that for arbitrary $F\in \cat{FL}/S$ the sheaf $\underline{\Hom}(F,\IG_{m,S})$, which denotes the internal $\Hom$ in $\cat{Ab}((\cat{Sch}/S)_\fppf)$, but can also be explicitly described as $T\mapsto \Hom_{\cat{GSch}/T}(F\times_ST,\IG_{m,T})$, is representable by a finite locally free commutative group scheme $F^\vee$, called the \defemph{Cartier dual} of $F$.
		\item The natural evaluation isomorphisms $G_n\isomorphism G_n^{\vee\vee}$ are compatible and define an isomorphism of $p$-divisible groups
		\begin{equation*}
		G\isomorphism G^{\vee\vee}\,.
		\end{equation*}
		Thus, the functor $(-)^\vee\colon G\mapsto G^\vee$ is a (contravariant) auto-equivalence on the category of $p$-divisible groups.
	\end{numerate}
	
\end{rem}
\begin{exm}
	The following pairs of $p$-divisible groups are dual to each other:
	\begin{numerate}
		\item $\IQ_p/\IZ_p$ and $\mu_{p^\infty}$.
		\item $A[p^\infty]$ and $A^\vee[p^\infty]$ for $A$ an abelian scheme over $S$.
	\end{numerate}
\end{exm}
From now on, we restrict our attention to $p$-divisible groups over the base $S=\Spec \Oo_C$, where $C$ is a complete algebraically closed extension of $\IQ_p$ and $\Oo_C$ its ring of integers.
\begin{defi}
	For a $p$-divisible group $G$ over $\Oo_C$, we define its \defemph{Tate module} as
	\begin{equation*}
		T_pG\coloneqq \limit\Big(\dotso\morphism[p]G[p^2](C)\morphism[p]G[p](C)\morphism 1\Big)\,.
	\end{equation*}
\end{defi}
\begin{lem}\label{lem:TpGFree}
	If $G$ is a $p$-divisible group of height $h$ over $\Oo_C$, then $T_pG$ is a free $\IZ_p$-module of rank $h$.
\end{lem}
\begin{proof*}
	We prove by induction on $n$ that the map $p\colon G[p^{n+1}]\morphism G[p^n]$ can be (non-canonically) identified with $(\IZ/p^{n+1}\IZ)^{\oplus h}\morphism (\IZ/p^n\IZ)^{\oplus h}$. This will prove the lemma.
	
	We start with $n=0$. Note that $G[p](C)$, as a set, is in bijection with sections of the base change $G[p]\otimes_{\Oo_C}C\morphism \Spec C$. Since $G[p]\otimes_{\Oo_C}C$ is a flat affine group scheme of finite type over a field of characteristic $0$, it is automatically smooth, hence étale because it is finite. Since $C$ is algebraically closed, it follows that $G\otimes_{\Oo_C}C$ is a disjoint union of $p^h=\rk(G[p])$ copies of $\Spec C$. This shows that $G[p](C)$ has $p^h$ elements, hence it is isomorphic to $(\IZ/p\IZ)^{\oplus h}$ because it must be an $\IF_p$-vector space.
	
	Now assume we know $G[p^n]=(\IZ/p^n\IZ)^{\oplus h}$. By the same argument as above we see that $G[p^{n+1}](C)$ must be a $p^{n+1}$-torsion abelian group of cardinality $p^{(n+1)h}$. Moreover, there is an exact sequence
	\begin{equation*}
		0\morphism G[p](C)\morphism G[p^{n+1}](C)\morphism[p] G[p^n](C)\morphism 0
	\end{equation*}
	(the sequence of fppf sheaves from \cref{rem:pDivExactSeq} is exact on sections over $\Spec C$ because every fppf cover $\{U\morphism \Spec C\}$ admits a section $\Spec C\morphism U$ as $C$ is algebraically closed). Now $G[p^n]=(\IZ/p^n\IZ)^{\oplus h}$ and the classification of finite abelian groups finish the inductive step.
\end{proof*}
\begin{exm}\label{exm:duals}
	\begin{numerate}
		\item We have $T_p(\IQ_p/\IZ_p)=\IZ_p$.
		\item We denote $T_p\mu_{p^\infty}\eqqcolon \IZ_p(1)$ and call this the \defemph{first Tate twist}. This is isomorphic to $\IZ_p$ by \cref{lem:TpGFree}, but only up to \emph{non-canonical} isomorphism. In fact, any such isomorphism depends uniquely on the choice of compatible primitive $(p^n)\ordinalth$ roots $\zeta_{p^n}$.
		\item If $A$ is an abelian scheme over $\Oo_C$, then $T_pA[p^\infty]=T_pA$. This can be canonically identified with the dual of $H_\et^1(A_C,\IZ_p)$ (as a $\IZ_p$-module).
	\end{numerate}
\end{exm}
\begin{defi}
	For an arbitrary $\IZ_p$-module $M$ and $n\in \IZ$, we put 
	\begin{equation*}
		M(n)\coloneqq M\otimes_{\IZ_p}\IZ_p(1)^{\otimes n}
	\end{equation*}
	(where $\IZ_p(-n)\coloneqq \IZ_p(n)^\vee$ by convention) and call this the \defemph{$n\ordinalth$ Tate twist} of $M$.
\end{defi}
\begin{lem}\label{lem:TpGHom}
	Let $G$ be a $p$-divisible group over $\Oo_C$.
	\begin{numerate}
		\item There is a natural $\IZ_p$-linear isomorphism $T_pG\cong\Hom(\IQ_p/\IZ_p,G)$, where $\Hom$ is taken in the category of $p$-divisible groups.
		\item The composition of natural maps
		\begin{equation*}
			T_pG\cong\Hom(\IQ_p/\IZ_p,G)\xrightarrow{(-)^\vee}\Hom(G^\vee,\mu_{p^\infty})\xrightarrow{T_p(-)}\Hom_{\IZ_p}\big(T_pG^\vee,\IZ_p(1)\big)
		\end{equation*}
		defines a perfect $\IZ_p$-bilinear pairing $T_pG\times T_pG^\vee\morphism \IZ_p(1)$.
	\end{numerate}
\end{lem}
\begin{proof*}
	To prove \itememph{1}, we first claim that the natural morphism $G[p^n](\Oo_C)\morphism G[p^n](C)$ is an isomorphism for all $n$. Indeed, write $G[p^n]=\Spec A_n$, where $A_n$ is finite flat over $\Oo_C$. The image of any $\Oo_C$-algebra morphism $A_n\morphism C$ is finite over $\Oo_C$, hence already contained in $\Oo_C$. This proves the claim.
	
	Next, we claim that $\Hom_{\cat{GSch}/\Oo_C}((p^{-n}\IZ/\IZ)\times \Spec \Oo_C,G[p^n])$ is in canonical bijection with $G[p^n](C)$. Indeed, since $G[p^n]$ is a $p^n$-torsion group scheme, every morphism of group schemes $(p^{-n}\IZ/\IZ)\times \Spec \Oo_C\morphism G[p^n]$ is uniquely determined by what it does on the generator $\{p^{-n}\}\times \Spec \Oo_C$. Hence we get a canonical bijection with $G[p^n](\Oo_C)=G[p^n](C)$, as claimed.
	
	Now every morphism $\IQ_p/\IZ_p\morphism G$ of $p$-divisible groups is a sequence of compatible morphisms $\IZ/p^n\IZ\times \Spec \Oo_C\morphism G[p^n]$, hence a sequence of compatible elements of $G[p^n](C)$, and after unraveling what \enquote{compatible} means, \itememph{1} follows.
	
	To prove \itememph{2}, we construct the pairing in a slightly different way (and leave it to the reader to show that both constructions amount to the same). We have
	\begin{equation*}
		G^\vee[p^n](C)\cong\Hom_{\cat{GSch}/C}\big(G[p^n]\otimes_{\Oo_C}C,\IG_{m,C}\big)\cong\Hom\big(G[p^n](C),\IG_m(C)\big)\,.
	\end{equation*}
	The isomorphism on the left follows from the explicit construction in \cref{rem:CartierDual}\itememph{1}. For the right isomorphism, recall that $G[p^n]\otimes_{\Oo_C}C\cong (\IZ/p^n\IZ)^{\oplus h}\times \Spec C$ as shown in the proof* of \cref{lem:TpGFree}. Hence any morphism of group schemes into $\IG_{m,C}$ is uniquely determined by what it does on the $C$-valued points. Finally, observe that $G[p^n](C)$ is a $p^n$-torsion group, hence every morphism into $\IG_m(C)$ lands automatically inside $\mu_{p^n}(C)$. Summarizing,
	\begin{equation*}
		G^\vee[p^n](C)\cong \Hom\big(G[p^n](C),\mu_{p^n}(C)\big)
	\end{equation*}
	Taking limits on both sides, we easily get $T_pG^\vee\cong \Hom_{\IZ_p}(T_pG,\IZ_p(1))$. The same holds if we swap $G$ and $G^\vee$, hence we get indeed a $\IZ_p$-bilinear perfect pairing $T_pG\times T_pG^\vee\morphism \IZ_p(1)$.
\end{proof*}
\subsection{Dieudonné Modules}
An important task in arithmetics is to classify all $p$-divisible groups over a given base $S$. Historically, this was first achieved in the case $S=\Spec k$, where $k$ is a perfect field of characteristic $p>0$.
\begin{thm}[Dieudonné/Cartier, 1960s]\label{thm:DieudonneCartier}
	Let $k$ be a perfect field of characteristic $p>0$. There is an equivalence of categories
	\begin{equation*}
		M\colon \left\{p\text{-divisible groups over }k\right\}\isomorphism \left\{\text{Dieudonné modules over }W(k)\right\}\,.
	\end{equation*}
	Here a \enquote{Dieudonné module} is a finite free $W(k)$-module together with a $\phi$-linear action of an operator $F$, and a $\phi^{-1}$-linear operator $V$, such that $FV=p=VF$.
\end{thm}
\begin{rem}
	\begin{numerate}
		\item Actually, the original formulation of \cref{thm:DieudonneCartier} concerns finite flat group schemes over $k$ (and the version above is an easy consequence), as $p$-divisible have only been defined some five years later.
		\item For the purpose of this lecture we always work with \emph{covariant} Dieudonné modules. They are related to their contravariant counterparts via $M^{\mathrm{co}}(G)=M^{\mathrm{contra}}(G^\vee)$.
	\end{numerate}
\end{rem}
Let $C$ be as before and consider the semi-perfect ring $\Oo_C/p\Oo_C$ (which is to say that the Frobenius on $\Oo_C/p\Oo_C$ is surjective). Recall that $\IA_\inf =W(\Oo_C^\flat)=W((\Oo_C/p\Oo_C)^\flat)$ by \cref{prop:(A/I)b} and we have defined  a map $\IA_\inf \morphism \IA_\cris$ in \cref{subsec:Acris}.
\begin{defi}
	A \defemph{Dieudonné module over $\Oo_C/p\Oo_C$} is a finite free $\IA_\cris$-module $M$ together with operators (\defemph{Frobenius} and \defemph{Verschiebung})
	\begin{equation*}
		F\colon M\otimes_{\IA_\cris,\phi}\IA_\cris\morphism M\,,\quad V\colon M\otimes_{\IA_\cris,\phi^{-1}}\IA_\cris \morphism M
	\end{equation*}
	satisfying $FV=p=VF$.
\end{defi}
\begin{prop}[Grothendieck--Messing, Scholze--Weinstein]
	There exists a fully faithful functor
	\begin{equation*}
		M_\cris\colon \left\{p\text{-divisible groups over $\Oo_C/p\Oo_C$}\right\}\morphism\left\{\text{Dieudonné modules over }\IA_\cris\right\}\,.
	\end{equation*}
	We have $\rk M_\cris(G)=\hoehe G$ and $M_\cris(G^\vee)=M_\cris(G)^\vee$, where the dual on the right-hand side is taken as a dual of $\IA_\cris$-modules.
\end{prop}
\begin{exm}\label{exm:Mcris}
	\begin{numerate}
		\item We have $M_\cris(\IQ_p/\IZ_p)=\IA_\cris$ with $F=p$ and $V=1$.
		\item We have $M_\cris(\mu_{p^\infty})=\IA_\cris$ with $F=1$ and $V=p$.
		\item If $A$ is an abelian scheme over $\Oo_C$, then we have 
		\begin{equation*}
			M_\cris\big(A_{\Oo_C/p\Oo_C}[p^\infty]\big)^\vee=H_\cris^1\big(A_{\Oo_C/p\Oo_C}/\IA_\cris\big)\,,
		\end{equation*}
		(the dual on the left-hand side is taken as an $\IA_\cris$-module) in a way that identifies $F$ with the usual Frobenius $\phi$.
	\end{numerate}
\end{exm}
\subsection{Connections to \texorpdfstring{$p$}{p}-adic Hodge Theory}
\begin{qst}
	Let's take a $p$-divisible group $G$ over $\Oo_C$. Are the Tate module $T_pG$ and the Dieudonné module $M_\cris(G_{\Oo_C/p\Oo_C})$ related in any way? In the special case where $G=A[p^\infty]$, the question is essentially how
	\begin{equation*}
	H_\et^1(A_C,\IZ_p)\quad\text{and}\quad H_\cris^1\big(A_{\Oo_C/p\Oo_C}/\IA_\cris\big)
	\end{equation*}
	are related (see \cref{exm:duals}\itememph{3} and \cref{exm:Mcris}\itememph{3}). This leads straight into the land of \emph{$p$-adic Hodge theory}, which is after all the field of studying  comparisons between different $p$-adic cohomology theories. A partial answer is given by the following theorem.
\end{qst}
\begin{thm}[{\cite[Theorem~14.5(i)]{BMS}}, 2016]\label{thm:BMS}
	Let $\XX$ be a smooth proper formal scheme over $\Oo_C$. Then for all $i\geq 0$ there is an étale-crystalline comparison isomorphism
	\begin{equation*}
		H_\et^i(\XX_C,\IZ_p)\otimes_{\IZ_p}B_\cris\cong H_\cris^i\big(\XX_{\Oo_C/p\Oo_C}/\IA_\cris\big)\otimes_{\IA_\cris}B_\cris\,.
	\end{equation*}
\end{thm}
\begin{rem}\label{rem:periodRings}
	We should leave some remarks on the period rings $B_\cris$ and $B_\dR$.
	\begin{numerate}
		\item Let's first recall their construction. Consider the element $\epsilon=(1,\zeta_p,\zeta_{p^2},\dotsc)\in \Oo_C^\flat\cong \Oo_F$. Then $[\epsilon]$ is an element of $\IA_\inf$, whose logarithm $t=\log{[\epsilon]}$ can be considered both as an element of $B^{\phi=p}$ and of $\IA_\cris$, because the corresponding power series converges both in $B$ (as observed in the proof of \cref{lem:Qp}) and $\IA_\cris$ (basically by construction, as elements of the form $p^n/n!$ were adjoined). As in \cref{subsec:FFCandAcris}, we define
		\begin{equation*}
			B_\cris^+\coloneqq \IA_\cris\localize{p}\quad\text{and}\quad B_\cris\coloneqq B_\cris^+\localize{t}\,.
		\end{equation*}
		Moreover, the element $t\in B^{\phi=p}$ defines a point $\infty_t\in X_\FFC$ on the Fargues--Fontaine curve, with completed local ring
		\begin{equation*}
			B_\dR^+\coloneqq \roof{\Oo}_{X_\FFC,\infty_t}\quad\text{and}\quad B_\dR\coloneqq B_\dR^+\localize{t}\,.
		\end{equation*}
		Finally, we have seen in \cref{lem:BdRx} can also be constructed as the completion of $\IA_\inf$ along the kernel $(\xi_y)$ of Fontaine's map $\theta_y\colon \IA_\inf\morphism \Oo_{C_y}$, where $y\in |Y|$ is mapped to $\infty_t$. Via $C=C_y$ this fits into our situation.
		\item In some sense, the \enquote{first} example of such a comparison isomorphism is given by de Rham's theorem: if $X$ is smooth over $\IC$, then there is an isomorphism 
		\begin{equation*}
			H_\mathrm{sing}^i(X(\IC),\IZ)\otimes_\IZ\IC\cong H_\dR^i(X/\IC)\,.
		\end{equation*}
		Observe that $\IC$ plays the same role here as $B_\cris$ in \cref{thm:BMS}/\cref{thm:crystallineStuff} and $B_\dR$ in \cref{thm:deRhamComp}. The proof of de Rham's theorem relies on the Poincaré lemma, which is about integration of forms. In the algebraic world this leads to the notion of \emph{periods}, hence the name \emph{period rings} for $B_\cris$ and $B_\dR$. In particular, $\IC$ is the corresponding period ring for the singular-de-Rham comparison isomorphism.
	\end{numerate}
\end{rem}
Combining \cref{thm:BMS} with \cref{exm:duals}\itememph{3} and \cref{exm:Mcris}\itememph{3}, we find that there exists a comparison isomorphism between $T_pG$ and $M(G)\coloneqq M_\cris(G_{\Oo_C/p\Oo_C})$ in the special case where $G=A[p^\infty]$. It turns out that this works in fact for arbitrary $G$!
\begin{prop}\label{prop:TpGMGcomparison}
	Let $G$ be a $p$-divisible group over $\Oo_C$.
	\begin{numerate}
		\item There is a a $\phi$-equivariant isomorphism $\beta_G\colon T_pG\otimes_{\IZ_p}B_\cris\isomorphism M(G)\otimes_{\IA_\cris}B_\cris$.
		\item After tensoring with $-\otimes_{\IA_\cris}B_\dR^+$, we get a chain of inclusions
		\begin{equation*}
			T_pG\otimes_{\IZ_p}B_\dR^+\subseteq M(G)\otimes_{\IA_\cris}B_\dR^+\subseteq t^{-1}\left(T_pG\otimes_{\IZ_p}B_\dR^+\right)\,,
		\end{equation*}
		which become isomorphisms after tensoring with $-\otimes_{B_\dR^+}B_\dR$. For future use, the ring in the middle will be denoted $\Xi$.
	\end{numerate}
\end{prop}
\begin{proof}[Sketch of a proof]
	Recall that $T_pG\cong \Hom(\IQ_p/\IZ_p,G)$ by \cref{lem:TpGHom}. This allows us to construct a morphism 
	\begin{equation*}
		\beta_G^+\colon T_pG\otimes_{\IZ_p}\IA_\cris\morphism M(G)
	\end{equation*}
	 as follows: any $\alpha\colon \IQ_p/\IZ_p\morphism G$ induces a map $M(\alpha)\colon \IZ_p= M(\IQ_p/\IZ_p)\morphism M(G)$ (we have to take the equality $\IZ_p=M(\IQ_p)/\IZ_p$ for granted). Now $\beta_G^+$ may be defined via $\beta_G^+(\alpha)=M(\alpha)(1)$ and $\IA_\cris$-extension of scalars.
	 
	 To show that $\beta_G^+$ becomes an isomorphism $\beta_G$ after tensoring with $B_\cris$, we construct a map in the reverse direction. This can be done as follows: swapping $G$ and $G^\vee$, we obtain a map $\beta_{G^\vee}^+\colon T_pG^\vee \otimes_{\IZ_p}\IA_\cris\morphism M(G^\vee)$. Dualizing in the category of $\IA_\cris$-modules yields
	 \begin{equation*}
	 	(\beta_{G^\vee}^+)^\vee\colon M(G)\cong M(G^\vee)^\vee\morphism (T_pG^\vee\otimes_{\IZ_p}\IA_\cris)^\vee\cong (T_pG^\vee)^\vee\otimes_{\IZ_p}\IA_\cris\,.
	 \end{equation*}
	 We will see that $(\beta_{G^\vee}^+)^\vee$ provides the desired map in the reverse direction (Ben points out that this is a common trick in such situations). Observe that 
	 \begin{equation*}
	 	(T_pG^\vee)^\vee\cong \Hom_{\IZ_p}\big(T_pG,\IZ_p(1)\big)=T_pG(-1)
	 \end{equation*}
	 by \cref{lem:TpGHom}\itememph{2}. Moreover, since $\epsilon$ is a generator of the free $\IZ_p$-module $\IZ_p(1)$, we can construct a $B_\cris^+$-linear isomorphism $\IZ_p(1)\otimes_{\IZ_p}B_\cris^+\isomorphism tB_\cris^+$ via $\epsilon^a\otimes x\mapsto \log{[\epsilon^a]}x=tax$. Dualizing once again gives an isomorphism $B_\cris(-1)\cong t^{-1}B_\cris^+$. Thus,
	 \begin{equation*}
	 	(T_pG^\vee)^\vee\otimes_{\IZ_p}B_\cris^+\cong T_pG(-1)\otimes_{\IZ_p}B_\cris^+\cong T_pG\otimes_{\IZ_p}B_\cris^+(-1)\cong t^{-1}\left(T_pG\otimes_{\IZ_p}B_\cris^+\right)\,.
	 \end{equation*}
	 Summarizing, we find out that $\beta_G^+$ and $(\beta_{G^\vee}^+)^\vee$ induce maps
	 \begin{equation*}
	 	T_pG\otimes_{\IZ_p}B_\cris^+\morphism M(G)\otimes_{\IA_\cris}B_\cris^+\morphism t^{-1}\left(T_pG\otimes_{\IZ_p}B_\cris^+\right)\,.
	 \end{equation*}
	 It can be checked that the composition of the above maps is just the natural inclusion $T_pG\otimes_{\IZ_p}B_\cris^+\subseteq t^{-1}(T_pG\otimes_{\IZ_p}B_\cris^+)$ (we have to take this for granted though, since no one told us an explicit construction of $M=M_\cris$). Thus, the first arrow of the above sequence must be an injection. Via a similar argument we find that the same is true for the second arrow. Therefore we get a chain of inclusions
	 \begin{equation*}
	 T_pG\otimes_{\IZ_p}B_\cris^+\subseteq M(G)\otimes_{\IA_\cris}B_\cris^+\subseteq t^{-1}\left(T_pG\otimes_{\IZ_p}B_\cris^+\right)\,.
	 \end{equation*}
	 This immediately implies \itememph{a} since $B_\cris=B_\cris^+\localize{t}$. To deduce \itememph{b}, we can repeat the above arguments with $B_\dR^+$ in place of $B_\cris^+$ (in particular, we get $\IZ_p(1)\otimes_{\IZ_p}B_\dR^+\isomorphism tB_\dR^+$ and then the rest can be carried over) to obtain the same statement for $B_\dR^+$.
\end{proof}
\subsection{The Vector Bundles \texorpdfstring{$\Ee(G)$}{E(G)}}
Today, we restrict ourselves to the case $E=\IQ_p$, $\pi=p$. In this case the Fargues--Fontaine curve can be described as
\begin{equation*}
	X_\FFC=\Proj\Bigg(\bigoplus_{d\geq 0}(B_\cris^+)^{\phi=p^d}\Bigg)
\end{equation*}
by \cref{prop:FFandBcris}. We know that $X_\FFC$ is a Dedekind scheme. Moreover, Fontaine's map $\theta\colon \IA_\inf \morphism \Oo_C$ defines a point $\infty=\infty_t\in X$ with residue field $C$, hence a morphism $i_\infty \colon \Spec C\monomorphism X$. By definition, completion at $\infty$ gives $\Spec B_\dR^+\morphism X$ (compare this to \cref{rem:periodRings}\itememph{1}).
\begin{con}
	Let $G$ be a $p$-divisible group over $\Oo_C/p\Oo_C$. We associate a quasi-coherent sheaf on $X$ via
	\begin{equation*}
		\Ee(G)=\Bigg(\bigoplus_{d\geq 0}\left(M(G)\localize{p}\right)^{F=p^d}\Bigg)^\qcmod\,.
	\end{equation*}
	Here $(-)^\qcmod$ denotes the graded twiddleization, as usual. We will see later that $\Ee(G)$ is a vector bundle of rank $\hoehe G$.
\end{con}
Now let $G$ be a $p$-divisible group over $\Oo_C$. By \cref{prop:TpGMGcomparison}\itememph{1} above, there exists a natural map
\begin{equation*}
	T_pG\otimes_{\IZ_p} \Oo_{X_\FFC}\morphism \Ee(G)
\end{equation*}
which is an isomorphism on the locus $X_\FFC\setminus \{\infty\}$ where $t$ is invertible.
\numpar{Corollary \smash{\Attention}}\label{cor:E(G)SES} \itshape There is a natural short exact sequence of sheaves on $X_\FFC$
	\begin{equation*}
		0\morphism T_pG\otimes_{\IZ_p} \Oo_{X_\FFC}\morphism\Ee(G)\morphism i_{\infty,*}W\morphism 0\,,
	\end{equation*}
	where $W$ is the finite-dimensional $C$-vector space given by the image of $\Xi$ under the map\upshape
	\begin{equation*}
		{\id}\otimes {\theta(-1)}\colon t^{-1}(T_pG\otimes_{\IZ_p}B_\dR^+)\morphism T_pG\otimes_{\IZ_p}C(-1)\,.
	\end{equation*}
\begin{proof}
	First note that $t^{-1}(T_pG\otimes_{\IZ_p}t^{-1}B_\dR^+)\cong T_pG\otimes_{\IZ_p}t^{-1}B_\dR^+$ and $t^{-1}B_\dR^+\cong B_\dR^+(-1)$ as observed in the proof of \cref{prop:TpGMGcomparison}, so ${\id}\otimes {\theta(-1)}$ is indeed a map as claimed.
	
	We have already seen that $\Ff\morphism \Ee(G)$ is an isomorphism away from the vanishing set $\{\infty\}$ of $t$. In particular its cokernel is only supported on $\{\infty\}$. To analyze the behaviour there, we may instead investigate the behaviour on an \enquote{infinitesimal neighbourhood} of $\{\infty\}$, i.e., after tensoring with $B_\dR^+$. That's precisely what \cref{prop:TpGMGcomparison}\itememph{2} is for! Consider the diagram
	\begin{equation*}
		\begin{tikzcd}
		0\rar &T_pG\otimes_{\IZ_p}B_\dR^+\eqar[d]\rar & M(G)\otimes_{\IA_\cris}B_\dR^+\rar\dar[mono] &[1em] W\dar[mono]\rar & 0\\
		0\rar &T_pG\otimes_{\IZ_p}B_\dR^+\rar & t^{-1}(T_pG\otimes_{\IZ_p}B_\dR^+) \rar["\id\otimes{\theta(-1)}"] &[1em] T_pG\otimes_{\IZ_p}C(-1) \rar & 0
		\end{tikzcd}
	\end{equation*}
	The bottom row is exact since $t^{-1}B_\dR^+/B_\dR^+\cong B_\dR^+/tB_\dR^+\cong C\cong C(-1)$ as $C$-vector spaces. The top row is injective on the left and surjective on the right by definition of $W$. Hence the top row is exact too, proving that $\Ff\morphism \Ee(G)$ is injective and has cokernel $i_\infty W$.
\end{proof}
\begin{defi}
	A \defemph{minuscule modification on $X_\FFC$} is a short exact sequence of quasi-coherent sheaves on $X_\FFC$ of the form
	\begin{equation*}
		0\morphism \Ff\morphism \Ff'\morphism i_{\infty,*}W\morphism 0\,,
	\end{equation*}
	where $\Ff$ and $\Ff'$ are vector bundles such that $\Ff$ is trivial, and $W$ is a finite-dimensional $C$-vector space. A \defemph{morphism of minuscule modifications} is a morphism of the corresponding short exact sequences.
\end{defi}
\numpar{}\label{par:functor}
	We can thus form a \defemph{category of minuscule modifications on $X_\FFC$}. In view of Corollary~\cref{cor:E(G)SES} we have defined a functor
	\begin{equation*}
		\left\{\text{$p$-divisible groups over $\Oo_C$}\right\}\morphism \left\{\text{minuscule modifications on $X_\FFC$}\right\}\,.
	\end{equation*}
	Moreover, fixing $\Ff$, we can define a \defemph{category of minuscule modifications of $\Ff$}. For any finite free $\IZ_p$-module $T$, sending a minuscule modification to its cokernel defines a forgetful functor
	\begin{equation*}
	\left\{\text{minuscule modifications of }T\otimes_{\IZ_p}\Oo_{X_\FFC}\right\}\morphism \left\{\text{$C$-subvector spaces }W\subseteq T\otimes_{\IZ_p}C(-1)\right\}\,.
	\end{equation*}
	Surprisingly, it turns out that this is an equivalence of categories! This reduces the problem of classifying $p$-divisible groups over $\Oo_C$ to a simple linear algebra question: determining $C$-subvector spaces of a given $T\otimes_{\IZ_p}C(-1)$!
\begin{thm}[{\cite[Theorem~5.2.1]{ScholzeWeinstein}}, 2012]\label{thm:ScholzeWeinstein}
	The functors from \cref{par:functor} define an equivalence of categories
	\begin{equation*}
		\left\{\text{$p$-divisible groups over $\Oo_C$}\right\}\isomorphism\left\{\begin{tabular}{c}
		pairs $(T,W)$, s.th.\ $T$ is a finite free $\IZ_p$-module\\
		and $W\subseteq T\otimes_{\IZ_p}C(-1)$ a $C$-subvector space
		\end{tabular}\right\}\,.
	\end{equation*}
\end{thm}
	
\subsection{Modifications of Vector Bundles}
Back to $X_\FFC$: we must still show that $\Ee(G)$ is a vector bundle. It is a general fact that $\Ee(G)$ can be reconstructed from the data of $\Ff$ and $\Xi$ by means of the \emph{Beauville--Laszlo theorem}.
\begin{lem}[Beauville--Laszlo]\label{lem:BeuvilleLaszlo}
	Let $A$ be a noetherian ring, $f\in A$ and denote by $\roof{A}\coloneqq \limit_{n\in \IN}A/f^nA$ its $f$-adic completion. Then the functor
	\begin{equation*}
		\cat{Mod}_A\isomorphism \cat{Mod}_{A[f^{-1}]}\times_{\cat{Mod}_{\roof{A}[f^{-1}]}}\cat{Mod}_{\roof{A}}
	\end{equation*}
	is an equivalence of categories.
\end{lem}
\begin{proof*}
	Observe that $\Spec A[f^{-1}]\sqcup \Spec \roof{A}\morphism \Spec A$ is an fpqc cover of $A$. Thus, the assertion follows immediately from faithfully flat descent. In case you are wondering \enquote{How on earth is this a \emph{theorem} that wasn't known until 1995?}, your doubts are legitimate: the \emph{actual} Beauville--Laszlo theorem (see \cite{BeauvilleLaszlo}) is about not necessarily noetherian rings $A$, so that $\roof{A}$ may fail to be flat over $A$.
\end{proof*}
\begin{cor}\label{cor:BeauvilleLaszlo}
	Let $X$ be a Dedekind scheme, $x\in X$ any closed point and put $\roof{X}\coloneqq \Spec \roof{\Oo}_{X,x}\morphism X$. Then
	\begin{equation*}
		\cat{Bun}_X\isomorphism \cat{Bun}_{X\setminus \{x\}}\times_{\cat{Bun}_{\roof{X}\setminus \{x\}}}\cat{Bun}_{\roof{X}}
	\end{equation*}
	is an equivalence of categories. In particular, $\Ee(G)$ is a vector bundle.
\end{cor}
\begin{proof}
	Work affine-locally and use \cref{lem:BeuvilleLaszlo} together fpqc descent of local freeness. Alternatively, apply faithfully flat descent directly to the fpqc cover $(X\setminus \{x\})\sqcup \roof{X}\morphism X$. To see why $\Ee(G)$ is a vector bundle, observe that by \cref{prop:TpGMGcomparison}, $\smash{\Ee(G)|_{X\setminus \{x\}}}$ is a vector bundle and $\Ee(G)\otimes \roof{\Oo}_{X_\FFC,\infty}=\Ee(G)\otimes B_\dR^+$ is a $B_\dR^+$-submodule of the finite free module $t^{-1}(T_pG\otimes_{\IZ_p}B_\dR^+)$, hence finite free itself because the ring $B_\dR^+$ is a DVR (\cref{lem:BdR+DVR}).
\end{proof}
\begin{defi}
	A \defemph{finite free Breuil--Kisin--Fargues module} is a finite free $\IA_\inf$-module $M$ together with a $\IA_\inf$-linear map
	\begin{equation*}
		\phi_M\colon \phi^*M{\localize{\phi(\xi)}}\morphism M{\localize{\phi(\xi)}}\,.
	\end{equation*}
\end{defi}
\begin{thm}[Fargues]
	The following categories are equivalent.
	\begin{numerate}
		\item The category of Breuil--Kisin--Fargues modules.
		\item The category of quadruples $(\Ff,\Ff',\beta,T)$ where $\Ff,\Ff'$ are vector bundles on $X_\FFC$ such that $\Ff$ is trivial, $\beta\colon \Ff|_{X_\FFC\setminus \{\infty\}}\isomorphism \Ff'|_{X_\FFC\setminus \{\infty\}}$ is an isomorphism, and $T\subseteq H^0(X_\FFC,\Ff)$ is a $\IZ_p$-lattice.
		\item The category of pairs $(T,\Xi)$, where $T$ is a finite free $\IZ_p$-module and $\Xi\subseteq T\otimes_{\IZ_p}B_\dR$ is a $B_\dR^+$-lattice.
	\end{numerate}
\end{thm}
\begin{proof}
	Equivalence of \itememph{2} and \itememph{3} can be seen from the Beauville--Laszlo theorem in the form of \cref{cor:BeauvilleLaszlo}. In our situation, $\roof{X}=\Spec B_\dR^+$ and $\roof{X}\setminus \{x\}=\Spec B_\dR^+\setminus \{\infty\}=\Spec B_\dR$. Suppose we're given the data from \itememph{2}. Then only $\Xi$ needs to be constructed. Since $\Ff$ is trivial, we get $H^0(X_\FFC,\Ff)\cong \IQ_p^{\oplus \rk \Ff}$ from \cref{lem:HiOXn} and \cref{lem:PEigenspaces}. Hence $\Ff\cong T\otimes_{\IZ_p}\Oo_{X_\FFC}$. The restriction $\Ff'\otimes B_\dR^+$ is a finite free module over $B_\dR^+$. Since $B_\dR$ is a localization of $B_\dR^+$, we see that $\Ff'\otimes B_\dR^+$ is a $B_\dR^+$-lattice in $\Ff'\otimes B_\dR\cong \Ff\otimes B_\dR\cong T\otimes_{\IZ_p}B_\dR$ (the first isomorphism is induced by $\beta$). Thus we can take $\Xi=\Ff'\otimes B_\dR^+$.
	
	Conversely, assume we are given the data from \itememph{3}. Put $\Ff=T\otimes_{\IZ_p}\Oo_{X_\FFC}$. Then $T$ is a $\IZ_p$-sublattice of $H^0(X_\FFC,\Ff)\cong \IQ_p^{\oplus\rk \Ff}$. Moreover, observe that $\Xi\otimes B_\dR\cong T\otimes_{\IZ_p}B_\dR$ since $\Xi$ is a lattice contained in the right-hand side. Thus, $\Ff|_{X_\FFC\setminus \{\infty\}}$ and $\Xi$ define a vector bundle $\Ff'$ on $X_\FFC$ via \cref{cor:BeauvilleLaszlo}. In particular, the construction yields an isomorphism $\beta\colon \Ff|_{X_\FFC\setminus\{\infty\}}\isomorphism \Ff'|_{X_\FFC\setminus\{\infty\}}$.
	
	This proves that \itememph{2} and \itememph{3} are equivalent. It's much harder to show that \itememph{1} is equivalent to the other two, and we omit the proof.
\end{proof}

\section{Classification of Vector Bundles}
\lecture[This lecture was a big black box: $\blacksquare$.]{2020-01-22}As before, let $X_\FFC$ denote the Fargues--Fontaine curve associated to $E$ and $F$, and let $\breve{E}=W_{\Oo_E}(\ov{\IF}_q)\localize{p}$ denote the completion of the maximal unramified extension of $E$. We won't prove the \cref{mainthm:vectorBundles} today, and not even give a proper sketch. Instead, we will link \cref{mainthm:vectorBundles} to various results in other parts of mathematics and give a rough idea how it follows from these.

By pullback to the étale coverings $X_{\FFC,h}\coloneqq X_\FFC\otimes_EE_h$ for unramified extension $E_h/E$, descent, the HN-formalism, knowledge of $H^\bullet(X_\FFC,\Oo_{X_\FFC}(\lambda)),\dotsc,$ one can reduce the \cref{mainthm:vectorBundles} to the following.
\begin{thm}\label{thm:modifications}
	Let $n>0$ be a positive integer.
	\begin{numerate}
		\item If $0\morphism \Ee\morphism \Oo_{X_\FFC}(1/n)\morphism \Ff\morphism 0$ is an exact sequence in which $\Ff$ is a torsion sheaf of degree one (i.e.\ a skyscraper sheaf supported at a single closed point), then $\Ee\cong \Oo_{X_\FFC}^{\oplus n}$.
		\item If $0\morphism \Ee\morphism \Oo_{X_\FFC}^{\oplus n}\morphism \Ff \morphism 0$ is an exact sequence with $\Ff$ as in \itememph{1}, then there exists an $m\in \{1,\dotsc,n\}$ such that $\Ee\cong \Oo_X^{\oplus \smash{(n-m)}}\oplus \Oo_X(-1/m)$.
	\end{numerate}
\end{thm}
\numpar{}\label{par:PEdecomp}Again, we won't give an actual proof of \cref{thm:modifications}, but a reduction to deep results of Gross--Hopkins and Drinfeld. Fix a closed point $x\in X_\FFC$ and let $C=\kappa(x)$ be its residue field, so that $C$ is an untilt of $F$ in characteristic $0$. Let $i\colon \Spec C\monomorphism X_\FFC$. For an arbitrary sheaf $\Ff$ on $X_\FFC$, we denote $\Ff(x)\coloneqq \Ff\otimes C$ (this is some $C$-vector space). For any vector bundle $\Ee'$ on $X_\FFC$ put
\begin{equation*}
	\Mm_{\Ee'}\coloneqq\left\{\Ee\subseteq \Ee'\st \Ee'/\Ee\cong i_*C\right\}\,.
\end{equation*}
Note that $\Mm_{\Ee'}$ is in canonical bijection with the set of equivalence classes of epimorphisms $\Ee'\epimorphism i_*C$, where two such epimorphisms are considered \emph{equivalent} iff they have the same kernel, or equivalently, iff they only differ by an automorphism of $C$. By the $i^*$-$i_*$ adjunction, this is in canonical bijection with the set of similar equivalence classes of epimorphisms $\Ee'(x)=i^*\Ee\epimorphism C$. The latter, however, characterizes precisely the $C$-valued points of the projectivization $\IP(\Ee'(x))$. The upshot is that we obtain a bijection
\begin{equation*}
	\Mm_{\Ee'}\isomorphism \IP\big(\Ee'(x)\big)(C)
\end{equation*}
sending $\Ee\subseteq \Ee'$ to the epimorphism $\Ee\otimes C\epimorphism\Ee/\Ee'\otimes C$. In particular, we get a decomposition 
\begin{equation*}
	\IP\big(\Ee'(x)\big)(C)=\coprod_{[\Ff]\in \Bun_{X_\FFC}/\cong}\IP\big(\Ee'(x)\big)(C)_{[\Ff]}\,,
\end{equation*}
where the terms on the right-hand side denote the \enquote{loci where $\Ee\cong \Ff$}, i.e., the sets $\left\{\Ee\in \Mm_{\Ee'}\st \Ee\cong \Ff\right\}$.

\numpar{}For simplicity, we only work in the special case $E=\IQ_p$ (in general one needs to replace $p$-divisible groups by \enquote{$\pi$-divisible $\Oo_E$-modules}). Johannes Anschütz pointed out that this special case does not suffice to prove the \cref{mainthm:vectorBundles}, not even in the special case $E=\IQ_p$, because the proof needs \cref{thm:modifications} for all finite unramified extensions $E_h/E$ rather than just for $E$.

Fix a connected $p$-divisible group $H$ of dimension $1$ and height $n$ over $\ov{\IF}_p$. By some result we will not prove, $H$ is unique up to unique isomorphism. We also didn't define what the \enquote{dimension} of a $p$-divisible group is, but the amount of blackboxing in this lecture is high enough that this detail doesn't make a difference any more. By \cref{thm:DieudonneCartier}, $H$ corresponds to some Dieudonné module $M(H)$ over $W(\ov{\IF}_p)$. Upon inverting $p$, the associated Frobenius $F$ becomes a $\phi$-linear isomorphism (with inverse $p^{-1}V$), hence $M(H)\localize{p}=M(H)\otimes\breve{E}$ is an isocrystal over $\smash{\breve{E}}$ in the sense of \cref{def:phiModule}. It can be checked that
\begin{equation*}
	\Ee\big(M(H)\otimes \breve{E}\big)\cong \Oo_{X_\FFC}(1/n)\,.
\end{equation*}
Now Consider the set
\begin{equation*}
	\Mm_{\LT,\eta}^\ad=\left\{\text{iso.\ classes of }(G,\alpha)\st 
	\begin{tabular}{c}
		$G$ is a $p$-divisible group over $\Oo_C$, and\\
		$\alpha\colon G\otimes_{\Oo_C} \Oo_C/p\Oo_C\isomorphism H\otimes_{\ov{\IF}_p}\Oo_C/p\Oo_C$
	\end{tabular}\right\}\,.
\end{equation*}
The notation suggests that this is the set of \enquote{$C$-valued points of the adic generic fibre of some Lubin--Tate space $\Mm_{\LT}^\ad$}, and in fact, this can be made precise. This space comes with the \emph{Gross--Hopkins period morphism}
\begin{equation*}
	\pi_\dR\colon \Mm_{\LT,\eta}^\ad\morphism \IP\big(M(H)\otimes_{W(\ov{\IF}_p)}C\big)(C)
\end{equation*}
(also note that the right-hand side is abstractly isomorphic to $\IP^{n-1}(C)$ since $M(H)\otimes C$ is $n$-dimensional). This morphism can be described as follows: a pair $(G,\alpha)$ is sent to the $C$-valued point of $\IP(M(H)\otimes C)$ given by the surjection 
\begin{equation*}
M(H)\otimes_{W(\ov{\IF}_p)}C\overset{\alpha}{\isomorphism}M(G)\otimes_{\IA_\cris}C\epimorphism \operatorname{Lie}(G)\cong C\,.
\end{equation*}
The $\operatorname{Lie}(G)$ on the right-hand side looks terrifying, but in reality this is just another name (or rather another \emph{construction}) of the space $W$ from Corollary~\cref{cor:E(G)SES}, so no magic is happening. The fact that $\operatorname{Lie}(G)$ is a one-dimensional $C$-vector space is another way of saying that $G$ has dimension $1$, which is true because $H$ has dimension $1$ as well.
\begin{thm}[Gross--Hopkins]\label{thm:GrossHopkins}
	The morphism $\pi_\dR$ is surjective and étale.
\end{thm}
\begin{rem}
	\cref{thm:GrossHopkins} should feel a bit strange on first glance: we would expect that $\IP(M(H)\otimes C)\cong \IP^{n-1}(C)$ has vanishing étale fundamental group, hence every étale covering should be split. However, in the adic world there exist \enquote{infinite étale coverings of $\IP^{n-1}(C)$}.
\end{rem}
\begin{proof}[Sketch of a proof of \cref{thm:modifications}\itememph{1}]
	\cref{thm:GrossHopkins} is all we need to prove the first assertion. Observe that since $\Ee'=\Oo_X(1/n)$, we have $\Ee'(x)=M(G)\otimes_{\IA_\cris} C\cong M(H)\otimes C$. Hence the period morphism $\pi_\dR$ can be written as
	\begin{equation*}
		\pi_\dR\colon \Mm_{\LT,\eta}^\ad\morphism \Mm_{\Ee'}\epimorphism \IP\big(\Ee'(x)\big)(C)\,.
	\end{equation*}
	In particular, every $\Ee\in \Mm_{\Ee'}$ can be written as $\pi_\dR(G,\alpha)$, hence the corresponding sequence is isomorphic to
	\begin{equation*}
		0\morphism T_pG\otimes_{\IZ_p}\Oo_{X_\FFC}\morphism \Ee'\morphism i_*\operatorname{Lie}(G)\morphism 0
	\end{equation*}
	from Corollary~\cref{cor:E(G)SES}, hence $\Ee\cong T_pG\otimes_{\IZ_p}\Oo_{X_\FFC}$ is indeed a trivial vector bundle.
\end{proof}
Conversely, \cref{thm:GrossHopkins} follows from the classification of vector bundles on $X_\FFC$ (and \cref{mainthm:vectorBundles} does have an alternative proof not using $p$-divisible groups, so this is no circular reasoning). 
\begin{proof}[Sketch of a conditional proof of \cref{thm:GrossHopkins}]
	By some magic, the Scholze--Weinstein classification (\cref{thm:ScholzeWeinstein}, which relies on \cref{mainthm:vectorBundles}) implies that the image of $\pi_\dR$ is the \enquote{admissible locus}, i.e., the set of all $\Ee\in \Mm_{\Ee'}$ which are semistable. So suppose we have a sequence 
	\begin{equation*}
		0\morphism \Ee\morphism \Oo_{X_\FFC}(1/n)\morphism i_*C\morphism 0
	\end{equation*}
	in which $\Ee$ is not semistable. We claim:
	\begin{alphanumerate}
		\item[\itememph{*}] $\Ee$ has always degree $0$, hence slope $0$ (and here it is irrelevant whether $\Ee$ is semistable or not).
	\end{alphanumerate}
	The general fact behind \itememph{*} is the following: let $X$ be a Dedekind scheme and $\Ff$, $\Ff'$ vector bundles of rank $r$ on $X$ that fit into a short exact sequence $0\morphism \Ff\morphism\Ff'\morphism \Tt\morphism 0$, in which $\Tt$ is a torsion sheaf. Consider the \defemph{ramification divisor}
	\begin{equation*}
		R=\sum_{x\in X}\length_{\Oo_{X,x}}(\Tt_x)\cdot \{x\}\,.
	\end{equation*}
	Then $\bigwedge^r\Ff'\cong \bigwedge^r\Ff\otimes \Oo_X(R)$. In our situation, $\Tt=i_*C$ is only supported at the chosen point $x\in X_\FFC$, hence $R=\{x\}$ and $\Oo_{X_\FFC}(R)\cong\Oo_{X_\FFC}(1)$. Thus $\deg \Ee=\deg \Oo_{X_\FFC}(1/n)-1=0$, proving \itememph{*}. In case you want a reference for the general fact: I got it from \cite[Lemma~11]{AlternativeSerreDuality}, but there's probably a better reference.
	
	Now if $\Ee$ is not semistable, it has a non-trivial HN-filtration. In particular, there is a $\Oo_X(\lambda)=\Ee_1\subseteq \Ee$ with larger slope and smaller rank, so $\lambda=d/r>0$ and $r<n$. But then $\lambda>1/n$, hence the non-zero morphism $\Oo_X(\lambda)\morphism\Oo_X(1/n)$ contradicts \cref{lem:HN}.
\end{proof}
\numpar{}\label{par:motivation}Our next goal is to prove \cref{thm:modifications}\itememph{2} by a similar trick as in the proof of \itememph{1} above. To get the idea, let's describe the decomposition of $\IP(\Ee'(x))(C)$ according to \cref{par:PEdecomp} in the special case $\Ee'=\Oo_X^{\oplus n}$ we are interested in: if \cref{thm:modifications}\itememph{2} is true, then
\begin{equation}\label{eq:PEdecomp2}
	\IP\big(\Ee'(x)\big)(C)_{[\Ff]}\neq \emptyset\quad\text{only if}\quad \Ff=\Oo_{X_\FFC}^{\oplus(n-m)}\oplus \Oo_{X_\FFC}(-1/m)
\end{equation}
for some $m\in \{1,\dotsc,n\}$. The most interesting case is the case where $\Ff$ is semistable, i.e., $\Ff=\Oo_{X_\FFC}(-1/n)$. Believing \cref{eq:PEdecomp2}, we see that $\Ff=\Oo_{X_\FFC}(-1/n)$ holds iff $H^0(X_\FFC,\Ff)=0$ (here we use $H^0(X_\FFC,\Oo_{X_\FFC}(-1/n))=0$, which follows from \cref{lem:OXlambda} in combination with \cref{lem:PEigenspaces} and \cref{lem:HiOXn}). By the long exact cohomology sequence, the condition $H^0(X_\FFC,\Ff)=0$ is fulfilled iff $\IQ_p^n=H^0(X_\FFC,\Ee')\monomorphism H^0(X_\FFC,i_*C)=C$ is injective.

By some magic, this last condition is equivalent to the condition that the point in $\IP(\Ee'(x))(C)\cong \IP^{n-1}(C)$ defined by $\Ff$ is contained in the complement of the union of all $\IQ_p$-rational hyperplanes of codimension $1$ in $\IP^{n-1}(C)$. This complement will be denoted $\Omega^{n-1}(C)$ and is usually called the \defemph{Drinfeld upper half plane}.
\begin{rem}
	In the case $n=2$ we get $\Omega^1(C)=\IP^1(C)\setminus\IP^1(\IQ_p)$ (since $\IQ_p$-rational hyperplanes of dimension $0$ are $\IQ_p$-rational points, hence assemble into $\IP^1(\IQ_p)$), which is reminiscent of the \enquote{upper half plane} $\IP^1(\IC)\setminus \IP^1(\IR)$. Hence the name.
\end{rem}
\begin{proof}[Sketch of a proof of \cref{thm:modifications}\itememph{2}]
	For all $c\geq 1$ let $\operatorname{Hyp}_c$ denote the set of $\IQ_p$-rational hyperplanes of codimension $c$ in $\IP^{n-1}(C)$, i.e., the set of all $\IQ_p$-rational $Z\subseteq \IP^{n-1}(C)$ such that $Z\cong \IP^{n-1-c}(C)$.
	Then there is a decomposition
	\begin{equation*}
		\IP^{n-1}(C)=\Omega^{n-1}(C)\sqcup\coprod_{Z\in \operatorname{Hyp}_1}\Omega_Z^{n-2}(C)\sqcup\coprod_{Z\in \operatorname{Hyp}_2}\Omega_Z^{n-3}(C)\sqcup\dotsb\,.
	\end{equation*}
	The idea of the proof is to identify the above decomposition with the decomposition of $\IP(\Ee'(x))(C)$ constructed in \cref{par:PEdecomp}, with $\coprod_{Z\in \operatorname{Hyp}_c}\Omega_Z^{n-1-c}(C)$ corresponding to $\IP(\Ee'(x))(C)_{[\Ff]}$ for $\Ff=\Oo_{X_\FFC}^{\oplus c}\oplus \Oo_{X_\FFC}(1/(n-c))$ (hopefully the motivational stuff in \cref{par:motivation} helped to make that point).
	
	Using induction, it is thus enough to show that $\Omega^{n-1}(C)$ is contained in the locus $\IP(\Ee'(x))(C)_{[\Ff]}$ associated to $\Ff=\Oo_{X_\FFC}(-1/n)$. To show this, we pull out a big gun again. Drinfeld constructed a moduli problem for $p$-divisible group with some extra structure, together with a period morphism
	\begin{equation*}
		\pi_\dR\colon \Mm_{\Dr,\eta}^\ad\morphism \IP^{n-1}(C)
	\end{equation*}
	whose image is precisely $\Omega^{n-1}(C)$. One can explicitly check that $\pi_\dR$ factors over the subset
	$\left\{\Ee\in \Mm_{\Ee'}\st \Ee\cong \Oo_{X_\FFC}(-1/n)\right\}\subseteq \Mm_{\Ee'}\cong \IP^{n-1}(C)$. This \enquote{finishes} the proof.
\end{proof}
\numpar{}The adic spaces $\Mm_{\LT,\eta}^\ad$ and $\Mm_{\Dr\eta}^\ad$ are interesting through their  relation with the local \enquote{Langlangs} correspondence (LLC) and the Jacquet--Langlands correspondence (JLC). We can put a level structure on $\Mm_{\LT,\eta}^\ad$ and $\Mm_{\Dr\eta}^\ad$. By a theorem of Faltings--Fargues, the respective \enquote{$\infty$-level Lubin--Tate/Drinfeld spaces} $\Mm_{\LT,\eta,\infty}^\ad$ and $\Mm_{\Dr\eta,\infty}^\ad$ are related by an isomorphism
\begin{equation*}
	\begin{tikzcd}
		\Mm_{\LT,\eta,\infty}^\ad\rar[iso, dashed, "\text{Faltings--Fargues}"'] \dar["\GL_n(\IZ_p)\text{-torsor}"']&[5em] \Mm_{\Dr,\eta,\infty}^\ad\dar["\Oo_D^\times\text{-torsor}"]\\
		\llap{$D^\times\curvearrowright$ }\Mm_{\LT,\eta}^\ad &[5em] \Mm_{\Dr,\eta}^\ad\rlap{ $\curvearrowleft \GL_n(\IQ_p)$}
	\end{tikzcd}\,.
\end{equation*}
Here $D$ is the central division algebra over $\IQ_p$ of invariant $1/n$ ($D$ is unique up to isomorphism), and $D^\times$ its group of units. If moreover $W_{\IQ_p}$ denotes the Weil group of $\IQ_p$, then there is, \enquote{roughly} (more on that in the $12\ordinalth$ lecture), a $W_{\IQ_p}\times \GL_n(\IQ_p)\times D^\times$-equivariant isomorphism
\begin{equation*}
	H_c^{n-1}\big(\Mm_{\LT,\eta,\infty}^\ad\otimes {\ov{\IQ}_p},\ov{\IQ}_\ell\big)\mathrel{\text{\enquote{$=$}}}\bigoplus_\pi\sigma(\pi)\otimes \pi\otimes \rho(\pi)^\vee\,,
\end{equation*}
where the sum on the right-hand side is taken over all super-cuspidal representations $\pi$ of $GL_n(\IQ_p)$. Also $\sigma(\pi)$ denotes the $W_{\IQ_p}$-representation associated to $\pi$ via LLC, and $\rho(\pi)$ denotes the $D^\times$-representation associated to $\pi$ via JLC.

The spaces $\Mm_{\LT,\eta,\infty}^\ad$ and $\Mm_{\Dr\eta,\infty}^\ad$ can be defined via the Fargues--Fontaine curve as
\begin{align*}
	\Mm_{\LT,\eta,\infty}^\ad &\mathrel{\text{\enquote{$=$}}} \left\{\Oo_{X_\FFC}^{\oplus n}\monomorphism \Oo_{X_\FFC}(1/n)\st \text{the cokernel is supported at }\infty\right\}\\
	\Mm_{\Dr,\eta,\infty}^\ad &\mathrel{\text{\enquote{$=$}}} \left\{\Oo_{X_\FFC}(-1/n)\monomorphism \Oo_{X_\FFC}^{\oplus n}\st \text{the cokernel is supported at }\infty\right\}
\end{align*}

The switch from $p$-divisible groups to vector bundles on the Fargues--Fontaine curve has the main advantage that we can form the tensor product of vector bundles. This leads to important generalizations.
\begin{defi}
	Let $G$ be a reductive group over $\IQ_p$ (such as $G=\GL_n,\operatorname{GSp}_{2n},\dotsc$). Then we denote 
	\begin{equation*}
		B(G)\coloneqq G(\breve{\IQ}_p)/\phi\cat{\mhyph conj.}
	\end{equation*}
	where modding out $\phi$-conjugation means $b\sim gb\phi(g)^{-1}$, as in \cref{par:phiModules}.
\end{defi}
\begin{thm}[Fargues]
	Let $G/\IQ_p$ be a reductive group. Then there is a natural isomorphism
	\begin{equation*}
		B(G)\isomorphism H_\et^1(X_\FFC,G)
	\end{equation*}
	given as follows: recall that $H_\et^1(X_\FFC,G)$ parametrizes the isomorphism classes of $G$-torsors on $X_\FFC$. By the Tannakian formalism, the latter are in bijection with isomorphism classes of exact $\otimes$-functors $\omega\colon \Rep_{\IQ_p}G\morphism \cat{Bun}_{X_\FFC}$. Now the above isomorphism sends $[b]\in B(G)$ to the $\otimes$-functor $\Ee_b$ given by
	\begin{equation*}
		\Ee_b\colon (V,\rho)\longmapsto\Ee\left(\breve{\IQ}_p\otimes_{\IQ_p}V,\rho(b)\cdot (\phi\otimes \id_V)\right)
	\end{equation*}
	(note that $(\breve{\IQ}_p\otimes V,\rho(b)\cdot (\phi\otimes \id_V))$ is indeed an isocrystal, so the functor $\Ee(-)$ from \cref{def:MysteriousFunctor} can be applied).
\end{thm}
\begin{defi}
	A \defemph{local Shimura datum} is a triple $(G,[b],\{\mu\})$ consisting of the following data:
	\begin{numerate}
		\item a reductive group $G/\IQ_p$,
		\item a $\phi$-conjugacy class $[b]\in B(G)$, and
		\item a conjugacy class $\{\mu\}$ of minuscule geometric characters $\mu\colon \IG_{m,\ov{\IQ}_p}\morphism G_{\ov{\IQ}_p}$.
	\end{numerate}
\end{defi}
\begin{defi}
	Let $(G,[b],\{\mu\})$ be a local Shimura datum. The associated \defemph{local Shimura variety} is \enquote{defined} as
	\begin{equation*}
		\operatorname{Sh}_{(G,[b],\{\mu\})}\mathrel{\text{\enquote{$\coloneqq$}}}\left\{\alpha\colon \Ee_1|_{X_\FFC\setminus \{\infty\}}\isomorphism \Ee_b|_{X_\FFC\setminus\{\infty\}}\st \begin{tabular}{c}
		the relative position of\\
		$\alpha$ is bounded by $\mu$
		\end{tabular}\right\}\,.
	\end{equation*}
	Here the \enquote{relative position} is an element of $G(B_\dR^+)\cdot\mu(t)\cdot G(B_\dR^+)\subseteq G(B_\dR)$ and the left-hand side comes with an action of $G(\IQ_p)\times J_b(\IQ_p)$, where $J_b(\IQ_p)=\Aut(\Ee_b)$.
\end{defi}
\begin{conj}[Kottwitz, Rappoport, Viehmann]
	Let $\ell\neq p$ be a prime. Then the cohomology groups
	\begin{equation*}
		H_c^\bullet\big({\operatorname{Sh}_{(G,[b],\{\mu\}),\infty}}\otimes {\ov{\IQ}_p},\ov{\IQ}_\ell\big)\,,
	\end{equation*}
	which are equipped with a $G(\IQ_p)\times J_b(\IQ_p)\times W_{E(G,\{\mu\})}$-action (here $E(G,\{\mu\})$ denotes the field of definition of $\{\mu\}$; don't ask) realize the LLC.
\end{conj}

\appendix

\backmatter\KOMAoption{chapterprefix}{false}
\printbibliography
\end{document}