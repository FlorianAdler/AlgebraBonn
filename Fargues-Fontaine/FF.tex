\documentclass[a4paper, 10pt, oneside, DIV=9, chapterprefix=true, numbers=enddot,bibliography=totoc]{scrbook}
\usepackage{StyleFF}
\usepackage{ShortcutsFF}

\usetikzlibrary{shapes.geometric,patterns}
\DeclareRobustCommand{\Attention}{\tikz[baseline, anchor=base]\node[draw, regular polygon, regular polygon sides=3, rounded corners=2, thick, inner sep=-0.25pt] at (0,0) {\textbf{!}};}


\subject{Lecture Notes for}
\title{The Fargues--Fontaine Curve}
\subtitle{Or: \enquote{The Fundamental Curve of $p$-adic Hodge Theory}}
\author{{\normalsize Lecturer}\\
	Johannes Anschütz}
\date{{\normalsize Notes typed by}\\
	Ferdinand Wagner}
\publishers{Winter Term 2019/20\\
University of Bonn}

%\includeonly{nothingtoseehere}
\begin{document}
\frontmatter
\KOMAoption{chapterprefix}{false}
\maketitle
\noindent This text consists of notes on the lecture Selected Topics in Algebra (The Fargues--Fontaine Curve), taught at the University of
Bonn by Dr.\ Johannes Anschütz in the winter term (Wintersemester) 2019/20.

Some changes and some additions have been made by the author. To distinguish them from the lecture's actual contents, they are labelled with an asterisk. So any \emph{Lemma}* or \emph{Remark}* or \emph{Proof}* that the reader might encounter are wholly the author's responsibility.\\[\thmsep]Please report errors, typos etc.\ through the \emph{Issues} feature of GitHub.


\tableofcontents
\listoftoc{lol}
\setcounter{llecture}{-1}
\include{./Chapters/FFintro}

\mainmatter\KOMAoption{chapterprefix}{true}
\renewcommand{\thedummy}{\thesection.\arabic{dummy}}

\include{./Chapters/FF11to12}
\include{./Chapters/FF13to15}



\chapter{Classification of Vector Bundles on the Fargues--Fontaine Curve}
\section{The Vector Bundles \texorpdfstring{$\Oo_X(\lambda)$}{O}}
\lecture[HN-filtrations and HN-polygons. $\phi$-modules over $\breve{E}$. Construction of the vector bundles $\Oo_X(\lambda)$.]{2020-01-08}As usual, let $E/\IQ_p$ be a finite extension with uniformizer $\pi$ and residue field $\Oo_E/\pi \Oo_E=\IF_q$, and let $F/\IF_q$ a non-archimedean algebraically closed extension. 

\subsection{The Harder--Narasimhan Formalism}\label{subsec:HNFormalism}
Henceforth, the names Harder--Narasimhan will be abbreviated as HN. Let $\Cc$ be an exact category; roughly speaking, this is an additive category together with a notion of short exact sequences (for example, the categories $\Bun_{\IP_k^1}$ and $\Bun_X$ of vector bundles on $\IP_k^1$ and on the Fargues--Fontaine curve $X$ respectively). Moreover, we assume there are:
\begin{alphanumerate}
	\item a function $\rk\colon \Ob(\Cc)\morphism \IN_{\geq 0}$ (the \defemph{rank function}). In the case where $\Cc$ is a category of vector bundles on $\IP_k^1$ or $X$, this is just what one would expect.
	\item a function $\deg \colon \Ob(\Cc)\morphism \IZ$ (the \defemph{degree function}). For vector bundles, we would take $\deg \Ee=\deg (\bigwedge^{\rk \Ee}\Ee)$. We have seen last time in \cref{prop:PicX=Z} that for the Fargues--Fontaine curve $X$, $\deg \colon \Pic(X)\isomorphism\IZ$ is an isomorphism. 
\end{alphanumerate}
Both $\rk$ and $\deg $have to be additive on short exact sequences in $\Cc$. Moreover, we require that there is an exact and faithful functor $F\colon \Cc\morphism \Aa$ (the \defemph{generic fibre functor} in the case where $\Cc$ equals $\Bun_{\IP_k^1}$ or $\Bun_X$) into an abelian category $\Aa$, such that for all $\Ee\in \Cc$, the functor $F$ induces a bijection
\begin{equation*}
	F\colon \left\{\text{strict subobjects of }\Ee\right\}\isomorphism \left\{\text{subobjects of }F(\Ee)\right\}\,.
\end{equation*}
Here a \defemph{strict subobjects} means a monomorphism $\Ee'\monomorphism \Ee$ that is part of a short exact sequence in $\Cc$. Finally, we assume
\begin{numerate}
	\item $\rk\colon \Ob(\Cc)\morphism \IN_{\geq 0}$ is the restriction of another function $\rk\colon \Ob(\Aa)\morphism \IN_{\geq 0}$ along $F$, which again has to be additive on short exact sequences and satisfies $\rk V=0$ iff $V=0$ for all $V\in \Aa$.
	\item If $u\colon \Ee\morphism\Ee'$ is a morphism in $\Cc$ such that $F(u)$ is an isomorphism, then $\deg \Ee\leq \deg \Ee'$ with equality iff $u$ is an isomorphism.
\end{numerate}
%Again, both requirements are easily seen for $\Cc=\Bun_{\IP_k^1}$ or $\Cc=\Bun_X$ and $F$ the generic fibre functor.
\begin{defi}
	Let $\Ee\in \Cc$ be an arbitrary object.
	\begin{numerate}
		\item The \defemph{slope of $\Ee$} is the (possibly infinite) number $\mu(\Ee)\coloneqq \deg(\Ee)/\rk(\Ee)\in \IQ\cup\{\infty\}$.
		\item $\Ee$ is called \defemph{semistable} if for all non-zero strict subobjects $\Ff\subseteq \Ee$ we have $\mu(\Ff)\leq \mu(\Ee)$.
	\end{numerate}
\end{defi}
\begin{exm}
	If $\Cc=\Bun_X$, then the twisting sheaves $\Oo_X(n)$ for $n\in \IZ$ are semistable line bundles. Moreover, $\Ee=\Oo_X(m)\oplus \Oo_X(n)$ is semistable iff $m=n$. Indeed, its slope is $\mu(\Ee)=(m+n)/2$. Thus for $n\neq m$, either $\Oo_X(m)$ or $\Oo_X(n)$ is a subbundle of higher slope. Conversely, for $m=n$, every non-trivial strict subobject of $\Ee$ is of the form $\Oo_X(m')\monomorphism \Oo_X(m)$ for $m'\leq m$, hence has slope at most $m$.
\end{exm}
\begin{lem}\label{lem:HN}
	Let $\Ee,\Ee'\in \Cc$ be semistable objects of slopes $\lambda$, $\lambda'$ respectively. If $\lambda>\lambda'$, then we have
	\begin{equation*}
		\Hom_\Cc(\Ee,\Ee')=0\,.
	\end{equation*}
\end{lem}
\begin{proof*}
	Let $\Ee\morphism \Ee'$ be a morphism in $\Cc$. Since $\Aa$ is abelian, we can splice $F(\Ee)\morphism F(\Ee')$ into short exact sequences $0\morphism K\morphism F(\Ee)\morphism K'\morphism 0$ and $0\morphism K'\morphism F(\Ee')\morphism K''\morphism 0$. By our assumption on $F$, the objects $K$ and $K'$ correspond to strict subobjects $\Kk\subseteq \Ee$ and $\Kk'\subseteq \Ee'$. Since $F$ is exact, these guys satisfy $F(\Ee/\Kk)\cong K'\cong F(\Kk')$ and $F(\Ee'/\Kk')\cong K''$. Moreover, we claim that $\Ee\morphism \Ee'$ factors over $\Ee/\Kk$. Indeed, what we need to prove is that $\Kk\morphism\Ee'$ is the zero morphism. Since $F$ is faithful, this may be checked after applying $F$, and for $K\cong F(\Kk)\morphism F(\Ee')$ this is clearly true. In the same way we show that $\Ee\morphism \Ee'$ factors over $\Kk'$.
	
	Hence we get a canonical morphism $\Ee/\Kk\morphism \Kk'$. By construction, this becomes an isomorphism after applying $F$, so $\deg(\Ee/\Kk)\leq \deg(\Kk')$ and $\rk (\Ee/\Kk)=\rk (\Kk')$ by the above properties. In particular, we have $\mu(\Ee/\Kk)\leq \mu(\Kk')$. But $\Ee'$ and $\Ee$ are semistable, hence $\mu(\Kk')\leq \lambda'$ and $\mu(\Kk)\leq \lambda$, except for $\Kk'=0$ (in which case we are done) or $\Kk=0$ (which leads to $\lambda=\mu(\Ee)=\mu(\Ee/\Kk)\leq \lambda'$, a contradiction).
	
	So if no of these two special cases occurs, we get $\mu(\Kk)\leq \lambda$ and $\mu(\Ee/\Kk)<\lambda$. This however contradicts \cref{lem*:MuOnSES} below.
\end{proof*}
\begin{lem*}\label{lem*:MuOnSES}
	For any short exact sequence $0\morphism \Ee'\morphism \Ee\morphism \Ee''\morphism 0$ in $\Cc$ we have 
	\begin{equation*}
		\min\{\mu(\Ee'),\mu(\Ee'')\}\leq \mu(\Ee)\leq \max\{\mu(\Ee'),\mu(\Ee'')\}\,.
	\end{equation*}
	For the left half, equality holds iff $\mu(\Ee')=\mu(\Ee'')$ or one of $\Ee'$, $\Ee''$ is zero. Equality on the right holds iff $\mu(\Ee')=\mu(\Ee'')$.
\end{lem*}
\begin{proof*}
	Put $d'=\deg(\Ee')$, $d''=\deg(\Ee'')$ and $r'=\rk(\Ee')$, $r''=\rk(\Ee'')$. By additivity of $\deg$ and $\rk$ on short exact sequences, we obtain
	\begin{equation*}
		\mu(\Ee)=\frac{d'+d''}{r'+r''}=\frac{r'}{r'+r''}\cdot\mu(\Ee')+\frac{r''}{r'+r''}\cdot\mu(\Ee'')\,.
	\end{equation*}
	Thus, $\mu(\Ee)$ is a convex combination of $\mu(\Ee')$ and $\mu(\Ee'')$ and the inequality as well as the discussion of equality cases follow rather easily.
\end{proof*}

\begin{thm}\label{thm:HN}
	Each $\Ee\in \Cc$ has a unique functorial filtration, called \enquote{HN-filtration}, of the form
	\begin{equation*}
		0=\Ee_0\subsetneq \Ee_1\subsetneq\dotsb\subsetneq \Ee_r=\Ee
	\end{equation*}
	such that $\Ee_i/\Ee_{i-1}$ is semistable for $i=1,\dotsc,r$ and the sequene of slopes $\mu(\Ee_i/\Ee_{i-1})$ is strictly decreasing.
\end{thm}
\begin{proof}[Sketch of a proof]
	Before we start with the proof, we remark that \cref{lem*:MuOnSES} shows $\mu(\Ee_1)> \mu(\Ee_2)> \dotsc \geq \mu(\Ee)$ for any HN-filtration of $\Ee$ as above.
	
	If $F(\Ee)$ is simple in $\Aa$, i.e., has no non-zero subobjects, then $\Ee$ has no non-zero strict subobjects by our assumption on $F$, hence $\Ee$ is semistable for trivial reasons. Then $\Ee$ is its own HN-filtration. Thus we may assume that $F(\Ee)$ is non-simple, so there exists a short exact sequence $0\morphism \Ee'\morphism \Ee\morphism \Ee''\morphism 0$ with $\rk \Ee',\rk\Ee'' <\rk \Ee$. Using induction, we may assume that $\Ee'$ and $\Ee''$ have HN-filtrations. We claim:
	\begin{alphanumerate}
		\item[\itememph{*}] The slopes of strict subobjects of $\Ee$ are bounded.
	\end{alphanumerate}
	To prove \itememph{*}, we first use the above observation to see that it suffices to bound the slopes of stric semistable subobject, because if $\Ff\subseteq \Ee$ is a strict subobject, then it has an HN-filtration by the induction hypothesis, hence $\Ff_1$ is a strict semistable subobject of $\Ee$ satisfying $\mu(\Ff_1)\geq \mu(\Ff)$.\footnote{By the way, here we use that compositions of strict subobjects are strict subobjects again. We didn't mention this in our \enquote{definition} of exact categories, but it's actually one of the axioms.} So w.l.o.g.\ $\Ff=\Ff_1$. Let $0=\Ee''_0\subsetneq\dotsb\subsetneq \Ee_r''=\Ee''$ be the HN-filtration of $\Ee''$. If $\Ff\morphism \Ee\morphism \Ee''_r/\Ee''_{r-1}$ is non-zero, then $\mu(\Ff)\leq \mu(\Ee''_r/\Ee''_{r-1})$ by \cref{lem:HN}. Otherwise, $\Ff\morphism \Ee''$ factors over $\Ee''_{r-1}$. Repeating this argument shows $\mu(\Ff)\leq \mu(\Ee''_{r-1}/\Ee''_{r-2})$ or $\Ff\morphism \Ee''$ factors over $\Ee''_{r-2}$, and so on. So all in all $\mu(\Ff)$ is bounded by the slopes of the HN-filtration of $\Ee''$ or $\Ff\morphism \Ee''$ is zero. But in that case $\Ff\morphism \Ee$ factors over $\Ee'$. Then the argument can be repeated with $\Ee'$, showing that $\mu(\Ff)$ is bounded by the slopes of the HN-filtration of $\Ee'$, or $\Ff$ itself is zero, which is of course excluded. This proves \itememph{*}.
	
	Take $\Ee_1\subseteq \Ee$ a strict subobject of maximal slope, whose rank is also maximal among all strict subobjects of maximal slope. Such an $\Ee_1$ exists since the strict subobjects of $\Ee$ can have rank at most $\rk \Ee$ by additivity of $\rk$, so the denominators are bounded above. As noted above, $\Ee_1$ is necessarily semistable. Moreover, $\Ee/\Ee_1$ has a HN-filtration $0=\Ff_0\subsetneq \dotsb \subsetneq \Ff_r=\Ee/\Ee_1$ by the induction hypothesis. For all $i\geq 2$ let $\Ee_i$ be the kernel of $\Ee\morphism \Ff_r/\Ff_{i-1}$.\footnote{This kernel exists because compositions of \emph{strict quotients}, i.e., epimorphisms $\Ee\morphism\Ee''$ that are part of a short exact sequence, are strict quotients again. This is another axiom we weren't told.} Then $\Ee_1$ and $\Ee_{i+1}/\Ee_i\cong \Ff_i/\Ff_{i-1}$ for $i\geq 1$ are semistable and the slopes of the latter are strictly decreasing, so all that's left to prove is $\mu(\Ee_1)>\mu(\Ee_2/\Ee_1)$. By \cref{lem*:MuOnSES} it suffices to show $\mu(\Ee_1)>\mu(\Ee_2)$. But $\Ee_2$ has larger rank than $\Ee_1\subsetneq \Ee_2$, hence its slope must be strictly smaller by construction of $\Ee_1$.
	
	It remains to show uniqueness and functoriality. Suppose $0=\Ee_0\subsetneq \dotsb\subsetneq \Ee_r=\Ee$ and $0=\Ee'_0\subsetneq \dotsb\subsetneq \Ee'_s=\Ee$ are different HN-filtrations. Without restriction $\mu(\Ee_1')\geq \mu(\Ee_1)$. By \cref{lem:HN}, the morphism $\Ee_1'\monomorphism \Ee\morphism \Ee_r/\Ee_{r-1}$ must be zero, hence $\Ee_1'\monomorphism \Ee$ factors over $\Ee_{r-1}$. Iterating this argument we obtain that it even factors over $\Ee_1$. Thus $\mu(\Ee_1')\leq \mu(\Ee_1)$ by \cref{lem*:MuOnSES} again. So equality must hold we can apply the same argument to $\Ee_1$, ultimately obtaining that $\Ee_1\monomorphism \Ee$ and $\Ee_1'\monomorphism \Ee$ factor over each other. Then $\Ee_1=\Ee_1'$. Now we can repeat the argument for $\Ee/\Ee_1$. I'm not so sure what \enquote{functoriality} means, but it certainly also follows from \cref{lem:HN}.
\end{proof}

\begin{defi}\label{def:HNPolygon}
	The \defemph{HN-polygon} $\HN(\Ee)$ of an object $\Ee\in \Cc$ is the unique polygon in $\IR^2$ with origin $(0,0)$ and slopes $\mu(\Ee_i/\Ee_{i-1})$ with multiplicity $\rk(\Ee_i/\Ee_{i-1})$. In particular, $\Ee$ is semistable iff the HN-polygon is a straight line.
\end{defi}
The following theorem wasn't mentioned in the lecture. I thought it would fix a later argument that went quite wrong. Turns out it doesn't, but by that time I had already typed the proof.
\begin{thm*}\label{thm*:HNPolygon}
	If $\Ff\subseteq \Ee$ is a strict subobject, then the HN-polygon $\HN(\Ff)$ lies below $\HN(\Ee)$. In particular, $\HN(\Ee)$ is the upper concave hull of the points $(\rk(\Ff),\deg(\Ff))\in \IR^2$, where $\Ff$ ranges over all strict subobjects of $\Ff$.
\end{thm*}
\begin{proof*}
	By additivity of $\deg$ and $\rk$ we see that the break points of $\HN(\Ee)$ are precisely the points $(\rk(\Ee_i),\deg(\Ee_i))$ for $i=0,\dotsc,r$. We prove the theorem by induction on the length $s$ of the HN-filtration $0=\Ff_0\subsetneq \dotsb\subsetneq \Ff_s=\Ff$. The case $s=0$ is trivial. Now assume $s\geq 1$ and let $i$ be the minimal index such that $\Ff_{s-1}\morphism \Ee$ factors over $\Ee_i$. Let $j> i$ be minimal such that $\Ff_s\morphism \Ee$ factors over $\Ee_j$. Then $\Ff_s\morphism \Ee_j/\Ee_{j-1}$ is non-zero, and since the image of $\Ff_{s-1}$ is contained in $\Ee_i\subseteq \Ee_{j-1}$, we get a non-zero morphism $\Ff_s/\Ff_{s-1}\morphism \Ee_j/\Ee_{j-1}$. Hence $\mu(\Ff_s/\Ff_{s-1})\leq \mu(\Ee_k/\Ee_{k-1})$ for all $k\leq j$ by \cref{lem:HN} and the fact that the sequence of $\mu(\Ee_k/\Ee_{k-1})$ is strictly decreasing.
	
	Now $\HN(\Ff)$ is obtained by attaching a line of slope $\mu(\Ff_s/\Ff_{s-1})$ to $\HN(\Ff_{s-1})$. Moreover, its endpoint $(\rk(\Ff),\deg(\Ff))$ has $x$-coordinate $\rk(\Ff)\leq \rk(\Ee_j)$. So $\HN(\Ff_{s-1})$ lies below $\HN(\Ee_i)$, and the single segment that is attached to it has smaller slope than all segments of $\HN(\Ee_j)$. Thus $\HN(\Ff)$ lies below $\HN(\Ee_j)$ and therefore also below $\HN(\Ee)$.
	
	In particular, we see that $(\rk(\Ff),\deg(\Ff))$ lies below $\HN(\Ee)$. But the break points of $\HN(\Ee)$ are of this form too as seen above, and $\HN(\Ee)$ is concave by construction, thus it is indeed the upper concave hull of all points of the given form. This finishes the proof.
\end{proof*}
\begin{prop}\label{prop:Clambdasst}
	Let $\lambda\in \IQ$. Then the full subcategory
	\begin{equation*}
		\Cc_\lambda^\sst=\left\{\Ee\in \Cc\st \Ee \text{ semistable, }\mu(\Ee)\in \{\lambda,\infty\}\right\}
	\end{equation*}
	is abelian and every object in it is  of finite length.
\end{prop}
\begin{proof*}
	From \cref{lem*:MuOnSES} we get that direct sums (and moreover, arbitrary extensions) of objects in $\Cc_\lambda^\sst$ are in $\Cc_\lambda^\sst$ again. Next we construct kernels and cokernels of morphisms $\Ee\morphism \Ee'$. This is trivial if $\Ee=0$ or $\Ee'=0$, so we may assume $\mu(\Ee)=\lambda=\mu(\Ee')$. Let $\Kk$ and $\Kk'$ be as in the proof of \cref{lem:HN}. As was observed there, we have $\mu(\Kk)\leq \lambda$ and $\mu(\Ee/\Kk)\leq \mu(\Kk')\leq \lambda$ (except in the special cases where one of them is zero, but these are easily handled). But then by \cref{lem*:MuOnSES} equality must hold everywhere. In particular, since $\rk(\Ee/\Kk)=\rk(\Kk')$ we must also have $\deg(\Ee/\Kk)=\deg(\Kk')$, hence $\Ee/\Kk\isomorphism \Kk'$ is an isomorphism by assumption~\itememph{2}.
	
	Therefore $\Kk$ and $\Ee/\Kk\cong \Kk'$ are strict subobjects of $\Ee$ and $\Ee'$ of the same slope, hence they are semistable too. So $\Kk,\Kk'\in \Cc_\lambda^\sst$. Another application of \cref{lem*:MuOnSES} shows that $\mu(\Ee'/\Kk')$ must be $\lambda$ or $\Ee'/\Kk'=0$. In the latter case $\Ee'/\Kk'$ is an element of $\Cc_\lambda^\sst$ for trivial reasons. So assume the former is the case and let $\Ff\subseteq \Ee'/\Kk'$ be a strict subobject. Let $\Ff'\subseteq \Ee'$ be the kernel of $\Ee\morphism (\Ee'/\Kk')/\Ff$ (this exists by the argument from the proof of \cref{thm:HN}). Then $\mu(\Ff')\leq \lambda$. But now the short exact sequence\footnote{Here we are veiling a not so trivial detail (and we already did this in the proof of \cref{thm:HN}): that $\Kk'$ is indeed a strict subobject of $\Ff'$. This follows formally from the axioms (that were never given), but that's a bit fiddly.} $0\morphism \Kk'\morphism \Ff'\morphism \Ff\morphism 0$ together with $\mu(\Kk')=\lambda\geq \mu(\Ff')$ implies that $\mu(\Ff)\leq \mu(\Ff')\leq \lambda=\mu(\Ee'/\Kk')$ by \cref{lem*:MuOnSES}. This finally shows that $\Ee'/\Kk'$ is semistable.
	
	Thus, $\Ee\morphism \Ee'$ has a kernel and a cokernel in $\Cc_\lambda^\sst$, and moreover the morphism from its coimage $\Ee/\Kk$ to its image $\Kk'$ is an isomorphism. We conclude that $\Cc_\lambda^\sst$ is abelian. It remains to show that any $\Ee\in \Cc_\lambda^\sst$ has finite length. In fact, we will show that $\Ee$ has length $\rk(\Ee)$. So suppose $\Ee_1\subsetneq \dotsb\subsetneq \Ee_r\subsetneq \Ee$ is a chain of subobjects of length $r>\rk(\Ee)$. By the pidgeonhole principle there must be an $i$ with $\rk(\Ee_i)=\rk(\Ee_{i+1})$. Then $F(\Ee_i)\isomorphism F(\Ee_{i+1})$ must be an isomorphism by assumption~\itememph{1}. Then from assumption~\itememph{2} we get $\deg(\Ee_i)=\deg(\Ee_{i+1})$. Since $\Ee_i$ and $\Ee_{i+1}$ have the same rank, hence the same slope (either $\lambda$ or $\infty$), we get equality and $\Ee_i\subseteq \Ee_{i+1}$ must be an isomorphism, contradicting $\Ee_i\subsetneq \Ee_{i+1}$.
\end{proof*}
\begin{exm}
	Suppose $\Cc$ is the category of vector bundles on $\IP_k^1$. By the Grothen-dieck--Birkhoff theorem, every vector bundle $\Ee$ can be written uniquely as
	\begin{equation*}
		\Ee\cong \bigoplus_{i=1}^r\Oo(d_i)^{\oplus n_i}\,,
	\end{equation*}
	where $d_1>d_2>\dotsb >d_j$ and all $n_i>0$. Then the $j\ordinalth$ piece $\Ee_j$ of the HN-filtration of $\Ee$ is given by $\bigoplus_{i=1}^j\Oo(d_i)^{\oplus n_i}$. Moreover, for $\lambda\in \IZ$ the category $\Cc_\lambda^\sst$ is the full subcategory of vector bundles isomorphic to a finite direct sum of copies of $\Oo(\lambda)$. In particular, $\Cc_\lambda^\sst$ is equivalent to $\cat{Vect}_k$.
\end{exm}
\subsection{\texorpdfstring{$\phi$}{Phi}-Modules and the Vector Bundles \texorpdfstring{$\Oo_X(\lambda)$}{O}}
\begin{defi}
	Let $\breve{E}=W_{\Oo_E}(\ov{\IF}_q)\localize{\pi}$, where $\ov{\IF}_q$ is the algebraic closure of $\IF_q$ inside $F$. Note that $\breve{E}$, being a localization of a ring of Witt vectors, comes equipped with a natural Frobenius action $\phi$.
\end{defi}
\begin{rem}
	We observe that $\breve{E}$ is a field. In fact, it is the completion of the maximal unramified extension of $E$ (this follows more or less from \cref{prop:FqAlgebrasEquivalence}). Moreover, since $\ov{\IF}_q\subseteq F$, $\breve{E}$ is naturally a subring of $B$.
\end{rem}
\begin{defi}\label{def:phiModule}
	Let $A$ be a ring with an endomorphism $\phi\colon A\morphism A$. A \defemph{$\phi$-module} over $A$ is a pair $(M,\phi_M)$, where $M$ is a finite projective $A$-module and $\phi_M\colon M\isomorphism M$ is $\phi$-semilinear isomorphism. The category of $\phi$-modules is denoted $\phi\cat{\mhyph Mod}_A$.
\end{defi}
In \cref{def:phiModule}, recall that a $\phi$-semilinear isomorphism is an isomorphism of underlying abelian groups that satisfies $\phi_M(am)=\phi(a)\phi_M(m)$ for all $a\in A$, $m\in M$. If $M$ is even a free $A$-module and $e_1,\dotsc,e_n\in M$ a basis, one can write
\begin{equation*}
	\phi_M(e_i\otimes 1)=\sum_{j=1}^na_{i,j}e_j\,,
\end{equation*}
and we obtain a matrix $a=(a_{i,j})\in \GL_n(A)$. Changing $e_1,\dotsc,e_n$ according to an invertible matrix $g\in \GL_n(A)$ transforms $a$ into $ga\phi(g)^{-1}$ (this operation is called \enquote{$\phi$-conjugation}). Thus, we get a bijection
\begin{equation*}
	\left\{\text{iso.\ classes of free rank $n$ $\phi$-modules}\right\}\isomorphism\GL_n(A)/\phi\text{-conj.}\,.
\end{equation*}
From now on, we consider the category $\Cc=\phi\cat{\mhyph Mod}_{\breve{E}}$, where $\phi$ is the ordinary Frobenius (at least if $E/\IQ_p$ is unramified, this is also known as the category of \defemph{isocrystals}). Since $\breve{E}$ is a field, all $\phi$-modules over $\breve{E}$ are free. Hence the above bijection provides a map
\begin{equation*}
	\deg\colon \left\{\text{iso.\ classes of rank-$1$ $\phi$-modules}\right\}\cong \breve{E}^\times/\phi\text{-conj.}\isomorphism\IZ\,;
\end{equation*}
the isomorphism on the right-hand side is induced by the valuation on $\breve{E}$ and it is an isomorphism because for $a,b\in \breve{E}$, trying to find a $g\in \Oo_{\smash{\breve{E}}\vphantom{E}}^\times$ with $b=ga\phi(g)^{-1}$ leads to a list of polynomial equations in the Teichmüller coefficients of $g$, which always have solutions in the algebraically closed field $\ov{\IF}_q$ as long as $a$ and $b$ have the same valuation. For arbitrary $M\in \Cc$
\begin{equation*}
	\rk M=\dim_{\breve{E}}M\quad \text{and}\quad\deg M=\deg\Bigg(\bigwedge^{\rk M}M\Bigg)
\end{equation*}
Also let $F$ be simply the identity functor on $\Cc$. Then one checks that all conditions from \cref{subsec:HNFormalism} are satisfied, so the HN-formalism is available for $(\Cc,\rk,\deg,\id_{\Cc})$! Moreover, since $\phi\cat{\mhyph Mod}_{\breve{E}}$ is already abelian $F$ is the identity functor, it's easily checked that $(\Cc,\rk,-\deg,\id_{\Cc})$ satisfies the conditions too. Therefore we actually have two HN-structures on $\Cc$! This has interesting consequences. 
\begin{numerate}
	\item Every HN-filtration $0=\Ee_0\subsetneq \dotsb \subsetneq \Ee_r=\Ee$ in $\Cc$ is canonically split, so that there is a canonical isomorphism $\Ee\cong \bigoplus_{i=1}^r\Ee_i/\Ee_{i-1}$. In fact, the splitting is induced by the second filtration $0=\Ee'_0\subsetneq \dotsb \subsetneq \Ee'_r=\Ee$ associated to the second HN-structure. That is, for all $j=1,\dotsc,r$ we have $\Ee_j'=\bigoplus_{i=r-j+1}^r\Ee_i/\Ee_{i-1}$.
	\item If $\Ee$ and $\Ee'$ are semistable of different slopes, then $\Hom_{\Cc}(\Ee,\Ee')=0$. 
\end{numerate}
\begin{warn*}
	Neither \itememph{1} nor \itememph{2} are as easy as the lecture made them sound. For example, \itememph{2} seemingly follows immediately from \cref{lem:HN}, but the major obstacle here is to show that the \emph{semistable objects are the same in both HN-structures}!
	
	What saves our *sses here (and only here, we really need that we are in the particular case where $\Cc=\phi\cat{\mhyph Mod}_{\breve{E}}$!) is the \emph{Dieudonné--Manin decomposition} (see \cref{thm:DieudonneManin} below). It can be checked by hand that this decompositions induces two split filtrations which have the property from \cref{thm:HN} for the respective HN-structures. So all in all, \itememph{1} and \itememph{2} are a consequence of the Dieudonné--Manin decomposition, not the other way around.
\end{warn*}
Let $\lambda=d/r\in \IQ$, where $d$ and $r$ are coprime integers and $r>0$. Let $D(\lambda)$ be the $\phi$-module over $\breve{E}$ whose underlying module is $\breve{E}^{\oplus r}$ and with associated matrix
\begin{equation*}
	\phi_{D(\lambda)}=\begin{pmatrix}
		0 & \cdots & 0 & \pi^d\\
		1 &  & & 0\\
		\vdots & \ddots & & \vdots\\
		0 & \cdots & 1 & 0 \\
	\end{pmatrix}
\end{equation*}

\begin{thm}[Dieudonné--Manin classification]\label{thm:DieudonneManin}
	The category $\Cc=\phi\cat{\mhyph Mod}_{\breve{E}}$ is semisimple and its simple objects are precisely those which are isomorphic to $D(\lambda)$ for $\lambda\in \IQ$ (in particular, every $\phi$-module $M$ has a unique decomposition $M=\bigoplus_{i=1}^rD(\lambda_i)^{\oplus n_i}$). Moreover, the division algebra $\End_\Cc(D(\lambda))$ over $E$ is central (i.e.\  its center is $E$) of invariant $\pm[\lambda]\in \operatorname{Br}E\cong \IQ/\IZ$.
\end{thm}
\begin{proof}[Sketch of a proof]
	Some technical arguments including the HN-formalism, passage to unramified coverings of $E$ (thus replacing $\phi$ by $\phi^h$) and twisting reduces the theorem to its essential part:
	\begin{alphanumerate}
		\item[\itememph{*}] Every semistable $\phi$-module $D$ over $\breve{E}$ of slope $0$ is a direct sum of copies of $D(0)=(\breve{E},\phi)$.
	\end{alphanumerate}
	By inspection, $\Ext_\Cc^1(D(0),D(0))\cong \breve{E}/(\phi-\id)\breve{E}$. But $\Oo_{\breve{E}}/\pi \Oo_{\breve{E}}=\ov{\IF}_q$ is algebraically closed. Hence $\smash{\Oo_{\breve{E}}/(\phi-\id)\Oo_{\breve{E}}}$ vanishes after reduction modulo $\pi$, hence by Nakayama it must vanish all along. Inverting $\pi$, we thus see that $\Ext_\Cc^1(D(0),D(0))=0$, so any self extension of $D(0)$ is split.
	
	Therefore, given an arbitrary $D$ as in \itememph{*}, it suffices to construct a non-zero morphism $D(0)\morphism D$. Indeed, such a morphism is necessarily a monomorphism because $D(0)$ is simple, and using induction on the rank we may assume that its cokernel $D/D(0)$ is already a direct sum of copies of $D(0)$. Then the above extension argument shows that $D$ itself must be such a direct sum. To construct a non-zero morphism $D(0)\morphism D$, write $\phi_D=a$ for some $a\in \GL_n(\breve{E})$. After performing row operations we may assume $a$ is triangular (doing some row operations forces us to do the corresponding \enquote{$\phi$-inverse} column operations to keep the $\phi$-conjugacy property alive; however, these column operations won't stop us from making $a$ upper triangular). Moreover $a_{1,1}\in \Oo_{\smash{\breve{E}}\vphantom{E}}^\times$ because $D$ is semistable of slope $0$, so $\det(\phi_D)$ should have valuation $0$. As $\ov{\IF}_q$ is algebraically closed, we may write $a_{1,1}=\phi(x)/x$ for some $x\in\Oo_{\smash{\breve{E}}\vphantom{E}}^\times$ (as usual, $x$ has to be constructed Teichmüller coefficient-wise). Then we get $D(0)\cong (\breve{E},a_{1,1}\phi)\monomorphism D$, as desired. 
\end{proof}
\begin{defi}\label{def:MysteriousFunctor}
	Recall that $\breve{E}\subseteq B$ canonically. Let $X$ denote the Fargues--Fontaine curve as usual. We construct a functor
	\begin{align*}
		\Ee_E(-)\colon \phi\cat{\mhyph Mod}_{\breve{E}}&\morphism \cat{QCoh}_X\\
		(D,\phi_D)&\longmapsto \Bigg(\bigoplus_{d\geq 0}(B\otimes_{\breve{E}}D)^{\phi\otimes \phi_D=\pi^d}\Bigg)^\qcmod\,,
	\end{align*}
	where $(-)^\qcmod$ denotes the graded twiddleization.
\end{defi}
\numpar{Example/Warning}\label{exmwarn:SignSwap}
If $n\in \IZ$, then $D(n)=(\breve{E},\pi^n\phi)$ is sent to the twisting sheaf $\Ee_E(D(n))=\Oo_X(-n)$. Indeed, its graded components are given by
\begin{equation*}
	(B\otimes_{\breve{E}}\breve{E})^{\phi\otimes \pi^n\phi=\pi^d}=B^{\phi=\pi^{d-n}}\,,
\end{equation*}
hence $\Ee_E(D(n))$ is the quasi-coherent module associated to the shift $P[-n]$, whence we catch a sign swap.
\begin{lem}\label{lem:Xh}
	For $h\geq 1$ let $E_h/E$ be the unique unramified extension of degree $h$ and $X_h=\Proj\big(\bigoplus_{d\geq 0}B^{\phi^h=\pi^d}\big)$ the corresponding Fargues--Fontaine curve. Let $(D,\phi_D)$ be a $\phi$-module over $\breve{E}$.
	\begin{numerate}
		\item For all $d\geq 0$ we have $E_h\otimes_E(B\otimes_{\breve{E}}D)^{\phi\otimes\phi_D=\pi^d}\cong (B\otimes_{\breve{E}}D)^{\phi^h\otimes \phi_D^h=\pi^{hd}}$.
		\item $X_h$ is isomorphic to the base change $X\otimes_EE_h$ (this works in the ramified case as well).
		\item The following diagram commutes:
		\begin{equation*}
			\begin{tikzcd}
			(D,\phi_D)\dar[|->] &[-2.4em] \phi\cat{\mhyph Mod}_{\breve{E}}\dar\rar["\Ee_E(-)"] &[1em] \cat{QCoh}_X\dar["-\otimes_EE_h"] \\
			(D,\phi_D^h) &[-2.4em] \phi^h\cat{\mhyph Mod}_{\breve{E}} \rar["\Ee_{E_h}(-)"] &[1em] \cat{QCoh}_{X_h}
			\end{tikzcd}\,.
		\end{equation*}
	\end{numerate}
\end{lem}
\begin{rem}
	\cref{lem:Xh} shows that $\Ee_E(-)$ takes values in vector bundles. Indeed, by \cref{thm:DieudonneManin}, every $M\in\phi\cat{\mhyph Mod}_{\breve{E}}$ is a direct sum of $D(\lambda)$'s, so it suffices to check that every $\Ee_E(D(\lambda))$ is a vector bundle. This can be verified étale-locally. Writing $\lambda=d/r$, we see that $X_r\morphism X$ is an étale covering and by \cref{lem:Xh}\itememph{3}, $\Ee_E(D(\lambda))\otimes_EE_h$ corresponds to
	\begin{equation*}
		\big(D(\lambda),\phi_{D(\lambda)}^r\big)\cong \bigoplus_{i=1}^r(\breve{E},\pi^d\phi)\,,
	\end{equation*}
	which is sent to the vector bundle $\Oo_{X_h}(-d)^{\oplus r}$ under $\Ee_{E_h}(-)$ by Example/Warning~\cref{exmwarn:SignSwap}. Henceforth we will write $\Oo_X(\lambda)\coloneqq \Ee_E(D(-\lambda))$. We have just seen that this is a vector bundle of rank $r$.
\end{rem}
\begin{proof}[Proof of \cref{lem:Xh}]
	For \itememph{1}, note that $\IZ/h\IZ\cong \Gal(E_h/E)$ acts $E_h$-semilinearly on $M=(B\otimes_{\breve{E}}D)^{\phi^h\otimes\phi_D^h=\pi^{hd}}$ via $\pi^{-d}\phi\otimes\phi_D$. Moreover, the invariants of this action are $M^{\Gal(E_h/E)}=(B\otimes_{\breve{E}}D)^{\phi\otimes\phi_D=\pi^d}$. Then the claim follows from Hilbert~90 (in the form of Galois descent; see e.g.\ \cite[I~(5.2)]{sga4.5}).
	
	Parts~\itememph{2} and~\itememph{3} are easy consequences of \itememph{1}; for \itememph{2} we use that $\Proj\big(\bigoplus_{d\geq 0}B^{\phi^h=\pi^d}\big)$ coincides with $\Proj \big(\bigoplus_{d\geq 0}B^{\phi^h=\pi^{hd}}\big)$ because that's just how the $\Proj$ construction works.
\end{proof}
A slightly different perspective on the vector bundles $\Oo_X(\lambda)$ is given by the following lemma.
\begin{lem}
	Let $\lambda=d/r\in \IQ$ and let $f_r\colon X_r=X\otimes_EE_r\morphism X$. Then there is a canonical isomorphism
	\begin{equation*}
		\Oo_X(\lambda)\isomorphism f_{r,*}\Oo_{X_r}(d)
	\end{equation*}
	In particular, $\Oo_X(\lambda)$ is a semistable vector bundle of rank $r$ and slope $\lambda$, and a simple object in $\Bun_{X,\lambda}^\sst$.
\end{lem}
\begin{proof*}
	The isomorphism follows easily by pulling back to $X_r$ and comparing descent datas; details are left as an exercise. To prove the additional assertions, we claim:
	\begin{alphanumerate}
		\item[\itememph{*}] The functors $f_{r,*}$ and $f_r^*$ preserve semistable objects.
	\end{alphanumerate}
	We first observe that $f_r^*$ preserves $\rk$ and scales $\deg$ by $r$, because it is straightforward to check that $\Oo_X(n)\otimes_EE_r\cong \Oo_{X_r}(rn)$. Conversely, $f_{r,*}$ scales $\rk$ by $r$ (this is straightforward) and preserves $\deg$ (this follows from the fact that both $f_r^*$ and $f_r^*f_{r,*}\cong (-)^{\oplus r}$ scale $\deg$ by $r$). Now suppose $\Ee'\in \Bun_{X_r}$ is semistable and $\Ee\subseteq f_{r,*}\Ee'$ is a strict subobject. Then $f^*\Ee\subseteq f_r^*f_{r,*}\Ee'\cong \Ee'^{\oplus r}$ is a strict subobject and $\Ee'^{\oplus r}$ is semistable, hence
	\begin{equation*}
		r\deg(\Ee)=\deg(f^*\Ee)\leq \deg(\Ee'^{\oplus r})=r\deg(\Ee')\,,
	\end{equation*}
	proving that $f_{r,*}\Ee'$ is semistable as well. In the same way we prove that $f_r^*$ preserves semistable objects. This proves \itememph{*}.
	
	In particular, $\Oo_X(\lambda)$ is semistable of rank $r$ and slope $d/r=\lambda$. It remains to show that it is simple in $\Bun_{X,\lambda}^\sst$. If $0\neq \Ee\subseteq \Oo_X(\lambda)$, then $\rk(\Ee)\leq r$. But if $\Ee$ has slope $\lambda$, then equality must hold as $d$ and $r$ are coprime. Since $\Bun_{X,\lambda}^\sst$ is abelian by \cref{prop:Clambdasst}, we see that $\Oo_X(\lambda)/\Ee$ is a vector bundle again and of rank $0$, hence $\Ee=\Oo_X(\lambda)$.
\end{proof*}
We are now ready to state our second main theorem: the classification of vector bundles on the Fargues--Fontaine curve. Its proof will occupy most of the remaining lectures.
\begin{mainthm}[Fargues--Fontaine]
	The functor $\Ee_E(-)$ from \cref{def:MysteriousFunctor} induces a bijection
	\begin{equation*}
		\Ee_E(-)\colon \left\{\text{iso.\ classes in }\phi\cat{\mhyph Mod}_{\breve{E}}\right\}\isomorphism\left\{\text{iso.\ classes in }\Bun_X\right\}\,.
	\end{equation*}
	In particular, every vector bundle $\Ee$ on $X$ has a unique decomposition $\Ee\cong \bigoplus_{i=1}^r\Oo_X(\lambda_i)^{\oplus n_i}$ with $\lambda_1>\dotsb >\lambda_r$ and all $n_i>0$.
\end{mainthm}
\begin{warn}
	Don't be fooled: $\Ee_E(-)$ will \defemph{not} be an equivalence of categories. Upon closer inspection this can't possibly be true, for $\phi\cat{\mhyph Mod}_{\breve{E}}$ is an abelian category, but $\Bun_X$ is not.
\end{warn}

\appendix

\backmatter\KOMAoption{chapterprefix}{false}
\printbibliography
\end{document}