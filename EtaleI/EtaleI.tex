\documentclass[a4paper, 10pt, oneside, DIV=9, chapterprefix=true, numbers=enddot, bibliography=totoc]{scrbook}
\usepackage{StyleEtaleI}
\usepackage{ShortcutsEtaleI}
\usepackage{halloweenmath}
\usetikzlibrary{shapes.geometric}
\usepackage{tikzducks}

\newcommand{\magic}{%
	\smash{\tikz[scale=0.125, baseline=-3]{%
		\fill (-0.65,0) -- (0.65,0) -- (0.65,-1.1) -- (-0.65, -1.1) -- cycle;%
		\fill (0,-1.1) ellipse (0.65 and 0.195);%
		\fill[white] (0,-0.15) ellipse (1 and 0.3);%
		\fill (0,0) ellipse (1 and 0.3);%
		\fill[white] (0,0) ellipse (0.6 and 0.18);%
		\draw[line width=1, line cap=round] (1.75,-0.25) -- (0.6,0.9);
		\draw[line width=0.375, white, line cap=round] (0.9,0.6) -- (0.6,0.9);
		\node[fill, scale=0.125, star, star point ratio=0.42, rotate=180] at (0.1,1) {};
		\node[fill, scale=0.25, star, star point ratio=0.42, rotate=180] at (-0.4,0.7) {};
		\node[fill, scale=0.25, star, star point ratio=0.42, rotate=180] at (-0.75,1.25) {};
		\node[fill, scale=0.2, star, star point ratio=0.42, rotate=180] at (-0.1,1.6) {};
	}}
}

\newcommand{\mysteriousduck}{%
	\smash{\tikz[baseline=(guenther-bill), scale=0.3]\duck[name=guenther, tshirt=white, grumpy, body=white, hat=black,sunglasses=black,  bill=black!25!white];}\hspace{-0.4em}
}

\subject{Lecture Notes for}
\title{Étale Cohomology I}
\author{{\normalsize Lecturer}\\
	Jens Franke}
\date{{\normalsize Notes typed by}\\
	Ferdinand Wagner}
\publishers{Winter Term 2019/20\\
University of Bonn}

\begin{document}
\frontmatter
\KOMAoption{chapterprefix}{false}
\maketitle
\noindent This text consists of notes on the lecture Advanced Topics in Algebraic Geometry (Étale Cohomology I), taught at the University of
Bonn by Professor Jens Franke in the winter term (Wintersemester) 2019/20.

Some changes and some additions have been made by the author. To distinguish them from the lecture's actual contents, they are labelled with an asterisk. So any \emph{Lemma}* or \emph{Remark}* or \emph{Proof}* that the reader might encounter are wholly the author's responsibility.\\[\thmsep]Please report errors, typos etc.\ through the \emph{Issues} feature of GitHub.


\tableofcontents
\listoftoc{lol}
\chapter{Preface}
\numpar*{Organizational stuff}As a result of a democratic decision in the preliminary meeting, the lecture will take place on Mondays from from 18:00 to 20:00 and on Fridays from 16:00 to 18:00, in the \enquote{Großer Hörsaal}.

Recommended prerequisites to this lecture are
\begin{temize}
	\item flat morphisms and faithfully flat descent,
	\item abelian varieties, in particular, the Jacobian of a curve.
\end{temize}
Nevertheless, Professor Franke promised to give a quick reminder on flat and étale morphisms in the first lecture. Moreover, typed lecture notes are available for Professor Franke's lecture on Jacobians of curves held in the winter term 2018/19 (see \cite{jacobians}). 

The goal of this lecture is to study the \emph{$\ell$-adic cohomology} of a scheme $X$, where $\ell\neq p$ is a prime different from the characteristic $p$ of $X$. These groups will be constructed as
\begin{align*}
	H_\et^i(X,\IZ_\ell)\coloneqq\limit_{n\geq 1}H^i(X_\et,\IZ/\ell^n\IZ)\,.
\end{align*}
Along the way, we will come across sheaves on the étale site, the relation between étale and Galois cohomology, cohomology of curves, and proper base change.

\numpar*{Author's note}
In these notes, the modern meaning of the word \emph{scheme} is used. That is, a scheme in these lecture notes is what Professor Franke would call a \emph{prescheme}, and what he would call a \emph{scheme} will be called a \emph{separated scheme} in here.

Also I will not follow Franke's numbering scheme\footnote{\ldots\ if not to say, numbering \emph{prescheme}.}, as I believe this document is easier to navigate if propositions/lemmas/etc.\ are numbered consecutively rather than independent of each other. 

\numpar*{Important note}
There will be no lecture next Friday ($1\ordinalst$ November), and the lecture next Monday ($4\ordinalth$ November) will take place in Seminarraum 0.011.


\mainmatter\KOMAoption{chapterprefix}{true}

\chapter{Motivation and Basic Definitions}
\section{Motivation}
\lecture[Weil cohomology theories: some motivation, some (counter-)examples. Flatness, flat base change, faithfully flat descent.]{2019-10-18}
\numpar{Problem} For a scheme $X$, we would like to have cohomology groups $H^*(X,\IZ)$ with properties similar to the ones familiar from algebraic topology. For example, if $f\colon X\morphism X$ is a continuous map of a topological space into itself, then (under some sensible conditions) the \emph{Lefschetz trace formula} says
\begin{equation*}
	\#\left\{\text{fixed points of }f\text{, counted with multiplicity}\right\}=\sum_{i=0}^{\dim(X)}(-1)^i\Tr\left(f^ *\middle| H^i(X,\IQ)\right)\,.
\end{equation*}
Now assume that $X$ is some variety $X$ over $k=\IF_q$, where $q=p^n$, and $f=\Frob_q$ is the Frobenius on $X$. Then the fixed points of $f$ are precisely the $k$-valued points of $X$. As the \enquote{derivative} $\d f$ vanishes, $(\id{}-\d f)$ should be invertible, so all fixed points of $f$ ought to have multiplicity one (bear in mind that all of this is purely motivational and has no ambition of being a formal argument). Hence we could hope that
\begin{equation*}
	\# X(k)=\sum_{i=0}^{2\dim(X)}(-1)^i\Tr\big(f^*\big| H^i(X_{\ov{k}},\magic)\big)\,,
\end{equation*}
where $H^i(X_{\ov{k}},\magic)$ is a mysterious cohomology group of the base change of $X$ to an algebraic closure of $k$. Also the sum ranging up to $2\dim(X)$ accounts for the fact that the \enquote{cohomological dimension} of $X$ should be twice its Krull dimension, same as the topological dimension of a complex manifold is twice its $\IC$-dimension.

Such a mystery cohomology theory with sufficiently nice properties is called a \defemph{Weil cohomology theory}\footnote{In fact, one can formulate a series of axioms to properly define the notion of \defemph{Weil cohomology theory}, but we didn't do that in the lecture.}, named after André Weil, who noticed that such a cohomology theory would solve most of his conjectures on varieties over finite fields, that became famously known as the \emph{Weil conjectures}.

\begin{cntx}
A natural candidate for a Weil cohomology theory is \emph{de Rham cohomology}. For a variety $X$ over a field $k$ it is defined as 
\begin{equation*}
	H_\dR^*(X)\coloneqq H^*(X,\Omega_{X/k}^\bullet)\,,
\end{equation*}
i.e., as the (hyper-)cohomology of the de Rham complex $\Omega_{X/k}^\bullet$.	By de Rham's famous theorem, the de Rham cohomology of a real manifold coincides with its singular cohomology over $\IR$, so it makes sense to hope that $H_\dR^*(X)$ still works as a replacement of singular cohomology for varieties over an arbitrary field $k$. But on second glance, this can't be true: even if we are lucky and a Lefschetz-like equation holds for de Rham cohomology in characteristic $p >0$, then it would still only be a congruence modulo $p$, since the $H_\dR^*(X)$ are $\IF_p$-vector spaces in this case, so the traces take values in $\IF_p$ as well.
\end{cntx}
\begin{cntx}
It is also impossible to find a Weil cohomology with coefficients in $\IQ$, nor in $\IZ$, nor in $\IZ_p$ if we work in characteristic $p$. Professor Franke sketched a counterexample, which I'm trying my best to reproduce here (but it may well be I got it wrong---however, this won't be needed for the lecture). For a \emph{supersingular elliptic curve} $E$ the endomorphism ring $\End(E)$ can have the property that $D=\End(E)\otimes \IQ$ is a quaternion algebra over $\IQ$ with the properties that
\begin{align*}
	\inv_v(D)=\begin{cases}
		\frac{1}{2} & \text{if }v=p\text{ or }v=\infty\\
		0 & \text{else}
	\end{cases}
\end{align*}
However, if we had a Weil cohomology theory with coefficients in $\IQ$, then $H^0(E,\IQ)\oplus H^2(E,\IQ)$ would be a two-dimensional representation of $D$. But this can only be true if $D$ is split over $\IQ$, which can't be true as $\inv_v(D)=\frac12$ for $v\in\{p,\infty\}$.
\end{cntx}
\numpar{Solutions} The following approaches (might) lead to suitable Weil cohomology theories.
\begin{alphanumerate}
	\item Étale cohomology $H_\et^*(X,\IZ/\ell^n\IZ)$ for a prime $\ell\neq p$. This will lead to $\ell$-adic cohomology, which has coefficients in $\IZ_\ell$ resp.\ in $\IQ_\ell$. It can still be defined for $\ell=p$, but gives the wrong results in this case.
	\item Crystalline cohomology, with coefficients in the \emph{Witt ring} $W(k)$.
	\item Constructing a $\IC$-valued Weil cohomology theory seems hard. For example, there ought to be an anti-linear endomorphism $\sigma$ of $H^i(X,\IC)$ that satisfies $\sigma^2=(-1)^i$. Still some people (e.g.\ Connes) try this. See for example Peter Scholze's \href{http://www.math.uni-bonn.de/people/scholze/Rio.pdf}{survey} at the ICM 2018 in Rio de Janeiro.
\end{alphanumerate}
In this lecture we will stick with approach \itememph{a}. Grothendieck's construction of étale cohomology is to relax the usual notion of a \emph{topology} on a topological space. In a \emph{Grothendieck topology}, the \enquote{open subsets} no longer need to form a partially ordered set, but rather more general categories are allowed. Then étale cohomology can be introduced as sheaf cohomology for such a generalized topology.

\begin{exm}
	Here is an example why we would want a topology that is finer than the usual Zariski topology. On a complex manifold $X$ with its sheaf $\Oo_X$ of $C^\infty$-functions we have the short exact sequence
	\begin{equation*}
		0\morphism 2\pi\mathrm{i}\IZ\morphism\Oo_X\morphism[\exp]\Oo_X^\times\morphism 0\,.
	\end{equation*}
	For a scheme $X$, there is a similar sequence
	\begin{equation*}
		0\morphism\mu_n\morphism\Oo_X^\times\morphism[(-)^n]\Oo_X^\times\morphism 0\,,
	\end{equation*}
	where $\mu_n$ is the sheaf of $n\ordinalth$ roots of unity on $X$. This has but one flaw: it is usually not exact. Indeed, for $(-)^n\colon \Oo_X^\times\morphism\Oo_X^\times$ to be an epimorphism, we would have to take \enquote{local $n\ordinalth$ roots} in $\Oo_X^\times$, which is usually not possible. Instead, taking a \enquote{local $n\ordinalth$ root} corresponds to some quasi-finite morphism $X'\morphism X$, which need not be an open immersion in the Zariski topology---that's the point! \emph{But if} morphisms like $X'\morphism X$ would count as a open subsets in some topology, then the above sequence might well be exact in that topology!
	
	In the étale topology, \emph{étale morphisms} (i.e.\ those that are flat and unramified) play the role of open subsets. It will turn out that the above sequence is exact as a sequence of étale sheaves. So after all it should come as no surprise that every étale morphism is also quasi-finite.
\end{exm}


\section{Reminder on Flat Morphisms}
This section is really just a crash course. Professor Franke gave a much more detailed introduction to flat morphisms in his Jacobians of curves lecture, so be sure to have a look at \cite[Chapter~2]{jacobians}.
\begin{defprop}
	An $A$-module $M$ is \defemph{flat} if $-\otimes_AM\colon \cat{Mod}_A\morphism\cat{Mod}_A$ is an exact functor, or equivalently, if $\Tor_i^A(-,M)=0$ for all $i>0$.
\end{defprop}
\begin{defprop}
	Let $f\colon X\morphism Y$ a morphism of schemes and $\Ff$ a quasi-coherent $\Oo_X$-module. Then $\Ff$ is called \defemph{flat over $\Oo_Y$} if the following equivalent conditions hold.
	\begin{alphanumerate}
		\item For all affine open subsets $U\subseteq X$, $V\subseteq Y$ such that $f(U)\subseteq V$, $\Global(U,\Ff)$ is a flat $\Global(V,\Oo_Y)$-module.
		\item It is possible to cover $X$ with affine opens $U$ and $Y$ with affine opens $V$ such that the above holds.
		\item If $x\in X$ and $y\coloneqq f(x)$, then $\Mm_x$ is a flat $\Oo_{Y,y}$-module.
	\end{alphanumerate}
	In the case where $\Oo_X$ itself is flat over $\Oo_Y$, the morphism $f$ is called a \defemph{flat morphism}.
\end{defprop}
\begin{rem}
	\begin{alphanumerate}
		\item The property of being a flat morphism is local on source and target and stable under composition and base-change. That is, if $f\colon X\morphism Y$ is flat and $Y'\morphism Y$ is any morphism, then the base change 
		\begin{align*}
			f'\colon X\times_YY'\morphism Y'
		\end{align*}
		is flat again.
		\item When $f$ is flat, the pullback functor $f^*\colon \cat{Mod}_{\Oo_X}\morphism\cat{Mod}_{\Oo_Y}$ is exact.
	\end{alphanumerate}
\end{rem}
\begin{prop}[Flat base change]\label{prop:FlatBaseChange}
	Consider the following pullback diagram of morphisms of schemes
	\begin{equation*}
		\begin{tikzcd}
			X'\rar["f'"]\dar["g'", swap]\drar[pullback] & Y'\dar["g"]\\
			X\rar["f"] & Y
		\end{tikzcd}\,,
	\end{equation*}
	where $f$ is quasi-compact separated and $g$ is flat. Let $\Ff$ be a quasi-coherent $\Oo_X$-module.
	\begin{alphanumerate}
		\item Assume $Y=\Spec A$ and $Y=\Spec A'$ are affine (so $A'$ is a flat $A$-algebra). Then there is a natural isomorphism
		\begin{equation*}
			H^i(X,\Ff)\otimes_AA'\isomorphism H^i(X',g'^*\Ff) \quad\text{for all }i\geq 0\,.
		\end{equation*}
		\item For arbitrary $Y$ and $Y'$ there is a natural isomorphism
		\begin{equation*}
			g^*R^if_*\Ff\isomorphism R^if'_*(g'^*\Ff)\quad\text{for all }i\geq 0\,.
		\end{equation*}
	\end{alphanumerate}
\end{prop}
\begin{proof}[Sketch of a proof]
	Note that the cohomology of quasi-coherent sheaves on quasi-compact separated schemes can be computed as the \v Cech cohomology of an affine open cover. This easily shows \itememph{a}. Part~\itememph{b} can be checked locally, hence it can be reduced to \itememph{a}. For more details, check out \cite[Subsection~2.1.1]{jacobians}.
\end{proof}
\begin{rem*}
	\cref{prop:FlatBaseChange} already holds if $f$ is quasi-compact and quasi-separated (but in this case \v Cech cohomology no longer computes sheaf cohomology). To prove this, one uses the \v Cech-to-derived spectral sequence to reduce the quasi-separated case to the separated case (check out \cite[\stackstag{02KH}]{stacks-project} for details).
\end{rem*}
\begin{defi}
	A morphism $f\colon X\morphism Y$ is called \emph{faithfully flat} if it is flat and surjective (as a map on underlying sets).
\end{defi}
Before we give the next definition, let's fix the following notation: we denote by
\begin{align*}
	p_i\colon X\times_YX&\morphism X\,,\\
	\quad q_i\colon X\times_YX\times_YX&\morphism X\,,\\
	\quad q_{k,l}\colon X\times_YX\times_YX&\morphism X\times_YX
\end{align*}
the canonical projections to the $i\ordinalth$ factor, to the $j\ordinalth$ factor, and to the $k\ordinalth$ and $l\ordinalth$ factor respectively. Here $i\in \{1,2\}$ and $j,k,l\in\{1,2,3\}$.
\begin{defi}\label{def:descent}
	Let $f\colon X\morphism Y$ be a morphism of schemes. A \defemph{descent datum} for $f$ is a pair $(\Ff,\mu)$, where $\Ff$ is a quasi-coherent $\Oo_X$-module and $\mu$ is an isomorphism
	\begin{equation*}
		\mu\colon p_1^*\Ff\isomorphism p_2^*\Ff\,,
	\end{equation*}
	such that the following diagram commutes:
	\begin{equation}\label{diag:cocycle}
		\begin{tikzcd}
			q_1^*\Ff \drar[iso,"q_{1,3}^*(\mu)"{swap}]\ar[rr,iso,"q_{1,2}^*(\mu)"{swap}]& & q_2^*\Ff\dlar[iso,"q_{2,3}^*(\mu)"]\\
			& q_3^*\Ff &
		\end{tikzcd}\,.
	\end{equation}
	A \defemph{morphism of descent data} $\phi\colon (\Ff,\mu)\morphism(\Ff',\mu')$ is a morphism of $\Oo_X$-modules $\phi\colon \Ff\morphism\Ff'$ such that the diagram
	\begin{equation*}
		\begin{tikzcd}
			p_1^*\Ff\rar[iso,"\mu"{swap}]\dar["p_1^*(\phi)"{swap}] & p_2^*\Ff\dar["p_2^*(\phi)"]\\
			p_1^*\Ff'\rar[iso,"\mu'"{swap}]& p_2^*\Ff'
		\end{tikzcd}
	\end{equation*}
	commutes. One thus obtains a \defemph{category of descent data} for $f$, which is denoted $\cat{Desc}_{X/Y}$.
\end{defi}
\begin{rem*}
	You might have seen a different definition of descent data, which, instead of a single morphism $f\colon X\morphism Y$ and a single $\Ff$, considers a family of morphisms $\{X_i\morphism Y\}_{i\in I}$ and for each $i\in I$ an $\Oo_{X_i}$-module $\Ff_i$. For example, this is the definition used in \cite[\stackstag{023A}]{stacks-project}. On taking $X=\coprod_{i\in I}X_i$ this definition becomes equivalent to \cref{def:descent}. Under this equivalence, \cref{diag:cocycle} becomes the infamous \emph{cocycle condition}.
\end{rem*}
\begin{rem}\label{rem:descentFunctor}
	\begin{alphanumerate}
		\item The notion of a \emph{descent datum} can be defined in a purely abstract way, as soon as one has suitable \enquote{pullback functors} $f^*$. The abstract framework to do are \defemph{fibred categories}. See \cite[Exposé~VI]{sga1}.
		\item There is a functor $f^*\colon \cat{QCoh}_{\Oo_Y}\morphism\cat{Desc}_{X/Y}$ that assigns to a quasi-coherent $\Oo_Y$-module $\Gg$ the pair $(f^*\Gg,\mu_\Gg)$, where $\mu_\Gg$ is the canonical isomorphism
		\begin{equation*}
			\mu_\Gg\colon p_1^*f^*\Gg\isomorphism(fp_1)^*\Gg=(fp_2)^*\isomorphism p_2^*f^*\Gg\,.
		\end{equation*}
	\end{alphanumerate}
\end{rem}
\begin{prop}
	If $f\colon X\morphism Y$ is faithfully flat and quasi-compact (which we abbreviate as \enquote{fpqc} in the following, from French \enquote{fidélement plat et quasi-compact}), then the functor $f^*\colon \cat{QCoh}_{\Oo_Y}\morphism \cat{Desc}_{X/Y}$ from \cref{rem:descentFunctor}\itememph{b} is an equivalence of categories.
\end{prop}
\begin{proof}[Sketch of a proof]
	The proof consists of two essentially independent steps and a third step that combines the first two. Step~1 is to prove the assertion under the assumption that $f$ has a section $\sigma\colon Y\morphism X$ (this is pretty much straightforward). Step~2 is to construct a right-adjoint $R\colon \cat{Desc}_{X/Y}\morphism \cat{QCoh}_{\Oo_Y}$ of $f^*$.\footnote{Professor Franke emphasizes that this should be in every mathematicians bag of tricks: if you are to show that some functor is an equivalence, look for a right- or left-adjoint!}
	
	In Step~3 we show that $R$ (and thus $f^*$) is an equivalence of categories. This boils down to checking that unit and counit of the adjunction are natural isomorphisms. However, a map being an isomorphism can be checked after faithfully flat base change. Base-changing by $f$ itself, we end up in a situation where a section $\sigma$ exists---the diagonal $\Delta\colon X\morphism X\times_YX$. So Step~1 can be applied, which concludes the proof. For more details check out \cite[Theorem~7]{jacobians}.
\end{proof}
\begin{cor}\label{cor:fpqcEqualizer}
	\lecture[Properties of fpqc morphisms. Grothendieck topologies.]{2019-10-21}
	If $f\colon X\morphism Y$ is fpqc, then for all open subset $U\subseteq Y$ we have a natural isomorphism
	\begin{equation*}
		\Global(U,\Oo_Y)\isomorphism\left\{\lambda\in \Global(f^{-1}(U),\Oo_X)\st p_1^*\lambda =p_2^*\lambda\text{ in }\Global(p^{-1}(U),\Oo_{X\times_YX})\right\}\,.
	\end{equation*}
	Here, $p\colon X\times_YX\morphism Y$ denotes the natural morphism (and $p=fp_1=fp_2$).
\end{cor}
At this point, Professor Franke recalls the notion of mono-/epimorphism and their \defemph{effective} variants. We refer to \cite[Appendix~A.1]{alggeo2} for the relevant definitions and to \cite[Subsection~1.3.1]{alggeo1} for a construction of equalizers in the category of schemes.
\begin{prop}\label{prop:fpqcEffectiveEpi}
	An fpqc morphism is an effective epimorphism in the category of schemes.
\end{prop}
\begin{proof}[Sketch of a proof]
	One first shows that $Y$ carries the quotient topology with respect to $X$. To prove this, use \cite[Exposé~VIII Théorème~4.1]{sga1}. Alternatively you can look up the proof in \cite[Proposition~2.5.3]{jacobians}. This shows the topological part of the assertion. For the algebraic part, use \cref{cor:fpqcEqualizer}.
	
	If you are looking for a more detailed proof than this extremely brief sketch, check out \cite[Corollary~2.6.2]{jacobians}.
\end{proof}
\begin{prop}\label{prop:ppfOpen}
	If $f\colon X\morphism Y$ is flat a morphism of locally finite type between locally noetherian schemes, then $f$ is an open map on underlying topological spaces.
\end{prop}
\begin{proof*}
	See \cite[Corollary~2.5.1]{jacobians}.
\end{proof*}
\begin{rem*}
	One can generalize \cref{prop:ppfOpen} to flat morphisms of \emph{locally finite presentation} between arbitrary (i.e.\ not necessarily locally noetherian) schemes. The key idea in the proof is an ingenious trick that reduces
	everything to the noetherian case. You can find a very nice exposition of this in Akhil Mathews
	blog, see \url{https://amathew.wordpress.com/2010/12/26/}!
\end{rem*}

\section{Grothendieck Topologies, the fpqc Topology, and related ones}
You might have already seen Grothendieck topologies defined via \defemph{covering families}. However, this a priori only gives a Grothendieck \emph{pre}topology, as one has to pass to equivalence classes afterwards. Thus, Professor Franke prefers the later approach via \defemph{sieves} (which he attributes to Giraud). Of course, both approaches are equivalent.
\begin{defi}
	Let $\Cc$ be a category. A \defemph{sieve} over an object $x\in \Cc$ is a class $\Ss$ of morphisms $u\morphism x$ such that whenever $(u\morphism x)\in \Ss$, then also $(v\morphism u\morphism x)\in\Ss$ for all $(v\morphism u)\in\Hom_\Cc(x,y)$.
\end{defi}
\begin{exm}
	Let $\Cc$ be the partially ordered set of open subsets of a topological space $X$, and $\Uu=\{U_i\}_{i\in I}$ be any family of open subsets (not necessarily covering $X$). Then
	\begin{equation*}
		\Ss=\left\{V\subseteq X\st V\text{ is open and there exists an }i\in I\text{ such that }V\subseteq U_i\right\}
	\end{equation*}
	is a sieve over $X\in \Cc$.
\end{exm}
\begin{defi}\label{def:GrothendieckTopo}
	A \defemph{Grothendieck topology} on a category $\Cc$ is given by specifying a collection $ C_x$ of sieves over $x$ for all $x\in \Cc$, called the \defemph{covering sieves}, which are subject to the following conditions.
	\begin{alphanumerate}
		\item The all-sieve (containing all morphisms $u\morphism x$) is a covering sieve of $x$.
		\item If $p\colon y\morphism x$ is a morphism in $\Cc$ and $\Ss\in C_x$ a covering sieve of $x$, then $p^*\Ss\in C_y$ is a covering sieve of $y$. Here, we define
		\begin{equation*}
			p^*\Ss=\left\{u\to y\st (u\to y\morphism[p]x)\in \Ss\right\}\,.
		\end{equation*}
		\item Let $\Ss$, $\Tt$ be sieves over $x$ such that $\Ss\in  C_x$. If for all $(p\colon y\morphism x)\in \Ss$ we have $p^*\Tt\in C_y$, then also $\Tt\in C_x$.
	\end{alphanumerate}
	A category $\Cc$ together with a fixed Grothendieck topology is called a \defemph{site}.
\end{defi}
\begin{rem}
	\begin{alphanumerate}
		\item One can interpret \cref{def:GrothendieckTopo}\itememph{c} as saying that being a covering is a local property (and can thus be tested on another covering).
		\item If $\Tt\in C_x$ and $\Ss\supseteq \Tt$, then also $\Ss\in C_x$ (as one would expect that if a subsieve of $\Ss$ is already sufficient to \enquote{cover} the element $x$, then a fortiori the same is true for the whole sieve $\Ss$). Indeed, the condition in \cref{def:GrothendieckTopo}\itememph{c} is then trivially satisfied, because if $(p\colon y\morphism x)\in \Tt$, then $p^*\Ss\supseteq p^*\Tt$. However, the right-hand side is the all-sieve in this case, hence so is the left-hand side.
	\end{alphanumerate}
\end{rem}
\begin{exm}
	Let $\Cc$ be again the partially ordered set of open subsets of a topological space $X$. Define $\Ss\in C_U$ iff $U=\bigcup_{(V\subseteq U)\in\Ss}V$. Then this defines a Grothendieck topology on the category $\Cc$.
\end{exm}
\begin{con}
	Let $S$ be a scheme. We make the category $\cat{Sch}/S$ of schemes over $S$ into a site $(\cat{Sch}/S)_\Zar$ by defining a Grothendieck topology as follows: A sieve $\Ss$ over some $S$-scheme $X$ is a covering sieve iff there is a Zariski-open covering $X=\bigcup_{i\in I}U_i$ such that all morphisms $Y\morphism X$ that factor over some $U_i\monomorphism X$ belong to $\Ss$.
\end{con}
The next thing to do is to introduce the fpqc topology and the fppf topology on $\cat{Sch}/S$, and then finally the étale topology. But before we do this, we prove the very abstract and technical \cref{prop:technicalAF}, which in the end will save us some work in proving that certain equivalent descriptions of our topologies are indeed equivalent.

\begin{rem*}\label{rem*:clarificationsForTechnicalAF}
	Before we dive into the horrible technical nightmare of \cref{prop:technicalAF}, let us motivate some of the things that happen there. First of all, the three topologies we are going to look at are all somehow generated by a certain class of morphisms: the fpqc morphisms, the fppf morphisms, and the étale morphisms respectively. This role is played by $\Cc$ in \cref{prop:technicalAF}. In the first two cases, $\Cc_\fpqc$ and $\Cc_\fppf$ are precisely the classes of fpqc and fppf morphisms. For the étale topology, we would take $\Cc_\et$ to be the class of étale and surjective morphisms.
	
	Second, our topologies are, of course, generated by sieves. This is what $\Ss$ stands for in \cref{prop:technicalAF}. The purpose of said proposition is to establish two equivalent characterizations of these sieves---essentially, we will show that everything can be chosen affine if we wish to.
	
	Third, it might become reasonable to define our topology only on a nice subcategory of $\cat{Sch}/S$: for example, on the full subcategory of locally noetherian $S$-schemes. However, this might get us into trouble. The problem is that if we use \cref{def:GrothendieckTopo}\itememph{b} to its full potential, then it suddenly spawns fibre products. But fibre products need not preserve noetherianness. For example, $\Spec \IC$ and $\Spec \IQ$ are perfectly fine noetherian schemes, but $\Spec \IC\times_{\Spec \IQ}\Spec \IC\cong \Spec (\IC\otimes_\IQ\IC)$ is a non-noetherian abomination. That's where the property $\Pp$ comes in (and in particular, that's why we need $\Pp$ to be preserved under morphisms in $\Cc$). It turns out that it's possible to restrict the étale and fppf topology to the full subcategory of locally noetherian $S$-schemes, so in this case $\Pp_\et$ and $\Pp_\fppf$ could be the property of being locally noetherian. In the fpqc case however, such a restriction is impossible. So $\Pp_\fpqc$ will necessarily be the empty property (that is satisfied by every scheme) in this case. Of course, $\Pp_\et$ and $\Pp_\fppf$ can also be chosen to be the empty property.
\end{rem*}
\begin{prop}\label{prop:technicalAF}
	Let $S$ be a scheme and $\Cc$ a class of quasi-compact morphisms of $S$-schemes, which has the following properties.
	\begin{alphanumerate}
		\item $\Cc$ is closed under composition, finite coproducts, and base-change.
		\item If $U=\bigcup_{i=1}^nU_i$ is an affine open cover of an affine\footnote{This means that $U$ is affine, and an $S$-scheme, and \emph{not} that $U\morphism S$ is an affine morphism.} scheme $U$ over $S$, then the canonical morphism $\coprod_{i=1}^nU_i\morphism U$ is an element of $\Cc$.\footnote{Note that in the lecture we also had the requirement that $\id_U$ is an element of $\Cc$. However, this trivially follows from \itememph{b}.}
	\end{alphanumerate}
	Now let $\Pp$ be a local property of $S$-schemes, such that if $X'\morphism X$ is a morphism in $\Cc$ and $X$ has property $\Pp$, then $X'$ has $\Pp$ as well.\footnote{In the lecture we required $\Pp$ to be \enquote{stable under base change \ldots}, but didn't define what this was supposed to mean for a property of schemes (rather than morphisms). This is (at least equivalent to) what Franke had in mind.} Let $(\cat{Sch}/S)^\Pp\subseteq \cat{Sch}/S$ be the full subcategory of all objects with $\Pp$. Then for an object $X\in(\cat{Sch}/S)^\Pp$ and any sieve $\Ss$ over $X$, the following conditions on $\Ss$ are equivalent.
	\begin{numerate}
		\item There are an open cover $X=\bigcup_{i\in I}U_i$, together with finite sets $J_i$ for all $i\in I$, and morphisms $U_{i,j}\morphism U_i$ for all $j\in J_i$, such that all $U_{i,j}$ satisfy $\Pp$, the coproduct $\coprod_{j\in J_i}U_{i,j}\morphism U_i$ is in $\Cc$ for all $i\in I$, and all compositions $U_{i,j}\morphism U_i\morphism X$ are in $\Ss$.
		\item The same as \itememph{1}, but now all $U_i$ and $U_{i,j}$ are required to be affine.
	\end{numerate}
	Moreover, these sieves define a Grothendieck topology on $(\cat{Sch}/S)^\Pp$.
\end{prop}
\begin{proof}
	\lecture[The fpqc and the fppf topology. Sheaves on sites.]{2019-10-25}It's clear that \itememph{2} implies \itememph{1}. For the converse we basically need the observations that quasi-compact schemes admit finite affine open covers and that affine schemes are quasi-compact, together with the fact that all morphisms from $\Cc$ are quasi-compact by assumption. However, writing this up is quite a pain, so we leave it as an exercise.
	
	We are left to check the conditions for a Grothendieck topology on $(\cat{Sch}/S)^\Pp$. To see that the all-sieve is covering, take any affine open cover $X=\bigcup_{i\in I}U_i$, $J_i=\{i\}$ for all $i$ and $U_{i,i}=U_i$. Then $\bigcup_{j\in J_i}U_{i,j}\morphism U_i$ is the identity on $U_i$, which is in $\Cc$ by \itememph{b}. Also $U_{i,i}\morphism U_i\morphism X$ is obviously part of the all-sieve. This shows that the all-sieve is covering.
	
	Now let $\Ss$ be a sieve on $X$ satisfying the equivalent properties \itememph{1}, \itememph{2}. Let $p\colon Y\morphism X$ be any morphism in $(\cat{Sch}/S)^\Pp$. We need to show that $p^*\Ss$ satisfies the equivalent properties as well. To this end, let $X=\bigcup_{i\in I}U_i$, $J_i$ and $U_{i,j}$ for all $i\in I$, $j\in J_i$ witness the property \itememph{2} for $\Ss$. Now consider
	\begin{equation*}
		V_i=Y\times_XU_i\quad\text{and}\quad V_{i,j}=Y\times_XU_{i,j}\,.
	\end{equation*}
	Then the morphism $\coprod_{j\in J_i}V_{i,j}\morphism V_i$ is in $\Cc$ because it is a base change of $\coprod_{j\in J_i}U_{i,j}\morphism U_i$, which is in $\Cc$, and $\Cc$ is stable under base change by \itememph{a}. Moreover, the $V_{i,j}$ all satisfy $\Pp$. Indeed, since $\Pp$ is local, it suffices to show that $\coprod_{j\in J_i}V_{i,j}$ has $\Pp$, and since $\coprod_{j\in J_i}V_{i,j}\morphism V_i$ is in $\Cc$, it suffices to show that $V_i$ has $\Pp$ (by our assumption on $\Pp$ and $\Cc$). However, $V_i$ is an open subset of $Y$, which has $\Pp$, so $V_i$ has $\Pp$ as well since $\Pp$ is local. It remains to see $(V_{i,j}\morphism Y)\in p^*\Ss$. But the $V_{i,j}$ fit into pullback diagrams
	\begin{equation*}
		\begin{tikzcd}
			V_{i,j} \rar\dar\drar[pullback] & Y\dar["p"]\\
			U_{i,j}\rar & X
		\end{tikzcd}\,,
	\end{equation*}
	so $V_{i,j}\morphism Y\morphism X$ factors over a morphism in $\Ss$. Thus $(V_{i,j}\morphism Y)\in p^*\Ss$ holds by definition.
	
	Last but not least we prove locality of covering sieves. Let $\Ss\in C_X$ be a covering sieve of $X$ and let $U_i$, $J_i$ and $U_{i,j}$ witness \itememph{2} for $\Ss$. Let $\Tt$ be another sieve over $X$ such that $p^*\Tt\in C_Y$ for any $(p\colon Y\morphism X)\in \Ss$. In particular, we can apply this to $(\sigma_{i,j}\colon U_{i,j}\morphism X)\in\Ss$. Thus, there are an affine open cover $U_{i,j}=\bigcup_{k\in K_{i,j}}V_{i,j,k}$ and finite sets $L_{i,j,k}$ for all $k\in K_{i,j}$ together with morphisms $V_{i,j,k,l}\morphism V_{i,j,k}$, such that $\coprod_{l\in L_{i,j,k}}V_{i,j,k,l}\morphism V_{i,j,k}$ is in $\Cc$, all $V_{i,j,k,l}$ have $\Pp$, and $V_{i,j,k,l}\morphism U_{i,j}$ is an element of $\sigma_{i,j}^*\Tt$ (up to now that was just unraveling of definitions). Since the $U_{i,j}$ are affine, we may assume that the $K_{i,j}$ are finite sets as well. Thus
	\begin{equation*}
		\coprod_{j\in J_i}\coprod_{k\in K_{i,j}}\coprod_{l\in L_{i,j,k}}V_{i,j,k,l}\morphism U_i
	\end{equation*}
	is a finite coproduct. This morphism is also in $\Cc$, since it can be factored as
	\begin{equation*}
		\coprod_{j\in J_i}\coprod_{k\in K_{i,j}}\coprod_{l\in L_{i,j,k}}V_{i,j,k,l}\morphism \coprod_{j\in J_i}\coprod_{k\in K_{i,j}}V_{i,j,k}\morphism \coprod_{j\in J_i}U_{i,j}\morphism U_i\,.
	\end{equation*}
	The left-most arrow is in $\Cc$ since it is a finite coproduct of $\coprod_{l\in L_{i,j,k,l}}V_{i,j,k,l}\morphism V_{i,j,k}$, which is in $\Cc$ by assumption, and $\Cc$ is stable under finite coproducts by \itememph{a}. The middle arrow is in $\Cc$, because it is a finite coproduct of $\coprod_{k\in K_{i,j}}V_{i,j,k}\morphism U_{i,j}$, which are in $\Cc$ by \itememph{b}. Finally, the right-most arrow is in $\Cc$ by assumption. 
	
	This finally shows that $\Tt$ is a covering sieve of $X$. Thus, we indeed get a Grothendieck topology of $(\cat{Sch}/S)^\Pp$.
\end{proof}
\begin{rem}
	This can be found in the $4\ordinalth$ issue of the \emph{Séminaire de Géométrie Algébrique du Bois Marie (SGA)} publications. Professor Franke outlines the contents of the various SGAs.
	\begin{numerate}
		\item[{\cite{sga1}}] Flat descent, the étale fundamental group.
		\item[{\cite{sga2}}] Local cohomology.
		\item[{[SGA$_4$]}] This consists of three parts: in \cite{sga4.1}, \cite{sga4.2} the general theory of topoi and the étal topos of a scheme are introduced. The third part \cite{sga4.3} proves hard theorems in étale cohomology.
		\item[{\cite{sga4.5}}] This is a very good reference besides \cite{milne} and \cite{kiehlfreitag}. Especially the \enquote{Arcata} part is very recommendable.
		\item[{\cite{sga5}}] $\ell$-adic cohomology.
	\end{numerate}
	You should be able to read French though (\emph{author's note}: personal experience shows that Google Translate is usually sufficient).
\end{rem}
\begin{defi}\label{def:fpqc}
	\begin{alphanumerate}
		\item Let $\Pp_\fpqc$ be the trivial property and $\Cc_\fpqc$ be the class of fpqc morphisms. Then the Grothedieck topology constructed in \cref{prop:technicalAF} is called the \defemph{fpqc topology}. The corresponding site $(\cat{Sch}/S)_\fpqc$ is called the \defemph{big fpqc site}.
		\item Let $\Pp_\fppf$ be either the trivial property or $\Pp_\fppf=\left\{\text{locally noetherian schemes}\right\}$. Let $\Cc_\fppf$ be the class of faithfully flat and finitely presented morphisms. Then the Grothendieck topology from \cref{prop:technicalAF} is called the \defemph{fppf topology}. The corresponding site $(\cat{Sch}/S)_\fppf$ is called the \defemph{big fppf site}.
	\end{alphanumerate}
\end{defi}
\begin{rem}
	\begin{alphanumerate}
		\item We cannot choose $\Pp_\fpqc=\left\{\text{locally noetherian schemes}\right\}$. For example, take the counterexample from \cref{rem*:clarificationsForTechnicalAF}: $\Spec\IC\morphism \Spec\IQ$ is an fpqc morphism, hence so is its base change $\Spec(\IC\otimes_\IQ\IC)\morphism \Spec\IC$. However, $\IC\otimes_\IQ\IC$ is non-noetherian. 
		
		To see this, let $I$ be the kernel of the multiplication map $\IC\otimes_\IQ\IC\morphism \IC$. If $\IC\otimes_\IQ\IC$ was noetherian, then $I/I^2$ would be a finitely generated module over $(\IC\otimes_\IQ\IC)/I\cong \IC$. However, $I/I^2\cong \Omega_{\IC/\IQ}$, whose $\IC$-dimension is the cardinality of the continuum.
		\item However, this works for the fppf topology since being locally noetherian is preserved under finitely presented morphisms. The abbreviation fppf comes from French \enquote{fidélement plat et de présentation finie}. For fppf covering sieves, Professor Franke briefly mentioned some equivalent characterizations, which we summarize in the following lemma. 
	\end{alphanumerate}
\end{rem}
\begin{lem*}\label{lem*:fppf}
	Let $X$ be a scheme over $S$ and let $\Ss$ be a sieve over $X$. Then the following are equivalent:
	\begin{alphanumerate}
		\item $\Ss$ is an fppf-covering sieve.
		\item We find an affine open cover $X=\bigcup_{i\in I}U_i$ and fppf morphisms $V_i\morphism U_i$ such that $(V_i\morphism U_i\morphism X)\in \Ss$ for all $i\in I$.
		\item Same as \itememph{b}, but the $V_i\morphism U_i$ are quasi-finite in addition to being fppf.
	\end{alphanumerate}
\end{lem*}
\begin{proof}[Sketch of a proof\textup{*}]
	Clearly \itememph{c} implies \itememph{b} implies \itememph{a}. To see \itememph{a} $\Rightarrow$ \itememph{b}, the crucial thing to note is that if $X=\bigcup_{i\in I}U_i$, $K_i$, and $U_{i,j}$ are as in \cref{prop:technicalAF}\itememph{2}, then the $U_{i,j}\morphism U_i$ are open maps by \cref{prop:ppfOpen}. The rest is purely formal.
	
	However, \itememph{b} $\Rightarrow$ \itememph{c} is not so easy to see. This needs Cohen--Macaulay properties and we refer to \cite[\stackstag{056X}]{stacks-project}.
\end{proof}
Having defined Grothendieck topologies and seen some examples, the next step is to define sheaves on sites.
\begin{defi}\label{def:sheaf}
	Let $\Cc$ be an arbitrary category.
	\begin{alphanumerate}
		\item A \defemph{presheaf} on $\Cc$ (with values in sets, groups, rings, \ldots) is a functor from $\Cc^\op$ to the categories of groups, sets, rings, \ldots.
		\item Suppose $\Cc$ is equipped with a Grothendieck topology defined by collections $C_x$ of covering sieves for all $x\in \Cc$. Then a presheaf $\Ff$ is called a \defemph{sheaf} if for all $x\in \Cc$ and all $\Ss\in C_x$ the following condition holds: the morphisms $v^*\colon \Ff(x)\morphism\Ff(u)$ for $(v\colon u\morphism x)\in\Ss$ induce a bijection
		\begin{equation*}
			\Ff(x)\isomorphism \limit_{v\in\Ss}\Ff(u)
		\end{equation*}
	\end{alphanumerate}
\end{defi}
\begin{rem}
	\begin{alphanumerate}
		\item If only injectivity of the above map is assumed, the presheaf $\Ff$ is called \defemph{separated}.
		\item If $\Ff$ has values in sets, groups, rings, \ldots, then the limit on the right-hand side of \cref{def:sheaf}\itememph{b} can be explicitly described as follows:
		\begin{equation*}
			\limit_{v\in \Ss}\Ff(u)=\left\{(f_v)_{v\in \Ss}\in\prod_{v\in\Ss}\Ff(u)\st \begin{tabular}{c}
				if $(v\colon u\rightarrow x),(v'\colon u'\rightarrow x)\in\Ss$ and\\
				 $\pi\colon u\rightarrow u'$
				 is any morphism such\\
				 that $v=v'\pi$, then $f_v=\pi^*f_{v'}$
			\end{tabular}\right\}
		\end{equation*}
	\end{alphanumerate}
\end{rem}
\begin{prop}\label{prop:fpqcSheaf}
	For the Grothendieck topologies of \cref{prop:technicalAF}, a presheaf $\Ff$ on $(\cat{Sch}/S)^\Pp$ is a sheaf iff its restriction to Zariski-open subsets of any $X\in (\cat{Sch}/S)^\Pp$ is an ordinary sheaf on $X$, and for every morphism $(X'\morphism X)\in\Cc$ the sequence
	\begin{equation*}
		\Ff(X)\morphism\Ff(X')\doublemorphism[p_1^*][p_2^*]\Ff(X'\times_XX')
	\end{equation*}
	establishes the left arrow as an equalizer of the double arrow on the right. Here, we denote by $p_1,p_2\colon X'\times_XX'\morphism X'$ the canonical projections.
\end{prop}
\begin{proof}[Sketch of a proof*]
	Let's first assume that $\Ff$ is a sheaf. Since every sieve over $X$ generated by a Zariski-open cover is indeed a covering sieve (since the condition from \cref{prop:technicalAF}\itememph{2} is obviously satisfied), we see that $\Ff$ restricts to a Zariski-sheaf on $X$. Moreover, if the morphism $X'\morphism X$ is in $\Cc$, then the sieve $\Ss$ of all morphisms $v\colon U\morphism X$ that factor through $X'$ is a covering sieve. Indeed, the condition from \cref{prop:technicalAF}\itememph{1} is clearly satisfied. Hence
	\begin{equation*}
		\Ff(X)\isomorphism\limit_{v\in \Ss}\Ff(U)\,.
	\end{equation*}
	Now every $\Ff(X)\morphism \Ff(U)$ factors through $\Ff(X)\morphism\Ff(X')$. Moreover, if $U\morphism X$ factors in two different ways through $X'$, then this induces a unique map $U\morphism X'\times_XX'$, and thus a map $\Ff(X'\times_XX')\morphism\Ff(U)$. If you think about it, this shows that
	\begin{equation*}
		\Ff(X')\doublemorphism[p_1^*][p_2^*]\Ff(X'\times_XX')
	\end{equation*}
	is a coinitial subdiagram of the diagram given by $\{\Ff(U)\}_{v\in\Ss}$. Hence the limit over the latter diagram is the same as the equalizer of $p_1^*$ and $p_2^*$, so $\Ff(X)$ mapping isomorphically to that limit means that $\Ff(X)$ is said equalizer, as claimed.
	
	Now for the converse. Assume that $\Ff$ is a presheaf with the required property and let $\Ss$ be a covering sieve over $X$. Let $X=\bigcup_{i\in I}U_i$, $J_i$, and $U_{i,j}\morphism U_i$ be the associated data. For all $i\in I$, let $\Ss_i\subseteq \Ss$ be the subsieve of all morphisms $(v\colon U\morphism X)$ that factor through some $U_{i,j}$. We first show that we have an isomorphism
	\begin{equation*}
		\Ff(U_i)\isomorphism \limit_{v\in\Ss_i}\Ff(U)
	\end{equation*}
	To see this, note that the subdiagram spanned by all $\Ff(U_{i,j})$ and all $\Ff(U_{i,j}\times_X U_{i,k})$ for $j,k\in J_i$, together with the projection morphisms between them, is a coinitial subdiagram of the whole $\{\Ff(U)\}_{v\in\Ss_i}$. Indeed, that's basically the same argument as in the proof above (if $U\morphism X$ factors through $U_{i,j}$ and $U_{i,k}$, then also through $U_{i,j}\times U_{i,k}$). So we may as well take the limit over that subdiagram. But taking into account that $\Ff$ takes disjoint unions to products (because it restricts to an ordinary Zariski sheaf), the limit over said subdiagram is given by the equalizer of
	\begin{equation*}
		\Ff\Bigg(\coprod_{j\in J_i}U_{i,j}\Bigg)\doublemorphism[p_1^*][p_2^*]\Ff\Bigg(\coprod_{j\in J_i}U_{i,j}\times_X\coprod_{k\in J_i}U_{i,k}\Bigg)\,.
	\end{equation*}
	Since $\coprod_{j\in J_i}U_{i,j}\morphism U_i$ is in $\Cc$, our assumption on $\Ff$ shows that the above equalizer is just $\Ff(U_i)$, as claimed.
	
	For $i,i'\in I$ let $\Ss_{i,i'}\subseteq \Ss$ be the subsieve of all $U\morphism X$ that factor through some $U_{i,j}\times_XU_{i',j'}$ for $j\in J_i$, $j'\in J_{i'}$. In the same way as above we find an isomorphism
	\begin{equation*}
		\Ff(U_i\times_XU_{i'})\isomorphism \limit_{v\in\Ss_{i,i'}}\Ff(U)\,.
	\end{equation*}
	Now let $\Ss'\subseteq \Ss$ be the subsieve of all $U\morphism X$ that factor through $U_{i,j}$ for some $i\in I$, $j\in J_i$. By the above considerations, we find that the limit over the diagram $\{\Ff(U)\}_{v\in\Ss'}$ is the same as the limit over
	\begin{align*}
		\prod_{i\in I}\Ff(U_i)\doublemorphism[p_1^*][p_2^*]\prod_{i,i'\in I}\Ff(U_i\times_XU_{i'})\,,
	\end{align*}
	which is just $\Ff(X)$ by the usual Zariski sheaf axiom for $X$. So it remains to show that replacing $\Ss$ by $\Ss'$ doesn't change the limit. To see this, let $p\colon Y\morphism X$ be an element of $\Ss$ and let $V_i=Y\times_XU_i$, $V_{i,j}=Y\times_XU_{i,j}$. Repeating the above steps with $Y$ instead of $X$, we see that $\Ff(Y)$ is already determined by the $\Ff(V_{i,j})$. However, each $V_{i,j}\morphism X$ factors over $U_{i,j}$, i.e., lies in $\Ss'$. This shows that indeed it doesn't matter whether the limit is taken over all $v\in \Ss$ are all $v\in \Ss'$.
\end{proof}

\begin{exm}
	Let $F$ be any $S$-scheme. Then $\Hom_{\cat{Sch}/S}(-,F)\colon (\cat{Sch}/S)^\op\morphism\cat{Set}$ is a presheaf on $\cat{Sch}/S$. We claim that it is actually an fpqc sheaf, i.e., a sheaf on the site $(\cat{Sch}/S)_\fpqc$ (and then the same is true for $(\cat{Sch}/S)_\fppf$).
	
	To prove this, we use \cref{prop:fpqcSheaf} of course. It is easy to see that $\Hom_{\cat{Sch}/S}(-,F)$ is a sheaf in the Zariski topology (since morphisms can be glued). So it's left to check the second condition, i.e.,
	\begin{equation*}
		\Hom_{\cat{Sch}/S}(X,F)\isomorphism\left\{\phi\in\Hom_{\cat{Sch}/S}(X',F)\st \phi p_1=\phi p_2\text{ in }\Hom_{\cat{Sch}/S}(X'\times_XX',F)\right\}
	\end{equation*}
	whenever $X'\morphism X$ is an fpqc morphism. For fixed $X'\morphism X$, the condition that this holds for all $F$ is precisely the definition for $X'\morphism X$ being the coequalizer
	\begin{equation*}
		\Coeq\Big(X'\times_XX'\doublemorphism[p_1][p_2]X'\Big)\,.
	\end{equation*}
	But then again this is equivalent to $X'\morphism X$ being an effective epimorphism, which we proved in \cref{prop:fpqcEffectiveEpi}.
\end{exm}
\section{Étale Morphisms}
\lecture[Unramified and étale morphisms: definitions, basic properties. Étale coverings. Pullback of Kähler differentials under étale morphisms.]{2019-10-28}Most of the results of this section have already been featured in Professor Franke's lecture on Jacobians of curves. So check out \cite[Section~2.7]{jacobians} for more detailed proofs.
\begin{prop}\label{prop:unramified}
	Let $f\colon X\morphism Y$ be a morphism of locally finite type between arbitrary schemes. Then the following conditions are equivalent for all points $x\in X$:
	\begin{alphanumerate}
		\item We have $(\Omega_{X/Y})_x=0$.
		\item The diagonal $\Delta_{X/Y}\colon X\morphism X\times_YX$ is an open embedding on some neighbourhood of $x$.
		\item If $y=f(x)$, then $\mm_{X,x}=\mm_{Y,y}\Oo_{X,x}$, and the extension $\kappa(x)/\kappa(y)$ on residue fields is separable.
	\end{alphanumerate}
	If $f$ is separated (so that $\Delta_{X/Y}$ is a closed embedding), these are moreover equivalent to
	\begin{alphanumerate}\setcounter{enumi}{3}
		\item If $\Jj\subseteq \Oo_{X\times_YX}$ is the sheaf of ideals defining the closed embedding $\Delta_{X/Y}$, then $\Jj_w=0$ for $w=\Delta_{X/Y}(x)$.
	\end{alphanumerate}
\end{prop}
\begin{proof}[Sketch of a proof]
	Since the assertion is local, we may assume $X=\Spec B$ and $Y=\Spec A$. In this case, $f$ is automatically separated. Then \itememph{b} $\Leftrightarrow$ \itememph{d} follows basically from the fact that $\Jj$ is locally finitely generated (see \cref{rem*:noNoetherian} below). The equivalence with \itememph{a} follows from the following \cref{prop:Kahler} as follows. If $\Jj$ vanishes at $w$, then so does $\Omega_{X/Y}\cong \Delta_{X/Y}^*(\Jj/\Jj^2)$ at $x$. Conversely, if $(\Omega_{X/Y})_x=0$, then $(\Jj/\Jj^2)_w=0$, hence $\Jj_w=\Jj_w^2$, hence $\Jj_w=0$ by Nakayama. We won't prove the equivalence with \itememph{c} here, but you can find it in \cite[Lemma~2.7.2]{jacobians}.
\end{proof}
\begin{rem*}\label{rem*:noNoetherian}
	In the lecture we had the assumption that $X$ and $Y$ be locally noetherian, but in fact this is not needed! The only critical point is the application of the Nakayama lemma, which needs that $\Jj$ is locally finitely generated. But if $B$ is of finite type over $A$, with $A$-algebra generators $b_1,\dotsc,b_n$ say, then the kernel of $B\otimes_AB\morphism B$ is generated by the finitely many elements $b_i\otimes 1-1\otimes b_i$.
	
	I believe Professor Franke adds these noetherianness assumptions for simplicity. In these notes I try to make things work in the non-noetherian cases as well whenever possible.
\end{rem*}
\begin{prop}\label{prop:Kahler}
	Let $f\colon X\morphism Y$ be a separated morphism of schemes and let $\Jj\subseteq \Oo_{X\times_YX}$ the sheaf of ideals defined by the closed embedding $\Delta_{X/Y}\colon X\morphism X\times_YX$. Then we have canonical isomorphisms
	\begin{equation*}
		\Omega_{X/Y}\cong \Delta_{X/Y}^*\Jj\cong \Delta_{X/Y}^*(\Jj/\Jj^2)\,.
	\end{equation*}
\end{prop}
\begin{proof}[Sketch of a proof]
	The assertion is local on $X$ and $Y$, hence it can be reduced to the affine case, where it follows from \cref{lem:Kahler} below.
\end{proof}
\begin{lem}\label{lem:Kahler}
	Let $B$ be an algebra over $A$. Let $I$ be the kernel of the multiplication map $B\otimes_AB\morphism B$. Then, canonically, 
	\begin{equation*}
		I/I^2\cong \Omega_{B/A}\,.
	\end{equation*}
\end{lem}
\begin{proof}[Sketch of a proof]
In fact, for any $B$-module $M$ we obtain a canonical bijection
\begin{equation*}
\Hom_B(I/I^2,M)\isomorphism \Der_A(B,M)\,,
\end{equation*}
sending a morphism $\phi\colon I/I^2\morphism M$ to the $A$-linear derivation $d\colon B\morphism M$ defined by $d(b)=\phi(1\otimes b - b\otimes 1)$, and conversely a derivation $d$ to a morphism $\phi$ defined by $\phi(b_1\otimes b_2)=b_1d(b_2)$. Lots of things are to check here actually, but we leave it like that since this is also a pretty well-known fact.
\end{proof}
\begin{defi}\label{def:etale}
	Let $f\colon X\morphism Y$ be a morphism of locally finite type between arbitrary schemes.
	\begin{alphanumerate}
		\item If the equivalent properties of \cref{prop:unramified} are satisfied, the morphism $f$ is called \defemph{unramified at $x$}. If $f$ is unramified at every $x\in X$, we call $f$ \defemph{unramified}.
		\item Suppose $f$ is of locally finite presentation and flat at $x$. Then $f$ is called \defemph{étale at $x$}. If $f$ is étale at every $x\in X$, we call $f$ \defemph{étale}.
		\item The morphism $f$ is called an \defemph{étale covering} if it is finite and étale.
	\end{alphanumerate}
\end{defi}
\begin{fact}\label{fact:etaleProperties}
	Let $f\colon X\morphism Y$ and $g\colon Y\morphism Z$ be morphisms of schemes.
	\begin{alphanumerate}
		\item The class of étale morphisms is stable under composition and base change, and being étale is a local property on source and target. The same holds for unramified morphisms.
		\item If $gf$ is étale and $g$ is unramified, then $f$ is étale.
		\item If $f$ is étale and a closed embedding, then $f$ is also an open embedding. In fact, this holds already when $f$ is flat and locally of finite presentation.
	\end{alphanumerate}
\end{fact}
\begin{proof}
	Part~\itememph{a}. It is clear from the definitions that being unramified is local on source and target. Moreover, from \cref{prop:unramified}\itememph{a} and the base change properties of Kähler differentials it is evident that being unramified is preserved under base change, and from \cref{prop:unramified}\itememph{c} we easily see that compositions of unramified morphisms are unramified again. Then the same follows for étale morphisms, since flat morphisms also have all these properties. This shows \itememph{a}.
	
	Part~\itememph{b}. We factor $f$ as
	\begin{equation*}
		\begin{tikzcd}
			X\rar["f"]\drar["{j=(\id_X,f)}"{swap}]& Y\\
			& X\times_ZY\uar["p"{swap}]
		\end{tikzcd}\,,
	\end{equation*}
	where $p$ is étale since it is a base change of $gf\colon X\morphism Z$. By \cref{prop:unramified}\itememph{b}, the diagonal $\Delta_{Y/Z}\colon Y\morphism Y\times_ZY$ is an open embedding. Hence so is $j$, since it is the base change of $\Delta_{X/Y}$ with respect to $(f,\id_Y)\colon X\times_YZ\morphism Y\times_ZY$. Hence $j$ is étale too (see \cref{exm:embeddings}\itememph{b} below), which by \itememph{a} proves that $f$ is étale as well.
	
	Part~\itememph{c}. Suppose $f$ is a flat closed embedding of locally finite presentation. Locally, $f$ looks like $\Spec A/I\monomorphism \Spec A$ for some finitely generated ideal $I\subseteq A$. As $A/I$ is flat over $A$, we have $I\otimes_AA/I\cong IA/I$. But the right-hand side is $0$, hence $I/I^2=0$. As $I$ is finitely generated, this implies $I_\pp=0$ for all prime ideals $\pp\in V(I)$ by Nakayama. But then for all such $\pp$ there is an $g\notin\pp$ such that already $I_g=0$. Hence $D(g)\subseteq V(I)$, proving that $\Spec A/I\monomorphism\Spec A$ is also an open embedding.
\end{proof}
\begin{fact}\label{fact:etaleFibres}
	Let $f\colon X\morphism Y$ be a morphism of locally finite type between arbitrary schemes. Let $x\in X$, $y=f(x)$. Then $f$ is unramified at $x$ iff the fibre $f^{-1}\{y\}$ is unramified at $x$ over $\kappa(y)$. If, in addition, $f$ is flat at $x$, then it is étale at $x$ iff $f^{-1}\{y\}\morphism\Spec \kappa(y)$ is étale at $x$.
\end{fact}
\begin{proof}
	The residue fields of $x$ and $y$ don't change upon passing to $f^{-1}\{y\}\morphism\Spec\kappa(y)$, and likewise the condition $\Oo_{X,x}/\mm_{Y,y}\Oo_{X,x}\cong \kappa(x)$ is preserved. Hence \cref{prop:unramified}\itememph{c} shows that $f$ is unramified at $x$ iff $f^{-1}\{y\}\morphism\Spec\kappa(y)$ is unramified at $x$. Since flatness is preserved under base change, the second assertion follows at once.
\end{proof}
\begin{exm}\label{exm:embeddings}
	\begin{alphanumerate}
		\item Let $k$ be a field and $f\colon X\morphism \Spec k$ a morphism of finite type. Then $f$ is étale at $x\in X$ iff $\Oo_{X,x}$ is a finite separable field extension of $k$. This is a straightforward consequence of \cref{prop:unramified}\itememph{c}.
		\item Every open or closed embedding is unramified (this is clear from \cref{prop:unramified}\itememph{c}). Hence every open embedding is étale.
	\end{alphanumerate}
\end{exm}
\begin{lem}\label{lem:etaleTrace}
	Let $A$ be a finite-dimensional algebra over a field $k$. Then the following are equivalent:
	\begin{alphanumerate}
		\item $A$ is étale over $k$.
		\item We can write $A\cong \prod_{i=1}^{n}\ell_i$, where the $\ell_i$ are finite separable field extensions of $k$.
		\item The trace form $(a,b)\mapsto \Tr_{A/k}(ab)$ is a perfect pairing\footnote{To avoid ambiguity, we use the term \defemph{perfect pairing} rather than \defemph{non-degenerate pairing} for  bilinear forms $\langle -,-\rangle\colon P\times Q\morphism R$, with $P$ and $Q$ finite projective $R$-modules, that induce isomorphisms $P\isomorphism\Hom_R(Q,R)$ and $Q\isomorphism \Hom_R(P,R)$. Actually it can be shown that if either of these morphisms is an isomorphism, then so is the other).} on $A\times A$.
	\end{alphanumerate}
\end{lem}
\begin{proof*}
	We prove \itememph{a} $\Leftrightarrow$ \itememph{b}. Since over a field everything is flat, the only question is whether $A$ is unramified. Since $A$ is finite-dimensional over $k$ and thus an artinian ring, we have 
	\begin{equation*}
		A\cong \prod_{i=1}^nA_{\mm_i}
	\end{equation*}
	where $\{\mm_1,\dotsc,\mm_n\}$ are the finitely many prime ideals of $A$ (see e.g.\ \cite[Corollary~2.16]{eisenbudCommAlg} for a proof). By \cref{exm:embeddings}\itememph{a}, $A$ is unramified at $\mm_i$ over $k$ iff $A_{\mm_i}$ is a finite separable field extension of $k$. This easily shows equivalence of \itememph{a} and \itememph{b}.
	
	If $\ell/k$ is a finite field extension, then a well-known assertion from classical field theory shows that $\Tr_{\ell/k}\colon \ell\times\ell\morphism k$ is perfect iff $\ell/k$ is separable. This immediately shows \itememph{b} $\Rightarrow$ \itememph{c}. For the converse, we only need to verify that all $A_{\mm_i}$ are fields. But if $x\in\mm_iA_{\mm_i}$, then $x$ is nilpotent in $A_{\mm_i}$, hence $a\mapsto \Tr_{A_{\mm_i}/k}(ax)$ is identically $0$ as nilpotent maps have vanishing trace. Thus $x=0$ as the trace pairing $\Tr_{A/k}$ is assumed perfect.
\end{proof*}
\begin{prop}\label{prop:finiteEtale}
	Let $f\colon X\morphism Y$ be a finite flat morphism between locally noetherian schemes, so $\Bb=f_*\Oo_X$ is a vector bundle on $Y$ in addition to being an $\Oo_Y$-algebra, and $X=\SPEC \Bb$. Then the following are equivalent:
	\begin{alphanumerate}
		\item $f$ is étale.
		\item The trace pairing, which is locally given by $(a,b)\mapsto \Tr_{\Bb/\Oo_Y}(ab)$, is perfect.
	\end{alphanumerate}
\end{prop}
\begin{proof}[Sketch of a proof\textup{*}]
	Since both assertions are local, we may assume that $X=\Spec B$ and $Y=\Spec A$ are affine, and moreover that $B$ is a finite free $A$-module. The trick is---of course---to reduce everything to fibres and apply \cref{lem:etaleTrace}. For condition \itememph{a} this is straightforward: since $B$ is already flat (even free) over $A$, étaleness can be checked on fibres by \cref{fact:etaleFibres}. So it suffices to transform \itememph{b} into a fibre-wise condition. To show that the map $B\morphism\Hom_A(B,A)$ induced by $\Tr_{B/A}$ is an isomorphism, it suffices to check that it is a locally split injection, since both sides are free $A$-modules of the same rank. But being a locally split injection in a neighbourhood of a prime $\pp\in\Spec A$ can be tested after tensoring with $\kappa(\pp)$. This is a very nice lemma that can be found in \cite[Ch.\:0 (19.1.12)]{egaIV1}. Thus also \itememph{b} can be tested on fibres, so everything reduces to \cref{lem:etaleTrace}. For more details, check out \cite[Proposition~2.7.2]{jacobians}.
\end{proof}
An interesting consequence is \cref{cor:etaleCodim2}. In fact, something much stronger is true: by a theorem of Zariski--Nagata, the étale fundamental group of a scheme doesn't change when a closed subscheme of codimension $\geq2$ is removed. Professor Franke hinted that we might sketch a proof of this in one of the upcoming lectures.
\begin{cor}\label{cor:etaleCodim2}
	In the situation of \cref{prop:finiteEtale}, let $U\subseteq Y$ be an open subset such that every irreducible component of $Y\setminus U$ has codimension $\geq 2$. If the restriction $f|_{f^{-1}(U)}\colon f^{-1}(U)\morphism U$ is étale, then also $f$ is étale.
\end{cor}
\begin{proof*}
	Working locally, we may assume that $X=\Spec B$ and $Y=\Spec A$ are affine and $B$ is a finite free $A$-module. By \cref{prop:finiteEtale} it suffices to show that $\Tr_{B/A}$ induces an isomorphism $B\isomorphism \Hom_A(B,A)$. Since $B$ and $\Hom_A(B,A)$ are finite free $A$-modules of the same rank, this morphism is given by some square matrix $C$ with coefficients in $A$. Thus is suffices to show that $\det C$ is invertible in $A$. Since $B\morphism\Hom_A(B,A)$ is an isomorphism over $U$ by assumption, we see that $V(\det C)$ must be contained in $Y\setminus U$. But every irreducible component of $V(\det C)$ has codimension $\leq 1$ by Krull's principal ideal theorem. Thus $V(\det C)=\emptyset$, whence $\det C$ is indeed invertible.
\end{proof*}
\begin{prop}
	Let $f\colon X\morphism Y$ be an étale morphism between locally noetherian $S$-schemes. Then we have a canonical isomorphism
	\begin{align*}
		f^*\Omega_{Y/S}\isomorphism \Omega_{X/S}\,.
	\end{align*}
\end{prop}
\begin{proof}
	Surjectivity follows from the well-known short exact sequence (sometimes called the \emph{cotangent sequence})
	\begin{equation*}
		f^*\Omega_{Y/S}\morphism\Omega_{X/S}\morphism\Omega_{X/Y}\morphism 0\,,
	\end{equation*}
	in which $\Omega_{X/Y}=0$ by \cref{prop:unramified} as $f$ is unramified. For injectivity, first note that the assertion is local on $X$, $Y$, and $S$. Hence without restriction they are all affine. Now consider the following diagram:
	\begin{equation*}
		\begin{tikzcd}
			X \ar[rr,mono,bend left=50, "\Delta_{X/S}"{swap}]\rar[mono,"\Delta_{X/Y}"]\drar["f"{swap}] & X\times_YX\dar\rar[mono]\drar[dash, phantom, "(\boxtimes)"] & X\times_SX\dar["p"]\\
			& Y\rar[mono,"\Delta_{Y/S}"] & Y\times_SY
		\end{tikzcd}
	\end{equation*}
	Since $X$, $Y$, and $S$ are affine and thus separated, the diagonaly $\Delta_{X/S}$, $\Delta_{Y/S}$, and $\Delta_{X/Y}$ are closed embeddings. Moreover, $\Delta_{X/Y}$ is also an open embedding by \cref{prop:unramified}\itememph{b}. Moreover, it's easy to see that \itememph{\boxtimes} is a pullback square. Hence also $X\times_YX\monomorphism X\times_SX$ is a closed embedding. Moreover, the pullback is taken along $p$, which is a flat since it factors into a composition $X\times_SX\morphism X\times_SY\morphism Y\times_SY$ of base changes of the flat morphism $f\colon X\morphism Y$. 
	
	Now let $\Jj_Y\subseteq \Oo_{Y\times_SY}$ be the ideal defined by $\Delta_{Y/S}$. Then commutativity of the diagram together with \cref{prop:Kahler} shows
	\begin{equation*}
		f^*\Omega_{Y/S}\cong f^*\Delta_{Y/S}^*\Jj_Y\cong \Delta_{X/S}^*p^*\Jj_Y\,.
	\end{equation*}
	Since $\Omega_{X/S}\cong \Delta_{X/S}^*\Jj_X$, where $\Jj_X$ defines the closed embedding $\Delta_{X/S}$, it suffices to identify $\Jj_X$ with $p^*\Jj_Y$ (we will immediately see why this is not quite true, but at least that's the spirit). Since $p$ is flat and \itememph{\boxtimes} a pullback square, $p^*\Jj_Y\subseteq \Oo_{X\times_SX}$ is the ideal defined by the closed embedding $X\times_YX\monomorphism X\times_SX$. Moreover, $\Delta_{X/Y}$ is an open-closed embedding. Hence $p^*\Jj_Y\subseteq \Jj_X$, and while they might not coincide, their pullbacks to $X$ are certainly equal. This shows indeed $f^*\Omega_{Y/S}\cong \Omega_{X/S}$, as claimed.
\end{proof}
\begin{prop}
	Let $f\colon X\morphism Y$ be a morphism of locally finite type between locally noetherian schemes. If $f$ is étale at $x\in X$ and $y=f(x)$, then $\Oo_{X,x}$ is regular iff so is $\Oo_{Y,y}$.
\end{prop}
\begin{proof}\lecture[Criteria for étale morphisms. Universal homeomorphisms.]{2019-11-04}
	Recall that if $R$ is a noetherian local ring with maximal ideal $\mm$, then the numbers $\dim_{\kappa(\mm)}\mm^n/\mm^{n+1}$ are given by the \defemph{Hilbert--Samuel polynomial} $H_\mm(n)$ for $n\gge 0$. Moreover, $\dim R=1+\deg H_\mm$ (here the degree of the zero polynomial is $-1$ by convention). See \cite[Chapter~12]{eisenbudCommAlg} or \cite[Theorem~20]{alg2} for proofs.
	
	Now since $\Oo_{X,x}$ is flat over $\Oo_{Y,y}$ and $\mm_{X,x}=\mm_{Y,y}\Oo_{X,x}$ by \cref{prop:unramified}\itememph{c}, we easily derive
	\begin{equation*}
		\mm_{X,x}^n/\mm_{X,x}^{n+1}\cong \mm_{Y,y}^n/\mm_{Y,y}^{n+1}\otimes_{\kappa(y)}\kappa(x)
	\end{equation*}
	for all $n$. Comparing Hilbert--Samuel polynomials, we get $\dim \Oo_{X,x}=\dim\Oo_{Y,y}$. But the above isomorphism also shows
	\begin{equation*}
		\dim_{\kappa(x)}\mm_{X,x}/\mm_{X,x}^2=\dim_{\kappa(y)}\mm_{Y,y}/\mm_{Y,y}^2\,.
	\end{equation*}
	This immediately shows that $\Oo_{X,x}$ is regular iff so is $\Oo_{Y,y}$.
\end{proof}

\begin{rem*}
	Another (slightly more general) way to see $\dim \Oo_{X,x}=\dim\Oo_{Y,y}$ is as follows: let $X_y=f^{-1}\{y\}\morphism\Spec \kappa(y)$ be the fibre of $f$ over $y$. By \cite[\stackstag{00ON}]{stacks-project}, the inequality
	\begin{equation*}
		\dim\Oo_{X,x}\leq\dim\Oo_{Y,y}+\dim\Oo_{X_y,x}\,,
	\end{equation*}
	is actually an equality as $\Oo_{X,x}$ is flat over $\Oo_{Y,y}$. Moreover, $X_y\morphism \Spec \kappa(y)$ is étale at $x$, hence $\dim \Oo_{X_y,x}=0$ by \cref{exm:embeddings}\itememph{a}. This shows $\dim \Oo_{X,x}=\dim\Oo_{Y,y}$ and we conclude as above.
\end{rem*}
The formulation of the following \cref{prop:formallyEtale} was a bit messy in the lecture. I tried my best to fix the presentation conditions in \itememph{c} and \itememph{f} and make them as strong as possible (also please tell me if I got something wrong). This results in some minor changes in the proof.
\begin{prop}[{\cite[Arcata II Def.\ (1.1)]{sga4.5}}]\label{prop:formallyEtale}
	Let $R\morphism S$ be a map of finite type between noetherian rings (or, more generally, a map of finite presentation between arbitrary rings). Then the following conditions are equivalent:
	\begin{alphanumerate}
		\item Let $A$ be an $R$-algebra with a nilpotent ideal $I\subseteq A$. Then there is a canonical isomorphism 
		\begin{equation*}
			\Hom_{\cat{Alg}_R}(S,A)\cong \Hom_{\cat{Alg}_R}(S,A/I)\,.
		\end{equation*}
		In other words, for every solid \enquote{lifting problem} as below, there exists a unique dashed \enquote{solution}: 
		\begin{equation}\label{diag:formallyEtale}
			\begin{tikzcd}
				R\dar\rar & A\dar\\
				S\rar\urar[dashed,"\exists!"] & A/I
			\end{tikzcd}\,.
		\end{equation}
		\item Same as \itememph{a}, but $I^2=0$ rather than $I$ being just nilpotent.
		\item Same as \itememph{b}, but only for local rings $A$.
		\item $S$ is flat over $R$ and $\Omega_{S/R}=0$.
		\item There is a presentation $S\cong R[x_1,\dotsc,x_n]/J$ with the following property: the ideal $J$ has generators $f_1,\dots,f_n$ such that the \enquote{Jacobian determinant}
		\begin{equation*}
			\Delta=\det\left(\frac{\partial f_i}{\partial x_j}\right)
		\end{equation*}
		maps to a unit in $S$.
		\item Let $S\cong R[x_1,\dotsc,x_n]/J$ be an arbitrary presentation. Then there are elements $f_1,\dotsc,f_n\in J$ and $f\in R[x_1,\dotsc,x_n]$ such that $V(J)\subseteq D(f)$, the localization $J_f$ is generated by $f_1,\dotsc,f_n$, and the \enquote{Jacobian determinant} $\Delta$ as in \itememph{e} maps to a unit in $S$.
	\end{alphanumerate}
\end{prop}
\begin{proof}
	Brace yourselves, for this proof is going to take long. Also note that some parts have been omitted in the lecture
	
	\emph{Proof of equivalence of \itememph{a}, \itememph{b}, and \itememph{c}.}
	It's clear that \itememph{a} $\Rightarrow$ \itememph{b} $\Rightarrow$ \itememph{c}. For the converse, let's show \itememph{b} implies \itememph{a}. Let $I\subseteq A$ such that $I^n=0$. Using \itememph{a} repeatedly, we see that $S\morphism A/I$ lifts uniquely to some $S\morphism A/I^2$, which in turn lifts uniquely to some $S\morphism A/I^4$ etc. Inductively, we get a unique lift to $S\morphism A/I^{2^m}$ for all $m\geq 0$. Choosing $m$ such that $2^m\geq n$ provides a unique lift to $A=A/I^{2^m}$, as desired.
	
	Next, we show \itememph{c} $\Rightarrow$ \itememph{a}. Suppose we are given a lifting problem as in \cref{diag:formallyEtale}. Condition \itememph{c} provides unique lifts $S\morphism A_\pp$ of $S\morphism A_\pp/IA_\pp$ for every prime $\pp\in\Spec A$. But $S$ is of finite presentation over $R$, so an easy argument shows that $S\morphism A_\pp$ already factors over $A_f$ for some $f\notin \pp$. Since this can be done for any prime $\pp$, we end up with a bunch of maps $S\morphism A_{f_\lambda}$, or equivalently $D(f_\lambda)\morphism \Spec S$, where $\lambda$ ranges over some indexing set $\Lambda$, and $\Spec A=\bigcup_{\lambda\in \Lambda}D(f_\lambda)$. Note that $D(f_\lambda)\morphism \Spec S$ and $D(f_\mu)\morphism\Spec S$ coincide on $D(f_\lambda)\cap D(f_\mu)=D(f_\lambda f_\mu)$. Indeed, this follows from the fact that for any prime $\qq\in D(f_\lambda f_\mu)$ the induced map $S\morphism A_\qq$ is uniquely determined as a lift of $S\morphism A_\qq/IA_\qq$, by the uniqueness condition of \itememph{c}. Thus, the maps $D(f_\lambda)\morphism \Spec S$ determine a unique morphism $\Spec A\morphism \Spec S$ (in fancy words: here we used that $\Hom_{\cat{Sch}}(-,\Spec S)$ is a sheaf in the Zariski topology). Therefore we get a map $S\morphism A$ with the desired properties.
	
	\emph{Proof of \itememph{a} $\Rightarrow$ \itememph{d}.} Since $R$ and $S$ are assumed noetherian, there is actually a very quick argument for flatness. Write $S\cong T/J$, where $T=R[x_1,\dotsc,x_n]$ is a polynomial ring over $R$. By \itememph{a}, $S\isomorphism T/J$ lifts to unique maps $S\morphism T/J^n$ for all $n>0$. Hence, if $\roof{T}$ denotes the $J$-adic completion of $T$, then $\roof{T}\epimorphism S$ has a unique split $S\morphism\roof{T}$. In particular, $S$ is  a direct summand of $\roof{T}$. But $\roof{T}$ is flat over $T$, which is flat over $R$, so $S$ too is flat over $R$.
	
	Now we show $\Omega_{S/R}=0$. Consider any lifting problem like \cref{diag:formallyEtale}, where $I^2=0$. Then $\ov{\phi}\colon S\morphism A/I$ has a unique lift $\phi\colon S\morphism A$. Suppose $d\colon S\morphism I$ is an $R$-linear derivation. An easy calculation shows that $\phi+d\colon S\morphism A$ is a morphism of $R$-algebras. But then $\phi+d$ is another lift of $\ov{\phi}$! Thus $d=0$ and we conclude $0=\Der_R(S,I)=\Hom_S(\Omega_{S/R},I)$. Now consider $A=S\oplus\Omega_{S/R}$, with its natural $S$-module structure. We can extend this to a natural graded ring structure via $\omega_1\omega_2=0$ for all $\omega_1,\omega_2\in \Omega_{S/R}$. Thus, $A$ is an $S$-algebra with an ideal $I=\Omega_{S/R}$ that satisfies $I^2=0$. Applying our previous considerations, we see $0=\Hom_S(\Omega_{S/R},\Omega_{S/R})$, whence $\Omega_{S/R}=0$, as desired.
	
	\emph{Proof of \itememph{d} $\Rightarrow$ \itememph{f}.} Put $X=\Spec S$ and $Y=\Spec R$, since Professor Franke's opinion is that the argument is best understood geometrically. Let $S\cong T/J$ be any presentation, where $T=R[x_1,\dotsc,x_n]$ is a polynomial ring over $R$. Consider the conormal sequence
	\begin{equation*}
		J/J^2\morphism\Omega_{T/R}\otimes_TS\morphism\Omega_{S/R}\morphism 0\,.
	\end{equation*}
	Note that $\Omega_{T/R}\otimes_TS$ is a free $S$-module generated by $\d x_1,\dotsc,\d x_n$. Since $\Omega_{S/R}=0$, we find elements $f_1,\dotsc,f_n\in I$ that map to a basis of $\Omega_{T/R}\otimes_TS$. In particular, this implies that the Jacobian determinant
	\begin{equation*}
		\Delta=\det\left(\frac{\partial f_i}{\partial x_j}\right)
	\end{equation*}
	is invertible in $S$, since the Jacobian matrix is precisely the change of basis matrix between the $\d x_j$ and the images of the $f_i$.
	
	Now let $J'\subseteq J$ be the ideal generated by $(f_1,\dotsc,f_n)$. Put $S'=T/J'$ and $X'=\Spec S'$. Then $X\morphism Y$ factors over the closed embedding $X\monomorphism X'$. We claim that $X'\morphism Y$ is unramified at all points $x\in X$. Indeed, let $\qq\subseteq R[x_1,\dotsc,x_n]$ be the prime ideal corresponding to the image of $x$ in $\IA_R^n$. Then $\qq$ contains $J$. Consider the conormal sequence
	\begin{equation*}
		J'/J'^2\morphism \Omega_{T/R}\otimes_TS'\morphism \Omega_{S'/R}\morphism 0\,.
	\end{equation*}
	We know that $\Omega_{T/R}\otimes_TS\cong \Omega_{T/R}/J\Omega_{T/R}$ is generated by the images of the $f_i$. By Nakayama and $\qq\supseteq J$ we see that $(\Omega_{T/R})_\qq$ is generated by the $f_i$ too. Thus, the left arrow in the above sequence becomes surjective upon localizing at $\qq$. Thus $(\Omega_{S'/R})_\qq=0$, so by \cref{prop:unramified}\itememph{a} $X'\morphism Y$ is indeed unramified at $x$.
	
	Let $U$ be the subset of points $x'\in X'$ where $X'\morphism Y$ is unramified, i.e., the set of points where $\Omega_{S'/R}$ vanishes. Since $\Omega_{S'/R}$ is a finite $S'$-module (as follows from the conormal sequence above), the set $U$ is open, and it contains $X$ as seen above. By \cref{fact:etaleProperties}\itememph{b}, $X\morphism U$ is étale as well. Then also $X\monomorphism X'$ is étale as $U\subseteq X'$ is open. But then $X\monomorphism X'$ must be an open-closed embedding by \cref{fact:etaleProperties}\itememph{c}! Thus, there is an $f\in T$ such that $S\cong S'_f=(T/J')_f$. This immediately shows \itememph{f}.
	
	\emph{Proof of \itememph{f} $\Rightarrow$ \itememph{e}.} We use notation as above. If $f$ has the property from \itememph{f}, then $f$ is invertible in $S$. Hence $S\cong S_f\cong T_f/J_f\cong T_f/J'_f\cong S'_f$. Observe that $S'_f\cong S[t]/(1-tf)$. Hence we have a presentation 
	\begin{equation*}
		S\cong R[x_1,\dotsc,x_n,t]/(f_1,\dotsc,f_n,1-tf)\,.
	\end{equation*}
	We claim that this new presentation has the required properties. Indeed, the new Jacobian matrix has only zeros in its last column, as $\frac{\partial}{\partial t}f_i=0$, except for the bottom entry $\frac{\partial}{\partial t}(1-tf)=-f$, which is invertible in $S$ by construction. Thus, the new Jacobian determinant is $-f\Delta$, hence invertible in $S$.
	
	\emph{Proof of \itememph{e} $\Rightarrow$ \itememph{b}.} Let $S\cong R[x_1,\dotsc,x_n]/(f_1,\dotsc,f_n)$ be a presentation of $S$ such that the associated Jacobian matrix $D$ has invertible determinant in $S$. Let $A$ be an $A$-algebra with an ideal $I\subseteq A$ such that $I^2=0$.  Consider the function $f\colon A^n\morphism A^n$ which is given component-wise by by the $f_i$, and let $\ov{f}\colon (A/I)^n\morphism (A/I)^n$ be its reduction modulo $I$. Then the set of $R$-algebra morphisms $S\morphism A$ is in bijection with the set of solutions $x\in A^n$ of $f(x)=0$. Similarly, $R$-algebra morphisms $S\morphism A/I$ are in bijection with solutions $\ov{x}\in (A/I)^n$ of $\ov{f}(\ov{x})=0$. Thus it suffices to show that for any solution $\ov{x}$ there is a unique $x^*\in A^n$ satisfying $f(x^*)=0$ and $x^*\equiv \ov{x}\mod I$.
	
	Now comes the funny part: existence and uniqueness of $x^*$ follows from Newton's method---you know, this thing from calculus! Indeed, let at first $x\in A^n$ be any lift of $\ov{x}$. Then $f(x)=0$ is not necessarily true, but at least $f(x)$ is an element of $I$. Let $\delta\in A^n$ be a vector with entries in $I$. Then 
	\begin{equation*}
		f(x+\delta)=f(x)+D\delta
	\end{equation*}
	by \enquote{Taylor expansion} and $I^2=0$. Since $D$ is invertible, there is a unique $\delta^*$ such that $x^*=x+\delta^*$ satisfies $f(x^*)=0$; more precisely, $\delta^*$ is given by $\delta^*=-D^{-1}f(x)$. We are done, at last!
\end{proof}
\begin{rem}
	\cite[Arcata]{sga4.5} has only conditions \itememph{a} and \itememph{d}, and \itememph{f}. Moreover, $R$ doesn't need to be noetherian; instead it is assumed that $S$ is finitely presented over $R$. Then the equivalent conditions are used as a definition \defemph{étale ring maps}.
\end{rem}
\begin{rem*}
	In the lecture we presented a different, and admittedly more messy proof of flatness (in the noetherian case). For the sake of completeness, we outline the argument.
	
	Without restriction, $R$ is local. Flatness can be tested after completion at the maximal ideal $\mm_R$, so we base change to the completion $\roof{R}$. So now $R$ is noetherian complete local. It can be shown that \itememph{a} still holds for artinian local $R$-algebras. Using arguments as in \cite[15--17]{jacobians} we may reduce to a situation where $R$ is noetherian complete local and $S$ is a finite local $\mm_RS$-complete $R$-algebra such that $S/\mm_RS$ is a finite separable extension of $R/\mm_R$.
	
	Let $\ov{\beta}\in S/\mm_RS$ be a primitive element of the field extension and $P\in R[T]$ a lift of its minimal polynomial. Note that $P'(\beta)\neq 0$ in $S/\mm_RS$ by separability. Hence by Hensel's lemma we may lift $\ov{\beta}$ to a root $\beta\in S$ of $P$. Let $B'=A[t]/(P)$. Then there is a unique $S'\morphism S$ sending $t\mapsto \beta$. Also $S'$ clearly satisfies \itememph{e}, hence also \itememph{a}. However, applying \itememph{a} we get unique maps $S\morphism S'/\mm_R^nS'$ for all $n$, hence a map $S\morphism S'$. Using uniqueness in \itememph{a}, we see that this map is actually an inverse to $S'\morphism S$. Hence $S\cong S'$. But it's easy to check that $S'$ is flat over $R$.
\end{rem*}
\begin{rem*}
	Our  of \cref{prop:formallyEtale} works for the non-noetherian case as well---except, unfortunately, for a tiny detail: completions of non-noetherian rings need not be flat, so the proof of flatness is not complete! Here we present a way to circumvent this argument.
	
	As usual, write $S\cong T/J$, and let $\rr\in \Spec S$ be a prime with preimages $\qq\in \Spec T$ and $\pp\in \Spec R$. It suffices to show that $S_{\rr}$ is flat over $R_\pp$. Our goal is to show that $J_\qq$ can be generated by elements $f_1,\dotsc,f_c$, whose images in $T_\qq/\pp T_\qq$ form a regular sequence. Then \cite[\stackstag{0470}]{stacks-project} can be applied to see that $S_{\rr}\cong T_\qq/J_\qq$ is flat over $R_\pp$.
	
	Let $\ov{T}=T/\pp T$ and let $\ov{\qq}=\qq\ov{T}_\qq$ be the maximal ideal of $\ov{T}_\qq$. Then $\kappa(\ov{\qq})=\kappa(\qq)$. Tensoring $J_\qq\morphism \ov{\qq}$ with $\kappa(\qq)$ gives a map $J_\qq/\qq J_\qq\morphism\ov{\qq}/\ov{\qq}^2$. Our first goal is to show that this map is injective. To see this, first note that
	\begin{equation*}
		J/J^2\morphism\Omega_{T/R}\otimes_TS
	\end{equation*}
	is split injective. Indeed, this follows from \cite[Proposition~16.12]{eisenbudCommAlg}, because the projection map $T/J^2\morphism T/J\cong S$ admits a splitting by \cref{prop:formallyEtale}\itememph{a}. In particular, the above map stays injective under tensoring with $-\otimes_R\kappa(\pp)$ and then with $-\otimes_{\ov{T}}\kappa(\qq)$. That is,
	\begin{equation*}
		J_\qq/\qq J_\qq\morphism\Omega_{\ov{T}_\qq/\kappa(\pp)}\otimes_{\ov{T}_\qq}\kappa(\qq)
	\end{equation*}
	is still injective. But this map factors through $\ov{\qq}/\ov{\qq}^2$ via the conormal sequence
	\begin{equation*}
		\ov{\qq}/\ov{\qq}^2\morphism\Omega_{\ov{T}_\qq/\kappa(\pp)}\otimes_{\ov{T}_\qq}\kappa(\qq)\morphism\Omega_{\kappa(\qq)/\kappa(\pp)}\morphism 0\,,
	\end{equation*}
	hence $J_\qq/\qq J_\qq\morphism \ov{\qq}/\ov{\qq}^2$ is indeed injective. Now choose a basis $(\ov{f}_1,\dotsc,\ov{f}_c)$ of the $\kappa(\qq)$-vector space $J_\qq/\qq J_\qq$ and extend it to a basis $(\ov{f}_1,\dotsc,\ov{f}_d)$ of $\ov{\qq}/\ov{\qq}^2$. For all $i=1,\dotsc,c$ choose lifts $f_i\in J_\qq$ of $\ov{f}_i$. By Nakayama's lemma, the $f_i$ generate $J_\qq$. Moreover, their images in $\ov{T}_\qq$ are part of a minimal generating system of the maximal ideal $\ov{\qq}\subseteq \ov{T}_\qq$. Indeed, just choose lifts $f_j\in \ov{T}_\qq$ of the $\ov{f}_j$ for $j=c+1,\dotsc,d$ to get a complete minimal generating system of $\ov{\qq}$, by a well-known Nakayama argument.
	
	But $\ov{T}_\qq$ is a regular local ring because it is a localization of $\kappa(\pp)[x_1,\dotsc,x_n]$ at some prime ideal. Hence any minimal generating system of its maximal ideal form a regular sequence (see \cite[\stackstag{00NQ}]{stacks-project} or the proof of \cite[Proposition~2.2.1]{homalg}). This shows that $f_1,\dotsc,f_c$ have the required property and we are done.
\end{rem*}
\begin{prop}\label{prop:thickeningEtaleEquivalence}
	Let $X$ be a scheme and $X_0\subseteq X$ a closed subscheme defined by a locally nilpotent quasi-coherent sheaf of ideals $\Ii$. Let $\Et/X$ denote the full subcategory of $\cat{Sch}/X$ spanned by the étale $X$-schemes $U\morphism X$. Then the canonical functor
	\begin{align*}
		-\times_XX_0\colon \Et/X&\morphism\Et/X_0\\
		U&\longmapsto U_0=U\times_XX_0
	\end{align*}
	is an equivalence of categories.
\end{prop}
\begin{proof}[Sketch of a proof]
	Before we start, note that any morphism $f\colon U\morphism U'$ in $\Et/X$ is étale by \cref{fact:etaleProperties}\itememph{b}.	One first shows that $-\times_XX_0$ is fully faithful. By gluing morphisms in the Zariski topology, we can readily reduce this to the affine case. Then \cref{prop:formallyEtale}\itememph{a} can be applied.
	
	It remains to show essential surjectivity. Since we already know $-\times_XX_0$ is fully faithful, we can check essential surjectivity affine-locally. Let $R$ be a ring with a nilpotent ideal $I$. Put $R_0=R/I$ and let $S_0$ be an étale $R_0$-algebra. By \cref{prop:formallyEtale}\itememph{c} we can write $S_0\cong R_0[x_1,\dotsc,x_n]/(\ov{f}_1,\dotsc,\ov{f}_n)$, where the Jacobian determinant $\det(\partial \ov{f}_i/\partial x_j)$ is invertible in $S_0$. Let $S=R[x_1,\dotsc,x_n]/(f_1,\dotsc,f_n)$, where the $f_i$ are arbitrary lifts of the $\ov{f}_i$. Then $S_0\cong S/I$ and we are done if we can show that $S$ is étale over $R$. It suffices to show that $\Delta \det(\partial f_i/\partial x_j)$ is invertible in $S$. But its reduction modulo $I$ is invertible in $S_0$ and $I$ is nilpotent, hence $\Delta$ is invertible as well.
\end{proof}
\begin{rem}
	Note that any base change $X'_0=X'\times_XX_0\monomorphism X'$ of $X_0\monomorphism X$ is also defined by a locally nilpotent sheaf of ideals. Hence it is a homeomorphism of Zariski topologies.
	
	In general, a morphism such that all of its basechanges are homeomorphisms is called a \defemph{universal homeomorphism}. To study universal homeomorphisms, we start with \defemph{universal bijections}, i.e., morphisms $f\colon X\morphism Y$ such that all base changes $f'\colon X'=X\times_YY'\morphism Y'$ are bijections too. Let $|\blank|\colon \cat{Sch}\morphism\cat{Top}$ denote the forgetful functor sending a scheme to its underlying topological space. With the obvious terminology, a morphism is universally bijective iff it is universally injective and universally surjective.
	
	First observe that every surjection $f\colon X\morphism Y$ of schemes is automatically a universal surjection. Indeed, for all schemes $Y'\morphism Y$ the canonical map
	\begin{equation*}
		|X\times_YY'|\morphism |X|\times_{|Y|}|Y'|
	\end{equation*}
	is surjective (see \cite[Corollary~1.3.2]{alggeo1}), so $f'\colon X'=X\times_YY'\morphism Y'$ is indeed surjective again. This shows that surjections are automatically universal.
	
	Now let $f\colon X\morphism Y$ be morphism of schemes which is injective on points. Then the following conditions are equivalent:
	\begin{alphanumerate}
		\item The morphism $f$ is universally injective.
		\item For every $x\in X$ with image $y=f(x)$ the residue field extension $\kappa(x)/\kappa(y)$ is algebraic and purely inseparable.
	\end{alphanumerate}
	Such morphisms are also called \emph{radiciel} in \cite[Ch.\:I \S3.5]{egaI}. Since injectivity is a fibre-wise condition, we can easily reduce equivalence of \itememph{a} and \itememph{b} to the case of a field extension $\ell/k$. Now a well-known characterization of $\ell/k$ being algebraic and purely inseparable is that for any field extension $K/k$ the ring $\ell\otimes_kK$ is a local ring (with only one prime ideal), which is exactly what we want.

	At this point we can effectively describe universally bijective morphisms. Now for a morphism $f\colon X\morphism Y$ of finite type between locally noetherian schemes or a morphism of locally finite presentation between arbitrary schemes. Then the following conditions are equivalent.
	\begin{numerate}
		\item The morphism $f$ is a universal homeomorphism.
		\item The morphism $f$ is proper and universally bijective.
		\item The morphism $f$ is finite, bijective and satisfies the equivalent conditions \itememph{a} and \itememph{b}.
	\end{numerate}
	Clearly \itememph{1} $\Leftrightarrow$ \itememph{2} as proper morphism are universally closed by definition. To see equivalence with \itememph{3}, note that $f$ is necessarily quasi-finite if it injective on points, and quasi-finite proper morphisms are finite by Zariski's main theorem (see \cite[Theorem~2\itememph{a}]{jacobians} and use a base change argument for the non-noetherian case).
\end{rem}
The cool thing about universal homeomorphisms is that they allow a striking generalization of \cref{prop:thickeningEtaleEquivalence}!
\begin{prop}\label{prop:universalHomeo}
	If $X_0\morphism X$ is a universal homeomorphism, then the functor
	\begin{align*}
		-\times_XX_0\colon \Et/X\morphism\Et/X_0
	\end{align*}
	defined as in \cref{prop:thickeningEtaleEquivalence} is an equivalence of categories.
\end{prop}
\begin{proof}[The easy part of the proof]
	Let $f,f'\colon U\morphism U'$ be a pair of parallel morphisms between étale $X$-schemes $U$ and $U'$. The equalizer $\Eq(f,f')$ sits in a pullback diagram
	\begin{equation*}
		\begin{tikzcd}
			\Eq(f,f')\dar\rar\drar[pullback] & U'\dar["\Delta_{U'/X}"]\\
			U\rar["{(f,f')}"] & U'\times_XU'
		\end{tikzcd}
	\end{equation*}
	Since $\Delta_{U'/X}$ is an open embedding by \cref{prop:unramified}\itememph{b}, $\Eq(f,f')$ is an open subscheme of $U$. Now suppose the base changes $f_0$ and $f_0'$ agree, i.e., $\Eq(f_0,f_0')=U_0$. Since equalizers commute with base change and $X_0\morphism X$ is a universal homeomorphism, we get $\Eq(f,f')=U$ as topological spaces. But since $\Eq(f,f')$ is an open subscheme, this equality also holds on the level of schemes. Thus, $f=f'$, whence $-\times_XX_0$ is a faithful functor.
	
	Proving that $-\times_XX_0$ is fully faithful is only slightly harder. But proving that it is essentially surjective is hard as f*ck, so we leave the rest of the proof to \cite[Exposé~IX Théorème~4.10]{sga1}.
\end{proof}
\begin{rem}
	Suppose $X$ is a scheme over $\IF_q$. Then \cref{prop:universalHomeo} may be applied to the \emph{absolute Frobenius} $\Frob_X\colon X\morphism X$, whenever it is finitely presented. $\Frob_X$ is defined as the identity on points and $(-)^q$ on the structure sheaf.
	
	Likewise, if $X$ is a projective variety over a field $k/\IF_q$, then we have the \defemph{relative Frobenius} sending projective coordinates $[x_1,\dotsc,x_n]$ to $[x_1^q,\dotsc,x_n^q]$. This too is a universal homeomorphism.
\end{rem}
\lecture[A messy flatness proof. The small and the big étale site. Some hints on the pro-étale site. The étale fundamental groupoid and the étale fundamental group.]{2019-11-08}Finally we are ready to define the étale topology on a scheme!
\begin{defi}\label{def:etaleTopology}
	Let $X$ be an arbitrary scheme. 
	\begin{alphanumerate}
		\item The \defemph{étale topology} on the category $\Et/X$ of étale $X$-schemes is the Grothendieck topology with covering sieves as follows: a sieve $\Ss$ over an étale $X$-scheme $U$ is covering iff there are étale morphisms $\{V_i\morphism X\}_{i\in I}\subseteq \Ss$ whose images cover $X$. The corresponding site is called the \defemph{small étale site} $X_\et$.
		\item The \defemph{étale topology} on the category $\cat{Sch}/X$ of all $X$-schemes (or all locally noetherian $X$-schemes if $X$ is locally noetherian) has covering sieves as in \itememph{a}. The corresponding site is called the \defemph{big étale site} $X_{\Et}$, or $(\cat{Sch}/X)_\et$ to be consistent with the notation in \cref{def:fpqc}.
	\end{alphanumerate}
\end{defi}
\begin{rem}
	The big étale site is the same as the site defined by \cref{prop:technicalAF} with respect to the class $\Cc_\et$ of étale surjective morphisms and the trivial property $\Pp_\et$ (or $\Pp_\et=\left\{\text{locally noetherian $X$-schemes}\right\}$). Indeed, the reason is basically that étale maps are open by \cref{prop:ppfOpen} (compare the argument in \cref{lem*:fppf}). By the same argument, we may also require all morphisms to be quasi-compact in addition to being étale.
	
	Similarly, the small étale site can be obtained as a special case of \cref{prop:technicalAF} too. In this case, $\Cc_\et$ is again the class of étale surjective morphisms, but $\Pp_\et$ is the property of being étale over $X$ (which is obviously local and compatible with $\Cc_\et$).
\end{rem}
\begin{lem}
	Let $f\colon X\morphism Y$ and $g\colon Y\morphism Z$ be morphisms of schemes. If $gf$ and $f$ are étale and $y\in Y$ is in the image of $f$, then also $g$ is étale $y$. 
\end{lem}
\begin{proof*}[Sketch of a proof]
	Let $x\in X$ be a preimage and $z\in Z$ the image of $y$. Then $\Oo_{X,x}$ is flat over $\Oo_{Y,y}$. But flat local morphisms of local rings are faithfully flat, hence $\Oo_{X,x}$ is faithfully flat over $\Oo_{Y,y}$! Since $\Oo_{X,x}$ is flat over $\Oo_{Z,z}$, this shows that $\Oo_{Y,y}$ is too.
	
	To show that $g$ is unramified at $y$, we use \cref{prop:unramified}\itememph{d}. That $\mm_{Z,z}\Oo_{Y,y}\subseteq\mm_{Y,y}$ is an equality  can be tested after tensoring with the faithfully flat $\Oo_{Y,y}$-algebra $\Oo_{X,x}$. But then it becomes $\mm_{Z,z}\Oo_{X,x}=\mm_{X,x}=\mm_{Y,y}\Oo_{X,x}$, using that $gf$ and $f$ are étale at $x$. Finally, $\kappa(y)/\kappa(z)$ is a subextension of $\kappa(x)/\kappa(z)$, hence finite separable too. 
\end{proof*}

To finish the section, Professor Franke would like to give some hints on the \defemph{pro-étale topology}. Although some of this already appeared in old papers of Olivier (1972) and Gabber/Ramero, the actual developments have happened very recently in the paper \cite{proetale} by Bhatt and Scholze. To start things off, we introduce a relaxation of étale morphisms.
\begin{defi}
	A morphism $X\morphism Y$ of schemes is called \defemph{weakly étale} if it is flat and the diagonal $\Delta_{X/Y}\morphism X\times_YX$ is also flat.
\end{defi}
\begin{thm}[Bhatt/Scholze]\label{thm:proetale}
	Let $B$ be a weakly étale $A$-algebra. Then there exists a weakly étale and faithfully flat $B$-algebra $\ov{B}$ which is ind-étale as an $A$-algebra (i.e., a filtered colimit of étale $A$-algebras).
\end{thm}
\cref{thm:proetale} can be roughly viewed as saying that the topology defined by the ind-étales in the affine case is the same as the topology defined by the weakly étales. Also note that noetherianness is not assumed here! Now the pro-étale topology can be defined in the obvious way.
\begin{defi}
	The \defemph{small} and  \defemph{big pro-étale site} $X_\proet$ and $(\cat{Sch}/X)_\proet$ are obtained from \cref{prop:technicalAF}, where $\Cc_{\mathrm{pro}\et}$ is the class of weakly étale, quasi-compact, and faithfully flat morphisms, and $\Pp_\proet$ is the property of being weakly étale over $X$ resp.\ the trivial property.
\end{defi}

\section{The Étale Fundamental Group}
\begin{defi}
	Let $X$ be a scheme. A \defemph{geometric point} of $X$ is a morphism $\Spec k\morphism X$, where $k$ is a separably closed field.
\end{defi}
In other words, a geometric point is an ordinary point $x\in X$ together with an embedding $\kappa(x)\monomorphism k$ of its residue field into a separably closed field $k$. We consider geometric points since the étale cohomology group will, of course, have to depend on a choice of base point.
\begin{defi}
	Let $\pi\colon Y\morphism X$ be an étale covering in the sense of \cref{def:etale}\itememph{c}, and let $x\colon \Spec k\morphism X$ be a geometric point.
	\begin{alphanumerate}
		\item We define the \defemph{fibre over $x$} as
		\begin{equation*}
		\Fib_x(Y)=\left\{y\colon \Spec k\rightarrow Y\st \pi y=x\right\}\,.
		\end{equation*}
		\item Consider $\Fib_x$ as a functor $\left\{\text{étale coverings of $X$}\right\}\morphism\cat{Set}$, where the left-hand side is considered as a full subcategory of $\Et/X$. The \defemph{étale fundamental groupoid} $\Pi_1^\et(X)$ is defined as follows: its objects are the geometric points $x$ of $X$, and its morphisms are functor isomorphisms $\Fib_x\isomorphism\Fib_{x'}$ for geometric point $x,x'\in\Pi_1^\et(X)$.
		\item The automorphism group of $x$ in $\Pi_1^\et(X)$ is denoted $\pi_1^\et(X,x)$ and called \defemph{étale fundamental group of $X$ with basepoint $x$}.
	\end{alphanumerate}
\end{defi}
\begin{rem}
	 The étale fundamental group $\pi_1^\et(X,x)$ can be given a canonical topology (generalizing the Krull topology on infinite Galois groups) as follows: for an étale covering $Y\morphism X$ put
	\begin{equation*}
	\Omega_Y=\left\{\sigma\in\pi_1^\et(X,x)\st\sigma\text{ acts identically on }\Fib_x(Y)\right\}
	\end{equation*}
	Then a neighbourhood basis of the $\id_x\in\pi_1^\et(X,x)$ is given by
	\begin{equation*}
	\left\{\Omega_Y\st Y\rightarrow X\text{ is an étale covering}\right\}\,.
	\end{equation*}
	General morphism sets $\Hom_{\Pi_1^\et(X)}(x,y)$ are given a topology such that composition is continuous. It can be shown that $\pi_1^\et(X,x)$ is a pro-finite set in the given topology, but for this we would need to show that there are \enquote{enough normal coverings $Y\morphism X$} in the sense that $\Omega_Y$ is a normal subgroup of $\pi_1^\et(X,x)$.
	
	A lot of the theory of $\pi_1^\et(X,x)$ is developed in \cite[Exposé~V]{sga1}. For example, it can be shown that $\Pi_1^\et(X)$ is connected (as a groupoid) if $X$ is connected.
\end{rem}
\begin{rem}
	For smooth proper varieties over a field of characteristic $0$, you could consider the set of pairs $(\Vv,\nabla)$, where $\Vv$ is a vector bundle on $X$ and $\nabla$ a connection on $\Vv$ with vanishing curvature (this actually gives a \defemph{Tannakian category}). Then instead of $\Fib_x$ one could consider the functor $\Vv\mapsto\Vv(x)$ for $x\in X$.
\end{rem}
\begin{deflem}\label{deflem:prinG}
	\lecture[$G$-principal homogeneous spaces. Some properties of étale fundamental groups. Sketch of proof of the Zariski--Nagata theorem.]{2019-11-11}
	Let $G$ be a finite group acting (over $X$) on an étale covering $\snake{X}\morphism X$. We say that $\snake{X}$ is a \defemph{$G$-principal homogeneous space} if the following equivalent conditions hold.
	\begin{alphanumerate}
		\item Fppf-locally (or fpqc-locally) on $X$ there is a $G$-equivariant isomorphism $\snake{X}\cong X\times G$ of $X$-schemes.
		\item The canonical mophism $\snake{X}\times G\morphism\snake{X}\times_X\snake{X}$ given by $(x,g)\mapsto (x,gx)$ is an isomorphism, and $\snake{X}\morphism X$ is faithfully flat (i.e., $\snake{X}$ is non-empty as long as $X$ is).
	\end{alphanumerate}
\end{deflem}
\begin{prop}\label{prop:Galois}
	Let $X$ be connected and let $p\colon \snake{X}\morphism X$ be a connected étale covering. Suppose $G$ acts fixed-point free on $\ov{X}$, i.e., the equalizer $\Eq(\id_{\snake{X}},g)=\emptyset$ for all $g\in G\setminus\{1\}$. Let $d$ be the degree of the finite morphism $p$, then $\# G\leq d$ and the following conditions are equivalent.
	\begin{alphanumerate}
		\item $\# G=d$.
		\item The canonical morphism $\snake{X}/G\morphism X$ is an isomorphism.
		\item $\snake{X}$ is a $G$-principal homogeneous space in the sense of \cref{deflem:prinG}
	\end{alphanumerate}
\end{prop}
\begin{defi}\label{def:Galois}
	A connected étale covering $\snake{X}\morphism X$ is called a \defemph{Galois covering} if it satisfies the equivalent conditions from \cref{prop:Galois} with $G=\Aut(\snake{X}/X)$.
\end{defi}
\begin{thm}
	If $X$ is a locally noetherian scheme, then there is an equivalence of categories
	\begin{align*}
		\left\{\text{étale coverings $\snake{X}\morphism X$}\right\}&\isomorphism\left\{\begin{tabular}{c}
		functors $F\colon \Pi_1^\et(X)\rightarrow\{\text{finite discrete sets}\}$ s.th.\\
		$F(x)\times \Hom_{\Pi_1^\et(X)}(x,y)\rightarrow F(y)$ is continuous
		\end{tabular}\right\}\\
		\snake{X}&\longmapsto \Fib(\snake{X})\,,
	\end{align*}
	where $\Fib(\snake{X})=\Fib_{(-)}(\snake{X})$ is given by $\Fib(\snake{X})(x)=\Fib_x(\snake{X})$.
\end{thm}
\begin{proof}[Sketch of a proof]
	Without losing generality $X$ is connected. First, we establish this for étale coverings $\snake{X}\morphism X$ split by some Galois coverings $\Xi\morphism X$, and the functors $F$ on which $\pi_1^\et(X,x)$ acts through its quotient $\Gal(\Xi/X)$. Then, show that every connected étale covering is a quotient of some Galois covering and pass to some limit. See \cite[Exposé~V]{sga1} for this.
\end{proof}
\begin{prop}\label{prop:etaleLineBundles}
	Let $X$ be a locally noetherian scheme on which $n\in\IN$ is invertible and there is a primitive $n\ordinalth$ root of unity $\zeta\in\Global(X,\mu_n)$. Let $\Ll$ be a line bundle on $X$ and $\tau\colon \Ll^{\otimes n}\isomorphism \Oo_X$ be a trivialization. Consider the functor
	\begin{align*}
		\cat{Sch}/X&\morphism\cat{Set}\\
		(f\colon Y\morphism X)&\longmapsto \left\{\lambda\in\Global(Y,\Ll)\st \tau(\lambda^{\otimes n})=1\right\}\,.
	\end{align*}
	Here we put $\Global(Y,\Ll)=\Global(Y,f^*\Ll)$ for convenience. Also note that $\IZ/n\IZ$ acts on that functor via $\lambda\mapsto \zeta^k\lambda$. Then this functor is representable by an étale covering $\Lambda\morphism X$ which is a $\IZ/n\IZ$-principal homogeneous space. Moreover, every $\IZ/n\IZ$-principal homogeneous space has this form, and $(\Ll,\tau)$ is determined by $\Lambda$ up to isomorphism and we have a long exact sequence
	\begin{multline*}
		0\morphism \Global(X,\mu_n)\morphism\Global(X,\Oo_X^\times)\morphism[n]\Global(X,\Oo_X^\times)\morphism\\
		\morphism\Hom(\pi_1^\et(X,x),\IZ/n\IZ)\morphism\Pic(X)\morphism[n]\Pic(X)\morphism\dotso
	\end{multline*}
	when $X$ is connected.
\end{prop}
\begin{proof}
	Lagrange resolvents???
\end{proof}
\begin{prop}\label{prop:etaleTorsors}
	Let $p$ be a prime and $X$ a noetherian scheme over $\IF_p$. Let $\Tt$ be an $\Oo_X$-torsor for the Zariski topology. Let $\phi$ denote the absolute Frobenius on $X$ and let $\tau\colon \phi_*\Tt\isomorphism\Tt$ be an isomorphism. Then the functor
	\begin{align*}
		\cat{Sch}/X&\morphism\cat{Set}\\
		(f\colon Y\morphism X)&\longmapsto \left\{t\in\Global(Y,\Tt)\st f^*\tau(t)=t\right\}\,,
	\end{align*}
	on which $\IZ/p\IZ$ acts via $t\mapsto k+t$, is representable by a $\IZ/p\IZ$-principal homogeneous space, one has a bijection of isomorphism classes as in \cref{prop:etaleLineBundles}, and there is an exact sequence
	\begin{multline*}
		0\morphism \IZ/n\IZ\morphism\Global(X,\Oo_X)\xrightarrow{\phi-\id}\Global(X,\Oo_X)\morphism\\
		\morphism\Hom(\pi_1^\et(X,x),\IZ/p\IZ)\morphism H^1(X_\Zar,\Oo_X)\xrightarrow{\phi-\id}H^1(X_\Zar,\Oo_X)\morphism\dotso
	\end{multline*}
	when $X$ is connected.
\end{prop}
\begin{rem}
	Thus, in characteristic $p>0$ over an algebraically closed field $k$, one has $\pi_1^\et(\IA_k^n,x)\neq 1$ for any base point, as there are Artin--Schreier coverings.
\end{rem}
\begin{prop}
	\begin{alphanumerate}
		\item $\pi_1^\et(\IP_k^n)=1$ for all base points.
		\item If $X$ is regular and $\pi\colon\snake{X}\morphism X$ the blow-up of a closed point, then $\pi_*\colon\pi_1^\et(\snake{X})\isomorphism\pi_1^\et(X)$ for all base points.
	\end{alphanumerate}
\end{prop}
\begin{proof}[Sketch of a proof]
	We prove \itememph{a} and \itememph{b} simultaneously by induction on the dimension. Part~\itememph{a} is equivalent to the condition that all étale coverings of $\IP_k^n$ split, and this is equivalent to the condition that all étale coverings $\SPEC\Aa\morphism\IP_k^n$ have $\Aa\cong \Oo_{\IP^n}^{\oplus d}$ for some $d$. For $n=1$ we have
	\begin{equation*}
		\Aa\cong \bigoplus_{i=1}^d\Oo_{\IP^n}(d_i)
	\end{equation*}
	by the Grothendieck--Birkhoff theorem. There are no positive $d_i$ as the corresponding summand would be in $\nil(\Aa)$, and no negative $d_i$ as $\Aa$ is self-dual by \cref{prop:finiteEtale}. Alternatively one can use the Hurwitz formula.
	
	Part~\itememph{b} is trivial when $\dim(X)=1$. Now assume \itememph{a} holds in dimension $n$. Then \itememph{b} for dimension $n+1$ can be established by the theorem of formal functions. Let $\snake{X}_0$ be the unique non-trivial fibre, and $\snake{X}_n$ its infinitesimal thickenings. Let $\SPEC\Aa\morphism\snake{X}$ be an étale covering of $\snake{X}$. Then $\Aa|_{\snake{X}_0}$ is split by the induction assumption, then $\Aa|_{\snake{X}_n}$ are split by \cref{prop:thickeningEtaleEquivalence}. Thus the vector bundles $\Aa|_{\snake{X}_n}$ are trivial, thus $\Aa\isomorphism\pi^*\pi_*\Aa$ and $\pi_*\Aa$ is a vector bundle on $X$ by the theorem of formal functions. Thus,
	\begin{equation*}
		\pi^*\colon\left\{\text{étale coverings of $X$}\right\}\isomorphism\left\{\text{étale coverings of $\snake{X}$}\right\}\,.
	\end{equation*}
	For \itememph{a} with $n\geq 2$ we may replace $X=\IP_k^n$ by the blow-up $\snake{X}$ of a closed point, and have $\pi\colon \snake{X}\morphism\IP_k^{n-1}$ with fibres isomorphic to $\IP_k^1$ and
	\begin{equation*}
	\pi^*\colon\left\{\text{étale coverings of $\IP_k^{n-1}$}\right\}\isomorphism\left\{\text{étale coverings of $\snake{X}$}\right\}
	\end{equation*}
	by the same argument, thus $\pi_1^\et(\IP_k^n)\cong \pi_1^\et(\snake{X})\cong \pi_1^\et(\IP_k^{n-1})$.
\end{proof}
\begin{rem}
	For $X\morphism Y$ satisfying some suitable assumptions and compatible geometric points $x\morphism X$ and $y\morphism Y$ there is an exact sequence
	\begin{equation*}
		\pi_1^\et(X_y,x)\morphism\pi_1^\et(X,x)\morphism\pi_1^\et(Y,y)\morphism\pi_0(X_y)\,,
	\end{equation*}
	which can be established by a similar application of the formal function theorem.
\end{rem}
\begin{thm}[Zariski/Nagata]
	Let $X$ be a regular separated noetherian scheme and $U\subseteq X$ an open subscheme such that every irreducible component of $X\setminus U$ has codimension $\geq 2$. Then restriction to $U$ is an equivalence of categories
	\begin{equation*}
		\left\{\text{étale coverings of $X$}\right\}\isomorphism\left\{\text{étale coverings of $U$}\right\}\,.
	\end{equation*}
\end{thm}
\begin{proof}[Sketch of a proof]
	The full proof can be found in \cite[Exposé~X Théorème~3.4]{sga1}. The idea is to construct an inverse functor. Suppose $\SPEC\Aa\morphism U$ is an étale covering. Then $\SPEC j_*\Aa\morphism X$ is a straightforward candidate for an extension, $j\colon U\monomorphism X$ denoting the embedding of $U$. By elementary scheme theory, $j_*\Aa$ is at least a quasi-coherent $\Oo_X$-algebra. If we could show that it is a vector bundle, then \cref{cor:etaleCodim2} automatically shows that $\SPEC j_*\Aa\morphism X$ is étale.
	
	By  a finiteness theorem for the cohomology of open subsets (see \cite{sga2}, but only a rather trivial special case is used), $j_*\Aa$ is coherent. It is still hard to show that it is a vector bundle, but in dimension $2$ this is somehow easier than in general.
	
	For a coherent $\Oo_X$-module $\Ff$, recall that \defemph{$\Ff$ satisfies condition $S_k$} if for all $x\in X$ we have $\depth\Ff_x\geq \min\{k,\dim\Oo_{X,x}\}$. For small $k$ we have some nice equivalent reformulations:
	\begin{numerate}
		\item $\Ff$ satisfies $S_1$ iff $\Gamma(U,\Ff)\monomorphism\Gamma(V,\Ff)$ is injective whenever $V$ is a dense open subset of the open subset $U\subseteq X$.
		\item $\Ff$ satisfies $S_2$ iff it satisfies $S_1$ and $\Gamma(U,\Ff)\isomorphism\Gamma(V,\Ff)$ whenever $V\subseteq U$ are open subsets of $X$ such that $\codim(Z,U)\geq 2$ for every connected component $Z$ of $U\setminus V$.
	\end{numerate}
	In dimension $\leq 2$ and for $X$ regular, $\Ff$ is locally free iff it has $S_2$ by Auslander--Buchsbaum. For $\Ff=j_*\Aa$ this is trivial by the above reformulation of $S_2$ and the fact that $\Aa$ has $S_2$.
	
	The general case of $j_*\Aa$ being a vector bundle is dealt with by induction. One can assume that $X\setminus U$ is a discrete set, say, $X\setminus U=\{x\}$ by locality. Using the flat base change $\Spec \roof{\Oo}_{X,x}\morphism X$ one may assume $X=\Spec A$ and $x=\mm_A$, where $A$ is a complete noetherian local ring with maximal ideal $\mm_A$. Let $t\in\mm_A\setminus \mm_A^2$ and let $X_n=V(t^n)$, $U_n=V(t^n|_U)$. When $\dim(A)\geq 3$ and $\Vv$ is a vector bundle on $U$, then \cite{sga2} shows 
	\begin{equation}\label{eq:FF}
		\Global(U,\Vv)\isomorphism\limit_{n\in\IN}\Global(U_n,\Vv|_{U_n})\,.
	\end{equation}
	But $\Aa|_{U_1}$ splits by the induction assumption and thus $\Aa|_{U_n}$ by \cref{prop:thickeningEtaleEquivalence}. Thus there are isomorphisms
	\begin{equation*}
		\begin{tikzcd}
			\Global(U_n,\Aa|_{U_n})\rar\dar[iso]&\Global(U_m,\Aa|_{U_m})\dar[iso]\\
			(A/t^n)^{\oplus d}\rar & (A/t^m)^{\oplus d}
		\end{tikzcd}
	\end{equation*}
	for $n\geq m$, showing that the limit on the right-hand side of \cref{eq:FF} is a free $A$-module. [TODO: There's something wrong with this proof, as Franke explained in the next lecture.]
\end{proof}
\begin{rem}\lecture[Erratum to the last lecture. An example of étale and pro-étale fundamental groups. Stalks at geometric points, sheafification in the étale topology.]{2019-11-15}
	We say a (locally noetherian) scheme $X$ \defemph{satisfies $S_k$} if $\Oo_X$ satisfies $S_k$. Moreover, we say $X$ \defemph{satisfies $R_k$} iff $\Oo_{X,x}$ is regular whenever $\dim\Oo_{X,x}\leq k$. There are some famous criteria:
	\begin{alphanumerate}
		\item $X$ is reduced iff it satisfies $R_0$ and $S_1$.
		\item $X$ is normal iff it satisfies $R_1$ and $S_2$. This is known as \emph{Serre's normality criterion}.
	\end{alphanumerate}
\end{rem}
In the pro-étale topology of Bhatt/Scholze (see \cite{proetale}), there is actually a \emph{pro-étale fundamental group} $\pi_1^\proet(X,x)$ defined in the same way as $\pi_1^\et(X,x)$, for schemes $X$ whose underlying topological space is locally noetherian. They consider locally constant sheaves of sets on the pro-étale site, and also étale $X$-schemes satisfying the valuation criterion for properness. %Their discussion of pro-étale coverings is in, where $X$ is assumed to have a locally noetherian underlying topological space. 
\begin{exm}
	For most cases (like $\IC\setminus\{0\}$, elliptic curves $\IC/\Gamma$ for some lattice $\Gamma$, or curves $\IH/\Gamma$) the topological universal covering admits no algebraic definition.
	
	Let $k$ be an algebraically closed field, and $X$ be the topological space obtained from $\IP_k^1$ by identifying $0$ and $\infty$. Let $\IP_k^1\epimorphism X$ be the canonical projection. We can make $X$ into a scheme via the structure sheaf $\Oo_X$ defined via
	\begin{equation*}
		\Global(U,\Oo_X)=\left\{f\in\Global(\pi^{-1}(U),\Oo_{\IP^1})\st f(0)=f(\infty)\text{ if }0\in\pi^{-1}(U)\right\}
	\end{equation*}
	(note that if $0\in\pi^{-1}(U)$ then also $\infty\in\pi^{-1}(U)$). This is an example of a \defemph{non-unibranch} scheme. Here we call a local ring $R$ \defemph{unibranch} if $R/\nil(R)$ is a domain whose normalization $S$ is local. $R$ is called \defemph{geometrically unibranch} if in addition the residue field extension $\kappa(\mm_S)/\kappa(\mm_R)$ is inseparable. A scheme being unibranch then means the obvious thing, i.e., that all its local rings are unibranch.
	
	Our $X$ fails to be unibranch at its singular point $\ov{0}=\ov{\infty}\in X$. There are étale coverings
	\begin{equation*}
		X_N\morphism X\,,
	\end{equation*}
	where $X_N$ is the quotient of $\coprod_{i\in\IZ/N\IZ}\IP_k^1$ upon identifying $(i,0)$ with $(i+1,\infty)$ for all $i\in\IZ/N\IZ$. The cyclic group $\IZ/N\IZ$ acts on $X_N$ by permuting the components of the disjoint union. This defines morphisms $\pi_1^\et(X,x)\morphism\IZ/N\IZ$. Since it can be shown that every étale covering of $X$ is a finite disjoint union of $X_N$ (use that $k$ is algebraically closed), these morphisms assemble to an isomorphism
	\begin{equation*}
		\pi_1^\et(X,x)\isomorphism\roof{\IZ}\coloneqq\limit_{N\in\IN}\IZ/N\IZ\,.
	\end{equation*}
	But in the pro-étale topology, we can also form an \enquote{infinite cyclic covering} $X_\infty$ by replacing $\IZ/N\IZ$ by $\IZ$. This defines an isomorphism
	\begin{equation*}
		\pi_1^\proet(X,x)\isomorphism \IZ\,.
	\end{equation*}
	Note that for $k=\IC$, in fact, $X_\infty(\IC)$ happens to be a universal covering for $X(\IC)$.
	
	Bhatt/Scholze give the pro-étale fundamental group a topology that makes it a \defemph{Noohi group} (see \cite[Definition~7.1.1]{proetale}). Moreover, by Lemma~7.4.3 and 7.4.10 of \emph{loc.\ cit.}, the pro-finite completion of $\pi_1^\proet(X,x)$ gives back the good old $\pi_1^\et(X,x)$, and for schemes $X$ which are geometrically unibranch there is an isomorphism $\pi_1^\proet(X,x)\cong \pi_1^\et(X,x)$.
\end{exm}
\section{Stalks at Geometric Points and Henselian Rings}
In general, there is no good notion of \enquote{stalks of sheaves on arbitrary sites}. This makes stuff like sheafification harder to understand in general. But for the étale site over a scheme, we are lucky and a suitable notion of stalks does exist!

Unless specified otherwise, $X$ is always a (locally) noetherian scheme in this section.
\begin{defi}\label{def:etaleStalk}
	Let $x$ be a geometric point of $X$. An \defemph{étale neighbourhood} of $x$ is a pair $(U,u)$, where $U\morphism X$ is étale and the diagram
	\begin{equation*}
		\begin{tikzcd}
			\Spec k\rar["u"]\drar["x"{swap}]& U\dar\\
			 & X\end{tikzcd}
	\end{equation*}
	commutes. A \defemph{morphism of étale neighbourhoods} $(U,u)\morphism(V,v)$ is a morphism $U\morphism V$ of $X$-schemes that makes $(U,u)$ into an étale neighbourhood of the geometric point $v$ of $V$. Finally, if $\Ff$ is a presheaf on $X_\et$ one puts
	\begin{equation*}
		\Ff_x\coloneqq \colimit_{(U,u)}\Global(U,\Ff)\,,
	\end{equation*}
	where the colimit is taken over all étale neighbourhoods $(U,u)$ of $x$. This is called the \defemph{stalk of $\Ff$ at $x$}.
\end{defi}
\begin{fact}\label{fact:filtered}
	The colimit in \cref{def:etaleStalk} is in fact a filtered colimit.
\end{fact}
\begin{proof}
	It is clear that the category of étale neighbourhoods of $x$ is non-empty, as $(X,x)$ is trivially an element. It remains to check the other conditions of cofilteredness (and keep in mind that $\Global(-,\Ff)$ is contravariant, so the category needs to be cofiltered for the colimit to be filtered).
	\begin{alphanumerate}
		\item For all étale neighbourhoods $(U,u)$ and $(V,v)$, there is an étale neighbourhood $(W,w)$ with morphisms $(W,w)\morphism (U,u)$ and $(W,w)\morphism (V,v)$.
		\item If $\alpha,\beta\colon (U,u)\morphism (V,v)$ is a pair of parallel morphisms, there is a morphism $(W,w)\morphism (U,u)$ equalizing $\alpha$ and $\beta$.
	\end{alphanumerate}
	For \itememph{a}, consider $W=U\times_XV$ with its geometric point $w=(u,v)$. For \itememph{b}, take $W=\Eq(\alpha,\beta)$. The equalizer is an open subscheme of $U$ by the argument from \cref{prop:universalHomeo}, hence étale over $X$, and $u\colon \Spec k\morphism U$ factors over $W$.
\end{proof}
In the following we will tacitly work with $X_\et$, but the big étale site $(\cat{Sch}/X)_\et$ would work as well. Also we silently assume that all sheaves we consider are sheaves of sets, (abelian) groups, rings, or modules.
\begin{prop}\label{prop:etaleStalks}
	Let $U\morphism X$ be an étale $X$-scheme and $\Ff$ a presheaf on $X_\et$.
	\begin{alphanumerate}
		\item A sieve $\Ss$ over $U$ is covering iff for every geometric point $x$ of $U$ there is some $(V\morphism U)\in\Ss$ over which $x$ factors.
		\item The presheaf $\Ff$ is separated iff the canonical map $\Global(U,\Ff)\morphism\prod_u\Ff_u$ is injective for all $U$, the product being taken over all geometric points of $U$.
		\item Define a presheaf $\Ff^\sh$ on $X_\et$ by
		\begin{equation*}
			\Global(U,\Ff^\sh)=\left\{(f_u)\in\prod_{u}\Ff_u\st\begin{tabular}{c}
			the sieve of all $\pi\colon V\rightarrow U$, for which there exists\\
			$f_V\in\Global(V,\Ff)$ such that $(f_V)_{\pi v}$ is
			the image of $f_V$\\in $\Ff_v$ for all geometric points $v$ of $V$, is covering
			\end{tabular}\right\}\,.
		\end{equation*}
		Then $\Ff^\sh$ is a sheaf and $(-)^\sh\colon \cat{PSh}(X_\et)\morphism \cat{Sh}(X_\et)$ is a left-adjoint of the forgetful functor $\cat{Sh}(X_\et)\morphism \cat{PSh}(X_\et)$.
		\item The unit $\Ff\morphism\Ff^\sh$ of the adjunction induces an isomorphism on stalks.
		\item When $\Ff$ and $\Gg$ are sheaves on $X_\et$, a morphism $\Ff\morphism\Gg$ is an isomorphism iff $\Ff_x\morphism\Gg_x$ is an isomorphism at all geometric points $x$.
	\end{alphanumerate}
\end{prop}
\begin{rem}\label{rem:Jacobson}
	If $X$ is Jacobson, it suffices to check the conditions from \cref{prop:etaleStalks} on geometric points $u$ whose \defemph{support} $|u|$ (i.e., the unique point in the image of $u\colon \Spec k\morphism U$) is closed. This is proved in the proof of \cref{def:etaleTopology}.
\end{rem}
\begin{rem}\lecture[Set-theoretic issues with geometric points, proof of \cref{prop:etaleStalks}. Henselian rings.]{2019-11-18}
	In \cref{prop:etaleStalks}\itememph{c} we have implicitly used the diagram
	\begin{equation*}
		\begin{tikzcd}
			\Global(U,\Ff)\rar\dar& \Ff_{\pi v}\dar\\
			\Global(V,\Ff)\rar & \Ff_v
		\end{tikzcd}\,.
	\end{equation*}
	This uses the fact that the étale neighbourhoods of $\pi v$ in $U$ (resp.\ $v$ in $V$) are cofinal in the étale neighbourhoods of $\sigma v$, where $\sigma\colon V\morphism X$ denotes the structure morphism of the $X$-scheme $V$.
\end{rem}
\begin{rem}
	So far we considered general geometric points $x\colon \Spec k\morphism X$. From now on, let $k(x)$ denote that $k$. Let $x_0=|x|$. Let $k'$ be the separable closure of the residue field $k(x_0)$ of $\Oo_{X,x_0}$ in $k(x)$ and $x'\colon \Spec k'\morphism X$ denote the corresponding morphism.
	
	If $\rho\colon U\morphism X$ is étale and $u_0\in U$ such that $\rho(u)=x_0$, then $k(u_0)$ is a finite separable extension of $k(x_0)$. Therefore, if $u\colon \Spec k(x)\morphism U$ is a geometric point of $U$ such that $\rho u=x$, thus turning $(U,u)$ into an étale neighbourhood of $x$, then the image of $k(u_0)\morphism k(x)=k(u)$ is contained in $k'$. Thus, there is a unique $u'\colon \Spec k'\morphism U$ such that $\rho u'=x'$ and such that
	\begin{equation*}
		\begin{tikzcd}
			& U\\
			\Spec k(x)\rar\urar["u"] & \Spec k'\uar["u'"{swap}]
		\end{tikzcd}
	\end{equation*}
	commutes. Thus, $x$ and $x'$ have the same étale neighbourhoods, in the sense that there is a canonical equivalence of categories. Therefore we can replace $x$ by $x'$ without changing the statements and constructions of the proposition.
	
	This is actually crucial to avoid set-theoretical difficulties! Indeed, if we took the product $\prod_{u}\Ff_u$ from \cref{prop:etaleStalks} at face value, this would be a monstrous abomination, due to the fact that the set of geometric points of $U$ is no set, but a proper class. The above arguments solve one half of that problem: the half that is caused by separably closed extensions of $k(x_0)$ becoming arbitrarily large. The other half is that there is a full class of field extensions of $k(x_0)$ that are isomorphic to $k'$. To fix this issue, we fix a choice of separable closure $k(x_0)^\sep$ and allow only those geometric points $x$ with $|x|=x_0$ that satisfy $k(x)=k(x_0)^\sep$.
\end{rem}
\begin{proof}[Proof of \cref{prop:etaleStalks}]
	Once the characterization of covering sieves is shown, the proofs from ordinary sheaf theory can be copied, so we show \itememph{a}, and then very briefly sketch the rest.
	
	If $\Ss$ is a covering sieve over $U\in X_\et$, then the members of $\Ss$ are jointly surjective just by \cref{def:etaleTopology}\itememph{a}. For a geometric point $u$ of $U$, there are thus a morphism $(\sigma\colon V\morphism U)\in\Ss$ and an ordinary point $v_0\in V$ such that $\sigma(v)=u_0=|u|$. Then $k(v_0)$ is a finite separable extension of $k(u_0)$. But $k(u)$ is separably closed, so there exists a (not necessarily unique) extension $k(v_0)\morphism k(u)$ of $k(u_0)\morphism k(u)$. This defines a geometric point $v$ of $V$ such that $\sigma v=u$.
	
	The opposite direction is merely trivial: if a geometric point $x$ factors over some morphism $(V\morphism U)\in \Ss$, then its support $|x|$ is in the image of $V\morphism U$. Since this is to be true for every geometric point, we see that the maps from $\Ss$ are jointly surjective, hence $\Ss$ is covering straight from \cref{def:etaleTopology}. This shows \itememph{a}.
	
	Adressing \cref{rem:Jacobson}: if $X$ is Jacobson, then so is $U$ as it is of finite type over $X$. Hence the closed points of $U$ are dense in any closed subset. But the joint image of the maps from $\Ss$ is open by \cref{prop:ppfOpen}, thus it is $U$ if it contains all closed points.
	
	For \itememph{b}, assume there are $f,f'\in\Global(U,\Ff)$ whose images in $\Ff_u$ coincide for every geometric point $u$ of $U$. By \cref{def:etaleStalk} and \cref{fact:filtered}, for every such $u$, there is an étale neighbourhood $(V_u,v_u)$ such that the restrictions of $f$ and $f'$ coincide in $\Global(V_u,\Ff)$. By \itememph{a}, the sieve generated by all such $V_u\morphism U$ is covering. As $\Ff$ was assumed separated, this shows $f=f'$ and thus \itememph{b}.
	
	For \itememph{d}, we have an obvious morphism $\Ff\morphism\Ff^\sh$ of presheaves. Let $x$ be a geometric point of $U\in X_\et$, let $(V,y)$ be an étale neighbourhood of $x$, and let $f=(f_v)\in\Global(V,\Ff^\sh)$. Put $\res_{V,y}(f)=f_y\in\Ff_y\cong \Ff_x$. It is easy to see that the $\res_{V,y}$ induce a unique map $\Ff_x^\sh\morphism \Ff_x$ via the universal property of colimits. This map is inverse to the previous map $\Ff_x\morphism\Ff_x^\sh$.
	
	It is also easy to see that $\Ff^\sh$ is an étale sheaf, and if $\Ff\morphism\Gg$ is a morphism of presheaves inducing isomorphisms on stalks, then $\Ff^\sh\morphism\Gg^\sh$ is an isomorphism. Also $\Ff\isomorphism\Ff^\sh$ in the case where $\Ff$ is already a sheaf is not hard: apply the sheaf axiom to the sieve occuring in the coherence condition in the definition of $\Ff^\sh$ in \cref{prop:etaleStalks}\itememph{c}, using \itememph{b} to show that the $f_V$ are unique and assemble to an element of $\limit_\Ss\Global(V,\Ff)\cong\Global(U,\Ff)$.
	
	Finally, if $\Gg$ is a sheaf and $\Ff$ a presheaf, then any morphism $\phi\colon\Ff\morphism\Gg$ factors as
	\begin{equation*}
		\begin{tikzcd}
			\Ff\rar["\phi"]\dar&\Gg\dar[iso]\\
			\Ff^\sh\rar["\phi^\sh"] & \Gg^\sh
		\end{tikzcd}\,.
	\end{equation*}
	The rest is easy.
\end{proof}
\begin{prop}[{\cite[Thm\:I.4.3]{milne}}]
	Let $A$ be a local ring with maximal ideal $\mm$ and residue field $k$. Let $\ov{f}$ denote the image of a polynomial $f\in A[T]$ under $A[T]\morphism k[T]$. Then the following conditions are equivalent.
	\begin{alphanumerate}
		\item If $f\in A[T]$ and $\ov{f}=g_0h_0$, where $g_0$ is monic and $\gcd(g_0,h_0)=1$ in $k[T]$, then there is a unique decomposition $f=gh$ in $A[T]$, such that $g$ is monic and $\ov{g}=g_0$, $\ov{h}=h_0$.
		\item The same as \itememph{a}, but $f$, $h_0$ and $h$ have to be monic.
		\item Put $X=\Spec A$. If $\snake{X}\morphism X$ is a finite morphism, then $\snake{X}=\coprod_{i=1}^n\Spec(A_i)$, where each $A_i$ is a local finite $A$-algebra.
		\item If $\snake{X}\morphism X$ is a quasi-finite morphisms, then $\snake{X}=\snake{X}_0\sqcup\coprod_{i=1}^n\Spec (A_i)$, with $A_i$ as in \itememph{c} and $\mm$ is not contained in the image of $\snake{X}_0$.
		\item If $U\morphism X$ is étale, then any lift $\Spec k\morphism U$ of $\Spec k\morphism X$ extends to a (unique) section $X\morphism U$ of $U\morphism X$.
		\item If $f_1,\dotsc,f_n\in A[X_1,\dotsc,X_n]$ are polynomials and $x_0\in k^n$ a common zero of the $\ov{f}_j$ such that $(\partial f_i/\partial X_j)(x_i)\neq 0$, then there is a unique $x\in A^n$ which is a common zero of the $f_j$ whose image in $k^n$ is $x_0$.
	\end{alphanumerate}
\end{prop}


\appendix
\backmatter\KOMAoption{chapterprefix}{false}
\printbibliography[prenote=LINKS]
\end{document}